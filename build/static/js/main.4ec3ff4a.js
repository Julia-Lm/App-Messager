/*! For license information please see main.4ec3ff4a.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case E:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ie=null,_e=null;function Ee(e){if(e=yi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),xe(e.stateNode,e.type,t))}}function Se(e){Ie?_e?_e.push(e):_e=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=_e;if(_e=Ie=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ie||null!==_e)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,It,_t,Et=!1,St=[],Tt=null,Ct=null,Nt=null,At=new Map,Dt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void _t(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ht(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Vt),Dt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return jt(t,e)}if(0<St.length){jt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&jt(Tt,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),At.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig;function zt(e,t,n,r){var i=gt,a=qt.transition;qt.transition=null;try{gt=1,Gt(e,t,n,r)}finally{gt=i,qt.transition=a}}function Kt(e,t,n,r){var i=gt,a=qt.transition;qt.transition=null;try{gt=4,Gt(e,t,n,r)}finally{gt=i,qt.transition=a}}function Gt(e,t,n,r){var i=Ht(e,t,n,r);if(null===i)qr(e,t,r,Wt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&bt(a),null===(a=Ht(e,t,n,r))&&qr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}var Wt=null;function Ht(e,t,n,r){if(Wt=null,null!==(e=vi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Jt=null;function Zt(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),fn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(F({},fn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(F({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function In(){return xn}var _n=F({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=nn(_n),Sn=nn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Cn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=nn(Nn),Dn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var On=l&&"TextEvent"in window&&!Pn,Ln=l&&(!Rn||Pn&&8<Pn&&11>=Pn),Mn=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function zn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Wn(e){Mr(e,0)}function Hn(e){if(H(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Jn="function"===typeof Zn.oninput}Xn=Jn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function $n(){Kn&&(Kn.detachEvent("onpropertychange",er),Gn=Kn=null)}function er(e){if("value"===e.propertyName&&Hn(Gn)){var t=[];zn(t,Gn,e,we(e)),De(Wn,t)}}function tr(e,t,n){"focusin"===e?($n(),Gn=n,(Kn=t).attachEvent("onpropertychange",er)):"focusout"===e&&$n()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Gn)}function rr(e,t){if("click"===e)return Hn(t)}function ir(e,t){if("input"===e||"change"===e)return Hn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},wr={},xr={};function Ir(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return wr[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var _r=Ir("animationend"),Er=Ir("animationiteration"),Sr=Ir("animationstart"),Tr=Ir("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Rr=Nr[Dr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(_r,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Sr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Fr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Qt(t)){case 1:var i=zt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case _r:case Er:case Sr:s=vn;break;case Tr:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Sn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(zr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:mi(s),d=null==c?u:mi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(qn(u))if(Yn)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?zn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(qn(m)||"true"===m.contentEditable)&&(pr=m,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=Zt()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,jn=!0)),0<(m=Kr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Un(n))&&(k.data=g))),(g=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=Zt(),Jt=Xt=Yt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Re(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(zr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(zr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Hr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Jr(){}var Zr=null;function $r(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],bi=-1;function wi(e){return{current:e}}function xi(e){0>bi||(e.current=ki[bi],ki[bi]=null,bi--)}function Ii(e,t){bi++,ki[bi]=e.current,e.current=t}var _i={},Ei=wi(_i),Si=wi(!1),Ti=_i;function Ci(e,t){var n=e.type.contextTypes;if(!n)return _i;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){xi(Si),xi(Ei)}function Di(e,t,n){if(Ei.current!==_i)throw Error(a(168));Ii(Ei,t),Ii(Si,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_i,Ti=Ei.current,Ii(Ei,e),Ii(Si,Si.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,xi(Si),xi(Ei),Ii(Ei,e)):xi(Si),Ii(Si,n)}var Li=null,Mi=!1,Fi=!1;function Vi(e){null===Li?Li=[e]:Li.push(e)}function Ui(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),He($e,Ui),i}finally{gt=t,Fi=!1}}return null}var ji=b.ReactCurrentBatchConfig;function Bi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qi=wi(null),zi=null,Ki=null,Gi=null;function Wi(){Gi=Ki=zi=null}function Hi(e){var t=qi.current;xi(qi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yi(e,t){zi=e,Gi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function Xi(e){var t=e._currentValue;if(Gi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ki){if(null===zi)throw Error(a(308));Ki=e,zi.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var Ji=null,Zi=!1;function $i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===Ji?Ji=[n]:Ji.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Zi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Zi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qs(),i=zs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qs(),i=zs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qs(),r=zs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ks(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=_i,a=t.contextType;return"object"===typeof a&&null!==a?a=Xi(a):(i=Ni(t)?Ti:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):_i),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,$i(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Xi(a):(a=Ni(t)?Ti:Ei.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ya=null,ma=0,ga=[],ka=0,ba=null,wa=1,xa="";function Ia(e,t){pa[va++]=ma,pa[va++]=ya,ya=e,ma=t}function _a(e,t,n){ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,ba=e;var r=wa;e=xa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wa=1<<32-ot(t)+i|n<<i|r,xa=a+e}else wa=1<<a|n<<i|r,xa=e}function Ea(e){null!==e.return&&(Ia(e,1),_a(e,1,0))}function Sa(e){for(;e===ya;)ya=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null;for(;e===ba;)ba=ga[--ka],ga[ka]=null,xa=ga[--ka],ga[ka]=null,wa=ga[--ka],ga[ka]=null}var Ta=null,Ca=null,Na=!1,Aa=null;function Da(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ta=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ta=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ba?{id:wa,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ta=e,Ca=null,!0);default:return!1}}function Pa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Oa(e){if(Na){var t=Ca;if(t){var n=t;if(!Ra(e,t)){if(Pa(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ta;t&&Ra(e,t)?Da(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ta=e)}}else{if(Pa(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ta=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ta=e}function Ma(e){if(e!==Ta)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!$r(e.type,e.memoizedProps)),t&&(t=Ca)){if(Pa(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Da(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Ta?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ca=Ta=null,Na=!1}function Va(e){null===Aa?Aa=[e]:Aa.push(e)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ja(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ba(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===I?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Ba(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Tc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=_c(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Sc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case x:return(t=Tc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=_c(t,e.mode,n,null)).return=e,t;ja(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);ja(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);ja(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Na&&Ia(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Na&&Ia(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Na&&Ia(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Na&&Ia(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Na&&Ia(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&Ia(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===I){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ba(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ua(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===I?((a=_c(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Ic(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Tc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);ja(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Sc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var za=qa(!0),Ka=qa(!1),Ga={},Wa=wi(Ga),Ha=wi(Ga),Qa=wi(Ga);function Ya(e){if(e===Ga)throw Error(a(174));return e}function Xa(e,t){switch(Ii(Qa,t),Ii(Ha,e),Ii(Wa,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Wa),Ii(Wa,t)}function Ja(){xi(Wa),xi(Ha),xi(Qa)}function Za(e){Ya(Qa.current);var t=Ya(Wa.current),n=se(t,e.type);t!==n&&(Ii(Ha,e),Ii(Wa,n))}function $a(e){Ha.current===e&&(xi(Wa),xi(Ha))}var eo=wi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,ao=b.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?$o:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Zo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Es|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function Eo(e,t){var n=uo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Do(9,To.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Ks(e,1,-1)}function Co(e,t,n){return n((function(){No(t)&&Ks(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return bo().memoizedState}function Po(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}uo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Vo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function Bo(){}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Go(){return bo().memoizedState}function Wo(e,t,n){var r=zs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Yo(t,n):(Xo(e,t,n),null!==(e=Ks(e,r,n=qs()))&&Jo(e,t,r))}function Ho(e,t,n){var r=zs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{Xo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ks(e,r,n=qs()))&&Jo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Yo(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===Ji?Ji=[t]:Ji.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Zo={readContext:Xi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},$o={readContext:Xi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Xi,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Ao,useDebugValue:Bo,useDeferredValue:function(e){var t=Ao(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ko.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=xa;t=":"+t+"R"+(n=(wa&~(1<<32-ot(wa)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Xi,useCallback:qo,useContext:Xi,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:zo,useReducer:xo,useRef:Ro,useState:function(){return xo(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=xo(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1},tu={readContext:Xi,useCallback:qo,useContext:Xi,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:zo,useReducer:Io,useRef:Ro,useState:function(){return Io(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=Io(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[Io(wo)[0],bo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Ps=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Os?Os=new Set([this]):Os.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Sa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Ai(),pu(t),null;case 3:return r=t.stateNode,Ja(),xi(Si),xi(Ei),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&(Ys(Aa),Aa=null))),pu(t),null;case 5:$a(t);var i=Ya(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=Ya(Wa.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":W(r),$(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Qa.current),Ya(Wa.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ta))switch(s=0!==(1&e.mode),e.tag){case 3:Xr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Xr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(xi(eo),r=t.memoizedState,Na&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Aa&&(Ys(Aa),Aa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===Is&&(Is=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Ja(),null===e&&jr(t.stateNode.containerInfo),pu(t),null;case 10:return Hi(t.type._context),pu(t),null;case 19:if(xi(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==Is||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Ds&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*Je()-o.renderingStartTime>Ds&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=eo.current,Ii(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ws)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Wa.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=b.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Ka(t,null,n,r):za(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return Yi(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Na&&n&&Ea(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function bu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||wc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Uu(e,t,i)}return t.flags|=1,(e=xc(a,r)).ref=t.ref,e.return=t,t.child=e}function wu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Uu(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return _u(e,t,n,r,i)}function xu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},Ii(xs,ws),ws|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Ii(xs,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,Ii(xs,ws),ws|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(xs,ws),ws|=r;return gu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _u(e,t,n,r,i){var a=Ni(n)?Ti:Ei.current;return a=Ci(t,a),Yi(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Na&&r&&Ea(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function Eu(e,t,n,r,i){if(Ni(n)){var a=!0;Pi(t)}else a=!1;if(Yi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Xi(c):c=Ci(t,c=Ni(n)?Ti:Ei.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Zi=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Si.current||Zi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Zi||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Bi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Xi(s):s=Ci(t,s=Ni(n)?Ti:Ei.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Zi=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Si.current||Zi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Zi||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,a,i)}function Su(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Uu(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=za(t,e.child,null,a),t.child=za(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Xa(e,t.containerInfo)}function Cu(e,t,n,r,i){return Fa(),Va(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null}}function Du(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(eo,1&o),null===e)return Oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ec(o,i,0,null),e=_c(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Au(n),t.memoizedState=Nu,e):Ru(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ec({mode:"visible",children:i.children},o,0,null),(u=_c(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&za(t,e.child,null,n),t.child.memoizedState=Au(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ks(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Ta=t,Na=!0,Aa=null,null!==n&&(ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,wa=n.id,xa=n.overflow,ba=t),(t=Ru(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Pu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Pu(e,t,i.children,n),t.memoizedState=null,n)}function Ru(e,t){return(t=Ec({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Pu(e,t,n,r){var i=e.child;return e=i.sibling,n=xc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ou(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=xc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=xc(o,r):(r=_c(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Va(r),za(t,e.child,null,n),(e=Ru(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ju(e,t){switch(Sa(t),t.tag){case 1:return Ni(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),xi(Si),xi(Ei),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(xi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(eo),null;case 4:return Ja(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var Bu=!1,qu=!1,zu="function"===typeof WeakSet?WeakSet:Set,Ku=null;function Gu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Wu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Hu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Wu(t,n,a)}i=i.next}while(i!==r)}}function Yu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Ju(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Wu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Gu(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Gu(t,n);break;case 4:is(e,t,n)}}function Zu(e){var t=e.alternate;null!==t&&(e.alternate=null,Zu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $u(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||$u(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if($u(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if(Ju(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),Bt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ju(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),Yu(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&J(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":Z(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&Bt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new zu),t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Ku=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Ku;){var i=Ku,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Bu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||qu;u=Bu;var c=qu;if(Bu=o,(qu=s)&&!c)for(Ku=i;null!==Ku;)s=(o=Ku).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Ku=s):fs(i);for(;null!==a;)Ku=a,ss(a,t,n),a=a.sibling;Ku=i,Bu=u,qu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ku=a):cs(e)}}function cs(e){for(;null!==Ku;){var t=Ku;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qu||Yu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Bi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}qu||512&t.flags&&Xu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Ku=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}function ls(e){for(;null!==Ku;){var t=Ku;if(t===e){Ku=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ku=n;break}Ku=t.return}}function fs(e){for(;null!==Ku;){var t=Ku;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yu(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Xu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Xu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Ku=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ku=u;break}Ku=t.return}}var hs,ds=Math.ceil,ps=b.ReactCurrentDispatcher,vs=b.ReactCurrentOwner,ys=b.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,bs=0,ws=0,xs=wi(0),Is=0,_s=null,Es=0,Ss=0,Ts=0,Cs=null,Ns=null,As=0,Ds=1/0,Rs=!1,Ps=null,Os=null,Ls=!1,Ms=null,Fs=0,Vs=0,Us=null,js=-1,Bs=0;function qs(){return 0!==(6&ms)?Je():-1!==js?js:js=Je()}function zs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==bs?bs&-bs:null!==ji.transition?(0===Bs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),Bs=e),Bs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ks(e,t,n){if(50<Vs)throw Vs=0,Us=null,Error(a(185));var r=Gs(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Ss|=t),4===Is&&Xs(r,bs)),Ws(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Ds=Je()+500,Mi&&Ui())),r)}function Gs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ws(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?bs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Vi(e)}(Js.bind(null,e)):Vi(Js.bind(null,e)),ri((function(){0===ms&&Ui()})),n=null;else{switch(kt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Hs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hs(e,t){if(js=-1,Bs=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?bs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ms;ms|=2;var o=rc();for(gs===e&&bs===t||(Ds=Je()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Wi(),ps.current=o,ms=i,null!==ks?t=0:(gs=null,bs=0,t=Is)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=_s,tc(e,0),Xs(e,r),Ws(e,Je()),n;if(6===t)Xs(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=_s,tc(e,0),Xs(e,r),Ws(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if(Xs(e,r),(130023424&r)===r&&10<(t=As+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){qs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if(Xs(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Ws(e,Je()),e.callbackNode===n?Hs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&Ys(t)),e}function Ys(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function Xs(e,t){for(t&=~Ts,t&=~Ss,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Js(e){if(0!==(6&ms))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Ws(e,Je()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=_s,tc(e,0),Xs(e,t),Ws(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Ws(e,Je()),null}function Zs(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Ds=Je()+500,Mi&&Ui())}}function $s(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&fc();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&Ui()}}function ec(){ws=xs.current,xi(xs)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Sa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Ja(),xi(Si),xi(Ei),ro();break;case 5:$a(r);break;case 4:Ja();break;case 13:case 19:xi(eo);break;case 10:Hi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=xc(e.current,null),bs=ws=t,Is=0,_s=null,Ts=Ss=Es=0,Ns=Cs=null,null!==Ji){for(t=0;t<Ji.length;t++)if(null!==(r=(n=Ji[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ji=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Wi(),io.current=Zo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){Is=1,_s=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=bs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var m=fu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),hu(m,u,s,0,t),Va(c);break e}}o=c,4!==Is&&(Is=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Os||!Os.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(b){t=b,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Zo,null===e?Zo:e}function ic(){0!==Is&&3!==Is&&2!==Is||(Is=4),null===gs||0===(268435455&Es)&&0===(268435455&Ss)||Xs(gs,bs)}function ac(e,t){var n=ms;ms|=2;var r=rc();for(gs===e&&bs===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Wi(),ms=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,bs=0,Is}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!Ye();)sc(ks)}function sc(e){var t=hs(e.alternate,e,ws);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,ws)))return void(ks=n)}else{if(null!==(n=ju(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return Is=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===Is&&(Is=5)}function lc(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,bs=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zr={focusedElem:e,selectionRange:n},Ku=t;null!==Ku;)if(e=(t=Ku).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ku=e;else for(;null!==Ku;){t=Ku;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Bi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){dc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ku=e;break}Ku=t.return}v=Hu,Hu=!1}(e,r),function(e,t){for(Ku=t;null!==Ku;){var n=(t=Ku).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(_){dc(i,t,_)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Ku=n;else for(;null!==Ku;){t=Ku;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(As=Je())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var y=v.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Ku=n;for(var b=n.child;null!==b;){for(n=Ku=b;null!==Ku;){var w=(r=Ku).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Gu(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var I=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(_){dc(r,I,_)}}break;case 5:Gu(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==w?(w.return=r,Ku=w):ls(n)}b=b.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(_){dc(t,t.return,_)}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}}(e,r),hr(Zr),Zr=null,e.current=r,us(r,e,i),Xe(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Os=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Ws(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Rs)throw Rs=!1,e=Ps,Ps=null,e;0!==(1&Fs)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===Us?Vs++:(Vs=0,Us=e):Vs=0,Ui()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=kt(Fs),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Ku=e.current;null!==Ku;){var o=Ku,u=o.child;if(0!==(16&Ku.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ku=l;null!==Ku;){var f=Ku;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ku=h;else for(;null!==Ku;){var d=(f=Ku).sibling,p=f.return;if(Zu(f),f===l){Ku=null;break}if(null!==d){d.return=p,Ku=d;break}Ku=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ku=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ku=u;else e:for(;null!==Ku;){if(0!==(2048&(o=Ku).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ku=g;break e}Ku=o.return}}var k=e.current;for(Ku=k;null!==Ku;){var b=(u=Ku).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ku=b;else e:for(u=k;null!==Ku;){if(0!==(2048&(s=Ku).flags))try{switch(s.tag){case 0:case 11:case 15:Yu(9,s)}}catch(x){dc(s,s.return,x)}if(s===u){Ku=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ku=w;break e}Ku=s.return}}if(ms=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=qs(),null!==(e=Gs(e,1))&&(yt(e,1,t),Ws(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Os||!Os.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=qs(),null!==(t=Gs(t,1))&&(yt(t,1,e),Ws(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=qs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(bs&n)===n&&(4===Is||3===Is&&(130023424&bs)===bs&&500>Je()-As?tc(e,0):Ts|=n),Ws(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=qs();null!==(e=Gs(e,t))&&(yt(e,t,n),Ws(e,n))}function yc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return He(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new kc(e,t,n,r)}function wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)wc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return _c(n.children,i,o,t);case _:u=8,i|=8;break;case E:return(e=bc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=bc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=bc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Ec(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=bc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function _c(e,t,n,r){return(e=bc(7,e,r,t)).lanes=n,e}function Ec(e,t,n,r){return(e=bc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Sc(e,t,n){return(e=bc(6,e,null,t)).lanes=n,e}function Tc(e,t,n){return(t=bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=bc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},$i(a),e}function Ac(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Dc(e){if(!e)return _i;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Ri(e,n,t)}return t}function Rc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Dc(null),n=e.current,(a=ta(r=qs(),i=zs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Ws(e,r),e}function Pc(e,t,n,r){var i=t.current,a=qs(),o=zs(i);return n=Dc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ks(i,o,a))&&ra(e,i,o),o}function Oc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Tu(t),Fa();break;case 5:Za(t);break;case 1:Ni(t.type)&&Pi(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(qi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Du(e,t,n):(Ii(eo,1&eo.current),null!==(e=Uu(e,t,n))?e.sibling:null);Ii(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,n)}return Uu(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Na&&0!==(1048576&t.flags)&&_a(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ei.current);Yi(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Pi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,$i(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Su(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ea(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=Bi(r,e),i){case 0:t=_u(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=bu(null,t,r,Bi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 3:e:{if(Tu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Ta=t,Na=!0,Aa=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Uu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Za(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,$r(r,i)?u=null:null!==o&&$r(r,o)&&(t.flags|=32),Iu(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Oa(t),null;case 13:return Du(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=za(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(qi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Si.current){t=Uu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yi(t,n),r=r(i=Xi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=Bi(r=t.type,t.pendingProps),bu(e,t,r,i=Bi(r.type,i),n);case 15:return wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Pi(t)):e=!1,Yi(t,n),fa(t,r,i),da(t,r,i,n),Su(null,t,r,!0,e,n);case 19:return Vu(e,t,n);case 22:return xu(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function Vc(e){this._internalRoot=e}function Uc(e){this._internalRoot=e}function jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Bc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qc(){}function zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Oc(o);u.call(e)}}Pc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Oc(o);a.call(e)}}var o=Rc(t,r,e,0,null,!1,0,"",qc);return e._reactRootContainer=o,e[fi]=o.current,jr(8===e.nodeType?e.parentNode:e),$s(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Oc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",qc);return e._reactRootContainer=s,e[fi]=s.current,jr(8===e.nodeType?e.parentNode:e),$s((function(){Pc(t,s,n,r)})),s}(n,t,e,i,r);return Oc(o)}Uc.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Pc(e,t,null,null)},Uc.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$s((function(){Pc(null,e,null,null)})),t[fi]=null}},Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(mt(t,1|n),Ws(t,Je()),0===(6&ms)&&(Ds=Je()+500,Ui()))}break;case 13:var r=qs();$s((function(){return Ks(e,1,r)})),Mc(e,1)}},wt=function(e){13===e.tag&&(Ks(e,134217728,qs()),Mc(e,134217728))},xt=function(e){if(13===e.tag){var t=qs(),n=zs(e);Ks(e,n,t),Mc(e,n)}},It=function(){return gt},_t=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));H(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Zs,Ne=$s;var Kc={usingClientEntryPoint:!1,Events:[yi,mi,gi,Se,Te,Zs]},Gc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Wc={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{it=Hc.inject(Wc),at=Hc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!jc(t))throw Error(a(200));return Ac(e,t,null,n)},t.createRoot=function(e,t){if(!jc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Vc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return $s(e)},t.hydrate=function(e,t,n){if(!Bc(t))throw Error(a(200));return zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Rc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Uc(t)},t.render=function(e,t,n){if(!Bc(t))throw Error(a(200));return zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Bc(e))throw Error(a(40));return!!e._reactRootContainer&&($s((function(){zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Zs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return zc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,I={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:I.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:I};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function I(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},I(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,_=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?I():(_=!1,E=null)}}else _=!1}if("function"===typeof k)I=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,I=function(){R.postMessage(null)}}else I=function(){m(A,0)};function P(e){E=e,_||(_=!0,I())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/";var r={};!function(){"use strict";n.d(r,{_:function(){return GE}});var e={};n.r(e),n.d(e,{FirebaseError:function(){return H},SDK_VERSION:function(){return ze},_DEFAULT_ENTRY_NAME:function(){return Ae},_addComponent:function(){return Oe},_addOrOverwriteComponent:function(){return Le},_apps:function(){return Re},_clearComponents:function(){return Ue},_components:function(){return Pe},_getProvider:function(){return Fe},_registerComponent:function(){return Me},_removeServiceInstance:function(){return Ve},deleteApp:function(){return He},getApp:function(){return Ge},getApps:function(){return We},initializeApp:function(){return Ke},onLog:function(){return Xe},registerVersion:function(){return Ye},setLogLevel:function(){return Je}});var t=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function h(){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},h.apply(this,arguments)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){if(t&&("object"===m(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function k(e){var t=y();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function w(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,u,"next",e)}function u(e){w(a,r,i,o,u,"throw",e)}o(void 0)}))}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T(e){return function(e){if(Array.isArray(e))return o(e)}(e)||S(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=n(757),A=n.n(N);function D(e,t,n){return D=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&p(i,n.prototype),i},D.apply(null,arguments)}function R(e){var t="function"===typeof Map?new Map:void 0;return R=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return D(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},R(e)}var P=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},L=function(e){return function(e){var t=P(e);return O.encodeByteArray(t,!0)}(e).replace(/\./g,"")},M=function(e){try{return O.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function F(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=F(e[n],t[n]));return e}var V=function(){function e(){var t=this;I(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return E(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function U(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(a)),""].join(".")}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function B(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(j())}function q(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function z(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function K(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function G(){var e=j();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function W(){return"object"===typeof indexedDB}var H=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(d(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(d(a),Q.prototype.create),a}return E(n)}(R(Error)),Q=function(){function e(t,n,r){I(this,e),this.service=t,this.serviceName=n,this.errors=r}return E(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Y(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new H(n,a,t);return o}}]),e}();function Y(e,t){return e.replace(X,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var X=/\{\$([^}]+)}/g;function J(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Z(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if($(u)&&$(s)){if(!Z(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function $(e){return null!==e&&"object"===typeof e}function ee(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function te(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ne(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function re(e,t){var n=new ie(e,t);return n.subscribe.bind(n)}var ie=function(){function e(t,n){var r=this;I(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return E(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ae),void 0===r.error&&(r.error=ae),void 0===r.complete&&(r.complete=ae);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ae(){}function oe(e){return e&&e._delegate?e._delegate:e}function ue(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var se=function(){function e(t){I(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return E(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new ce(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new le(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),ce=function(){function e(t){var n=this;I(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return E(e,[{key:"objectStore",value:function(e){return new le(this._transaction.objectStore(e))}}]),e}(),le=function(){function e(t){I(this,e),this._store=t}return E(e,[{key:"index",value:function(e){return new fe(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new fe(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return ue(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return ue(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return ue(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return ue(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),fe=function(){function e(t){I(this,e),this._index=t}return E(e,[{key:"get",value:function(e){return ue(this._index.get(e),"Error reading from IndexedDB")}}]),e}();var he=function(){function e(t,n,r){I(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return E(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),de="[DEFAULT]",pe=function(){function e(t,n){I(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return E(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new V;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:de})}catch(s){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=x(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(T(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),T(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Kb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===de?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Kb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de;return this.component?this.component.multipleInstances?e:de:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ve,ye,me=function(){function e(t){I(this,e),this.name=t,this.providers=new Map}return E(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new pe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ge=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ye||(ye={}));var ke,be,we={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},xe=ye.INFO,Ie=(C(ve={},ye.DEBUG,"log"),C(ve,ye.VERBOSE,"log"),C(ve,ye.INFO,"info"),C(ve,ye.WARN,"warn"),C(ve,ye.ERROR,"error"),ve),_e=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ie[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ee=function(){function e(t){I(this,e),this.name=t,this._logLevel=xe,this._logHandler=_e,this._userLogHandler=null,ge.push(this)}return E(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ye))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?we[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.DEBUG].concat(t)),this._logHandler.apply(this,[this,ye.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ye.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.INFO].concat(t)),this._logHandler.apply(this,[this,ye.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.WARN].concat(t)),this._logHandler.apply(this,[this,ye.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ye.ERROR].concat(t)),this._logHandler.apply(this,[this,ye.ERROR].concat(t))}}]),e}();var Se=function(){function e(t){I(this,e),this.container=t}return E(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Te="@firebase/app",Ce="0.7.21",Ne=new Ee("@firebase/app"),Ae="[DEFAULT]",De=(C(ke={},Te,"fire-core"),C(ke,"@firebase/app-compat","fire-core-compat"),C(ke,"@firebase/analytics","fire-analytics"),C(ke,"@firebase/analytics-compat","fire-analytics-compat"),C(ke,"@firebase/app-check","fire-app-check"),C(ke,"@firebase/app-check-compat","fire-app-check-compat"),C(ke,"@firebase/auth","fire-auth"),C(ke,"@firebase/auth-compat","fire-auth-compat"),C(ke,"@firebase/database","fire-rtdb"),C(ke,"@firebase/database-compat","fire-rtdb-compat"),C(ke,"@firebase/functions","fire-fn"),C(ke,"@firebase/functions-compat","fire-fn-compat"),C(ke,"@firebase/installations","fire-iid"),C(ke,"@firebase/installations-compat","fire-iid-compat"),C(ke,"@firebase/messaging","fire-fcm"),C(ke,"@firebase/messaging-compat","fire-fcm-compat"),C(ke,"@firebase/performance","fire-perf"),C(ke,"@firebase/performance-compat","fire-perf-compat"),C(ke,"@firebase/remote-config","fire-rc"),C(ke,"@firebase/remote-config-compat","fire-rc-compat"),C(ke,"@firebase/storage","fire-gcs"),C(ke,"@firebase/storage-compat","fire-gcs-compat"),C(ke,"@firebase/firestore","fire-fst"),C(ke,"@firebase/firestore-compat","fire-fst-compat"),C(ke,"fire-js","fire-js"),C(ke,"firebase","fire-js-all"),ke),Re=new Map,Pe=new Map;function Oe(e,t){try{e.container.addComponent(t)}catch(n){Ne.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Le(e,t){e.container.addOrOverwriteComponent(t)}function Me(e){var t=e.name;if(Pe.has(t))return Ne.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pe.set(t,e);var n,r=b(Re.values());try{for(r.s();!(n=r.n()).done;){Oe(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Fe(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ae;Fe(e,t).clearInstance(n)}function Ue(){Pe.clear()}var je=(C(be={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),C(be,"bad-app-name","Illegal App name: '{$appName}"),C(be,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),C(be,"app-deleted","Firebase App named '{$appName}' already deleted"),C(be,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),C(be,"invalid-log-argument","First argument to `onLog` must be null or a function."),C(be,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),C(be,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),C(be,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),C(be,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),be),Be=new Q("app","Firebase",je),qe=function(){function e(t,n,r){var i=this;I(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new he("app",(function(){return i}),"PUBLIC"))}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}]),e}(),ze="9.6.11";function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Be.create("bad-app-name",{appName:String(i)});var a=Re.get(i);if(a){if(Z(e,a.options)&&Z(r,a.config))return a;throw Be.create("duplicate-app",{appName:i})}var o,u=new me(i),s=b(Pe.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new qe(e,r,u);return Re.set(i,l),l}function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=Re.get(e);if(!t)throw Be.create("no-app",{appName:e});return t}function We(){return Array.from(Re.values())}function He(e){return Qe.apply(this,arguments)}function Qe(){return Qe=x(N.mark((function e(t){var n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Re.has(n)){e.next=6;break}return Re.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function Ye(e,t,n){var r,i=null!==(r=De[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ne.warn(u.join(" "))}Me(new he("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Xe(e,t){if(null!==e&&"function"!==typeof e)throw Be.create("invalid-log-argument");!function(e,t){var n,r=b(ge);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=we[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ye[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Je(e){var t;t=e,ge.forEach((function(e){e.setLogLevel(t)}))}var Ze="firebase-heartbeat-store",$e=null;function et(){var e,t,n;return $e||($e=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Ze)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new se(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new se(a.result),e.oldVersion,e.newVersion,new ce(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Be.create("storage-open",{originalErrorMessage:e.message})}))),$e}function tt(e){return nt.apply(this,arguments)}function nt(){return nt=x(N.mark((function e(t){var n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ze).objectStore(Ze).get(at(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Be.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),nt.apply(this,arguments)}function rt(e,t){return it.apply(this,arguments)}function it(){return it=x(N.mark((function e(t,n){var r,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,et();case 3:return r=e.sent,i=r.transaction(Ze,"readwrite"),a=i.objectStore(Ze),e.next=8,a.put(n,at(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Be.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),it.apply(this,arguments)}function at(e){return"".concat(e.name,"!").concat(e.options.appId)}var ot=function(){function e(t){var n=this;I(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new lt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return E(e,[{key:"triggerHeartbeat",value:function(){var e=x(N.mark((function e(){var t,n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ut(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=x(N.mark((function e(){var t,n,r,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ut(),n=st(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=L(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ut(){return(new Date).toISOString().substring(0,10)}function st(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ft(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ft(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ct,lt=function(){function e(t){I(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return E(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=x(N.mark((function e(){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=x(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,tt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=x(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",rt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=x(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",rt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(T(r.heartbeats),T(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ft(e){return L(JSON.stringify({version:2,heartbeats:e})).length}ct="",Me(new he("platform-logger",(function(e){return new Se(e)}),"PRIVATE")),Me(new he("heartbeat",(function(e){return new ot(e)}),"PRIVATE")),Ye(Te,Ce,ct),Ye(Te,Ce,"esm2017"),Ye("fire-js","");function ht(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var dt;Object.create;var pt="facebook.com",vt="github.com",yt="google.com",mt="password",gt="twitter.com",kt="EMAIL_SIGNIN",bt="PASSWORD_RESET",wt="RECOVER_EMAIL",xt="REVERT_SECOND_FACTOR_ADDITION",It="VERIFY_AND_CHANGE_EMAIL",_t="VERIFY_EMAIL";function Et(){return C({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var St=function(){var e;return C(e={},"admin-restricted-operation","This operation is restricted to administrators only."),C(e,"argument-error",""),C(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),C(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),C(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),C(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),C(e,"cordova-not-ready","Cordova framework is not ready."),C(e,"cors-unsupported","This browser is not supported."),C(e,"credential-already-in-use","This credential is already associated with a different user account."),C(e,"custom-token-mismatch","The custom token corresponds to a different audience."),C(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),C(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),C(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),C(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),C(e,"email-already-in-use","The email address is already in use by another account."),C(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),C(e,"expired-action-code","The action code has expired."),C(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),C(e,"internal-error","An internal AuthError has occurred."),C(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),C(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),C(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),C(e,"invalid-auth-event","An internal AuthError has occurred."),C(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),C(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),C(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),C(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),C(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),C(e,"invalid-email","The email address is badly formatted."),C(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),C(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),C(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),C(e,"invalid-credential","The supplied auth credential is malformed or has expired."),C(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),C(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),C(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),C(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),C(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),C(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),C(e,"wrong-password","The password is invalid or the user does not have a password."),C(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),C(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),C(e,"invalid-provider-id","The specified provider ID is invalid."),C(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),C(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),C(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),C(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),C(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),C(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),C(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),C(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),C(e,"missing-continue-uri","A continue URL must be provided in the request."),C(e,"missing-iframe-start","An internal AuthError has occurred."),C(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),C(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),C(e,"missing-multi-factor-info","No second factor identifier is provided."),C(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),C(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),C(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),C(e,"app-deleted","This instance of FirebaseApp has been deleted."),C(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),C(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),C(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),C(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),C(e,"no-auth-event","An internal AuthError has occurred."),C(e,"no-such-provider","User was not linked to an account with the given provider."),C(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),C(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),C(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),C(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),C(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),C(e,"provider-already-linked","User can only be linked to one identity for the given provider."),C(e,"quota-exceeded","The project's quota for this operation has been exceeded."),C(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),C(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),C(e,"rejected-credential","The request contains malformed or mismatching credentials."),C(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),C(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),C(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),C(e,"timeout","The operation has timed out."),C(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),C(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),C(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),C(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),C(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),C(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),C(e,"unverified-email","The operation requires a verified email."),C(e,"user-cancelled","The user did not grant your application the permissions it requested."),C(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),C(e,"user-disabled","The user account has been disabled by an administrator."),C(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),C(e,"user-signed-out",""),C(e,"weak-password","The password must be 6 characters long or more."),C(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),C(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Tt=Et,Ct=new Q("auth","Firebase",Et()),Nt=new Ee("@firebase/auth");function At(e){if(Nt.logLevel<=ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nt.error.apply(Nt,["Auth (".concat(ze,"): ").concat(e)].concat(n))}}function Dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Lt.apply(void 0,[e].concat(n))}function Rt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Lt.apply(void 0,[e].concat(n))}function Pt(e,t,n){var r=Object.assign(Object.assign({},Tt()),C({},t,n));return new Q("auth","Firebase",r).create(t,{appName:e.name})}function Ot(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Dt(e,"argument-error"),Pt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=T(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(T(o)))}return Ct.create.apply(Ct,[e].concat(n))}function Mt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Lt.apply(void 0,[t].concat(r))}}function Ft(e){var t="INTERNAL ASSERTION FAILED: "+e;throw At(t),new Error(t)}function Vt(e,t){e||Ft(t)}var Ut=new Map;function jt(e){Vt(e instanceof Function,"Expected a class definition");var t=Ut.get(e);return t?(Vt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ut.set(e,t),t)}function Bt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qt(){return"http:"===zt()||"https:"===zt()}function zt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Kt=function(){function e(t,n){I(this,e),this.shortDelay=t,this.longDelay=n,Vt(n>t,"Short delay should be less than long delay!"),this.isMobile=B()||K()}return E(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qt()||z()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Gt(e,t){Vt(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Wt=function(){function e(){I(this,e)}return E(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ht=(C(dt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),C(dt,"MISSING_CUSTOM_TOKEN","internal-error"),C(dt,"INVALID_IDENTIFIER","invalid-email"),C(dt,"MISSING_CONTINUE_URI","internal-error"),C(dt,"INVALID_PASSWORD","wrong-password"),C(dt,"MISSING_PASSWORD","internal-error"),C(dt,"EMAIL_EXISTS","email-already-in-use"),C(dt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),C(dt,"INVALID_IDP_RESPONSE","invalid-credential"),C(dt,"INVALID_PENDING_TOKEN","invalid-credential"),C(dt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),C(dt,"MISSING_REQ_TYPE","internal-error"),C(dt,"EMAIL_NOT_FOUND","user-not-found"),C(dt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),C(dt,"EXPIRED_OOB_CODE","expired-action-code"),C(dt,"INVALID_OOB_CODE","invalid-action-code"),C(dt,"MISSING_OOB_CODE","internal-error"),C(dt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),C(dt,"INVALID_ID_TOKEN","invalid-user-token"),C(dt,"TOKEN_EXPIRED","user-token-expired"),C(dt,"USER_NOT_FOUND","user-token-expired"),C(dt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),C(dt,"INVALID_CODE","invalid-verification-code"),C(dt,"INVALID_SESSION_INFO","invalid-verification-id"),C(dt,"INVALID_TEMPORARY_PROOF","invalid-credential"),C(dt,"MISSING_SESSION_INFO","missing-verification-id"),C(dt,"SESSION_EXPIRED","code-expired"),C(dt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),C(dt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),C(dt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),C(dt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),C(dt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),C(dt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),C(dt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),C(dt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),C(dt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),C(dt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),C(dt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),dt),Qt=new Kt(3e4,6e4);function Yt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Xt(e,t,n,r){return Jt.apply(this,arguments)}function Jt(){return Jt=x(A().mark((function e(t,n,r,i){var a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Zt(t,a,x(A().mark((function e(){var a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ee(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Wt.fetch()(nn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Jt.apply(this,arguments)}function Zt(e,t,n){return $t.apply(this,arguments)}function $t(){return $t=x(A().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ht),n),e.prev=2,a=new rn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw an(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw an(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw an(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Pt(t,p,d);case 30:Dt(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof H)){e.next=37;break}throw e.t0;case 37:Dt(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),$t.apply(this,arguments)}function en(e,t,n,r){return tn.apply(this,arguments)}function tn(){return tn=x(A().mark((function e(t,n,r,i){var a,o,u=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Xt(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Dt(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}function nn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Gt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var rn=function(){function e(t){var n=this;I(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Rt(n.auth,"network-request-failed"))}),Qt.get())}))}return E(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function an(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Rt(e,t,r);return i.customData._tokenResponse=n,i}function on(e,t){return un.apply(this,arguments)}function un(){return un=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),un.apply(this,arguments)}function sn(e,t){return cn.apply(this,arguments)}function cn(){return cn=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),cn.apply(this,arguments)}function ln(e,t){return fn.apply(this,arguments)}function fn(){return fn=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),fn.apply(this,arguments)}function hn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function dn(){return dn=x(A().mark((function e(t){var n,r,i,a,o,u,s=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=oe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Mt((a=vn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:hn(pn(a.auth_time)),issuedAtTime:hn(pn(a.iat)),expirationTime:hn(pn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),dn.apply(this,arguments)}function pn(e){return 1e3*Number(e)}function vn(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return At("JWT malformed, contained fewer than 3 sections"),null;try{var a=M(r);return a?JSON.parse(a):(At("Failed to decode base64 JWT payload"),null)}catch(o){return At("Caught error parsing JWT payload as JSON",o),null}}function yn(e,t){return mn.apply(this,arguments)}function mn(){return mn=x(A().mark((function e(t,n){var r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof H&&gn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),mn.apply(this,arguments)}function gn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var kn=function(){function e(t){I(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return E(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),bn=function(){function e(t,n){I(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return E(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function wn(e){return xn.apply(this,arguments)}function xn(){return xn=x(A().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,yn(t,ln(r,{idToken:i}));case 6:Mt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?En(o.providerUserInfo):[],s=_n(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new bn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function In(){return(In=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),e.next=3,wn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(T(n),T(t))}function En(e){return e.map((function(e){var t=e.providerId,n=ht(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Sn(e,t){return Tn.apply(this,arguments)}function Tn(){return Tn=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt(t,{},x(A().mark((function e(){var r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=nn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Wt.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}var Cn=function(){function e(){I(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return E(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Mt(e.idToken,"internal-error"),Mt("undefined"!==typeof e.idToken,"internal-error"),Mt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=vn(e);return Mt(t,"internal-error"),Mt("undefined"!==typeof t.exp,"internal-error"),Mt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=x(A().mark((function e(t){var n,r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Mt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Ft("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Mt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Mt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Mt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Nn(e,t){Mt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var An=function(){function e(t){I(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=ht(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?T(a.providerData):[],this.metadata=new bn(a.createdAt||void 0,a.lastLoginAt||void 0)}return E(e,[{key:"getIdToken",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Mt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return dn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return In.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=x(A().mark((function e(t){var n,r,i=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,wn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,yn(this,on(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;Mt(k&&I,t,"internal-error");var _=Cn.fromJSON(this.name,I);Mt("string"===typeof k,t,"internal-error"),Nn(f,t.name),Nn(h,t.name),Mt("boolean"===typeof b,t,"internal-error"),Mt("boolean"===typeof w,t,"internal-error"),Nn(d,t.name),Nn(p,t.name),Nn(v,t.name),Nn(y,t.name),Nn(m,t.name),Nn(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=x(A().mark((function t(n,r){var i,a,o,u=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Cn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,wn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Dn=function(){function e(){I(this,e),this.type="NONE",this.storage={}}return E(e,[{key:"_isAvailable",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Dn.type="NONE";var Rn=Dn;function Pn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var On=function(){function e(t,n,r){I(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Pn(this.userKey,a.apiKey,o),this.fullPersistenceKey=Pn("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return E(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?An._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=x(A().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(jt(Rn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||jt(Rn),u=Pn(i,n.config.apiKey,n.name),s=null,c=b(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=An._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ln(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Un(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bn(t))return"Blackberry";if(qn(t))return"Webos";if(Fn(t))return"Safari";if((t.includes("chrome/")||Vn(t))&&!t.includes("edge/"))return"Chrome";if(jn(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/firefox\//i.test(e)}function Fn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/crios\//i.test(e)}function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iemobile/i.test(e)}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/android/i.test(e)}function Bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/blackberry/i.test(e)}function qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/webos/i.test(e)}function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iphone|ipad|ipod/i.test(e)}function Kn(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return zn(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Gn(){return G()&&10===document.documentMode}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return zn(e)||jn(e)||qn(e)||Bn(e)||/windows phone/i.test(e)||Un(e)}function Hn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ln(j());break;case"Worker":t="".concat(Ln(j()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ze,"/").concat(r)}var Qn=function(){function e(t,n,r){I(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xn(this),this.idTokenSubscription=new Xn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return E(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=jt(t)),this._initializationPromise=this.queue(x(A().mark((function r(){var i,a;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,On.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=x(A().mark((function e(t){var n,r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Mt(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?oe(t):null)&&Mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(jt(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Q("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Mt(n=t&&jt(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,On.create(this,[jt(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Mt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hn(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=x(A().mark((function e(){var t,n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yn(e){return oe(e)}var Xn=function(){function e(t){var n=this;I(this,e),this.auth=t,this.observer=null,this.addObserver=re((function(e){return n.observer=e}))}return E(e,[{key:"next",get:function(){return Mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Jn(e,t,n){var r=Yn(e);Mt(r._canInitEmulator,r,"emulator-config-failed"),Mt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Zn(t),o=function(e){var t=Zn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:$n(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:$n(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Zn(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $n(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var er=function(){function e(t,n){I(this,e),this.providerId=t,this.signInMethod=n}return E(e,[{key:"toJSON",value:function(){return Ft("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Ft("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Ft("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Ft("not implemented")}}]),e}();function tr(e,t){return nr.apply(this,arguments)}function nr(){return nr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:resetPassword",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),nr.apply(this,arguments)}function rr(e,t){return ir.apply(this,arguments)}function ir(){return ir=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ir.apply(this,arguments)}function ar(e,t){return or.apply(this,arguments)}function or(){return or=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:update",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function ur(e,t){return sr.apply(this,arguments)}function sr(){return sr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signInWithPassword",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function cr(e,t){return lr.apply(this,arguments)}function lr(){return lr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:sendOobCode",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t){return hr.apply(this,arguments)}function hr(){return hr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n));case 1:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function dr(e,t){return pr.apply(this,arguments)}function pr(){return pr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n));case 1:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t){return yr.apply(this,arguments)}function yr(){return yr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n));case 1:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function mr(e,t){return gr.apply(this,arguments)}function gr(){return gr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,n));case 1:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function kr(e,t){return br.apply(this,arguments)}function br(){return br=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signInWithEmailLink",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function wr(e,t){return xr.apply(this,arguments)}function xr(){return xr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signInWithEmailLink",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}var Ir=function(e){v(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return E(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ur(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",kr(t,{email:this._email,oobCode:this._password}));case 5:Dt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",rr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Dt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(er);function _r(e,t){return Er.apply(this,arguments)}function Er(){return Er=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signInWithIdp",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}var Sr=function(e){v(n,e);var t=k(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return E(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _r(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_r(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_r(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ee(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=ht(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(er);function Tr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:sendVerificationCode",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Nr(){return Nr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signInWithPhoneNumber",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function Ar(){return Ar=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(t,"POST","/v1/accounts:signInWithPhoneNumber",Yt(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw an(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}var Dr=C({},"USER_NOT_FOUND","user-not-found");function Rr(){return Rr=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",en(t,"POST","/v1/accounts:signInWithPhoneNumber",Yt(t,r),Dr));case 2:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}var Pr=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone","phone")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Nr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ar.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Rr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(er);var Or=function(){function e(t){var n,r,i,a,o,u;I(this,e);var s=te(ne(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Mt(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return E(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=te(ne(e)).link,n=t?te(ne(t)).deep_link_id:null,r=te(ne(e)).deep_link_id;return(r?te(ne(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Kb){return null}}}]),e}();var Lr=function(){function e(){I(this,e),this.providerId=e.PROVIDER_ID}return E(e,null,[{key:"credential",value:function(e,t){return Ir._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Or.parseLink(t);return Mt(n,"argument-error"),Ir._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Lr.PROVIDER_ID="password",Lr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Lr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Mr=function(){function e(t){I(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return E(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Fr=function(e){v(n,e);var t=k(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).scopes=[],e}return E(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return T(this.scopes)}}]),n}(Mr),Vr=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Mt(e.idToken||e.accessToken,"argument-error"),Sr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Mt("providerId"in t&&"signInMethod"in t,"argument-error"),Sr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Fr),Ur=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.call(this,"facebook.com")}return E(n,null,[{key:"credential",value:function(e){return Sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Kb){return null}}}]),n}(Fr);Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ur.PROVIDER_ID="facebook.com";var jr=function(e){v(n,e);var t=k(n);function n(){var e;return I(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return E(n,null,[{key:"credential",value:function(e,t){return Sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Kb){return null}}}]),n}(Fr);jr.GOOGLE_SIGN_IN_METHOD="google.com",jr.PROVIDER_ID="google.com";var Br=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.call(this,"github.com")}return E(n,null,[{key:"credential",value:function(e){return Sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Kb){return null}}}]),n}(Fr);Br.GITHUB_SIGN_IN_METHOD="github.com",Br.PROVIDER_ID="github.com";var qr=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return E(n,[{key:"_getIdTokenResponse",value:function(e){return _r(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_r(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_r(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(er),zr=function(e){v(n,e);var t=k(n);function n(e){return I(this,n),Mt(e.startsWith("saml."),"argument-error"),t.call(this,e)}return E(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=qr.fromJSON(e);return Mt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return qr._create(r,n)}catch(i){return null}}}]),n}(Mr),Kr=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.call(this,"twitter.com")}return E(n,null,[{key:"credential",value:function(e,t){return Sr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Kb){return null}}}]),n}(Fr);function Gr(e,t){return Wr.apply(this,arguments)}function Wr(){return Wr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signUp",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}Kr.TWITTER_SIGN_IN_METHOD="twitter.com",Kr.PROVIDER_ID="twitter.com";var Hr=function(){function e(t){I(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return E(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=x(A().mark((function t(n,r,i){var a,o,u,s,c=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,An._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Qr(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=x(A().mark((function t(n,r,i){var a;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Qr(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Qr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Yr(){return Yr=x(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Hr({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Gr(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Hr._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}var Xr=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o,u;return I(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(d(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return E(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(H);function Jr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Xr._fromErrorAndOperation(e,n,t,r);throw n}))}function Zr(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function $r(e,t){return ei.apply(this,arguments)}function ei(){return ei=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,ri(!0,r,n);case 3:return e.t0=sn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Zr(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ei.apply(this,arguments)}function ti(e,t){return ni.apply(this,arguments)}function ni(){return ni=x(A().mark((function e(t,n){var r,i,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=yn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Hr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t,n){return ii.apply(this,arguments)}function ii(){return(ii=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(n);case 2:i=Zr(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Mt(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ai(e,t){return oi.apply(this,arguments)}function oi(){return oi=x(A().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,yn(t,Jr(i,a,n,t),r);case 6:return Mt((o=e.sent).idToken,i,"internal-error"),Mt(u=vn(o.idToken),i,"internal-error"),s=u.sub,Mt(t.uid===s,i,"user-mismatch"),e.abrupt("return",Hr._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Dt(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),oi.apply(this,arguments)}function ui(e,t){return si.apply(this,arguments)}function si(){return si=x(A().mark((function e(t,n){var r,i,a,o,u=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Jr(t,i,n);case 4:return a=e.sent,e.next=7,Hr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}function ci(e,t){return li.apply(this,arguments)}function li(){return li=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ui(Yn(t),n));case 1:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function fi(e,t){return hi.apply(this,arguments)}function hi(){return(hi=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,ri(!1,r,n.providerId);case 3:return e.abrupt("return",ti(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return(pi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai(oe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vi(e,t){return yi.apply(this,arguments)}function yi(){return yi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",en(t,"POST","/v1/accounts:signInWithCustomToken",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function mi(){return mi=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yn(t),e.next=3,vi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Hr._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),mi.apply(this,arguments)}var gi=function(){function e(t,n){I(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return E(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?ki._fromServerResponse(e,t):Dt(e,"internal-error")}}]),e}(),ki=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return E(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(gi);function bi(e,t,n){var r;Mt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Mt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Mt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Mt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function wi(){return wi=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),a={requestType:"PASSWORD_RESET",email:n},r&&bi(i,a,r),e.next=5,dr(i,a);case 5:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function xi(){return xi=x(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(oe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function Ii(){return Ii=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(oe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function _i(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,tr(r,{oobCode:n});case 3:i=e.sent,Mt(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Mt(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Mt(i.mfaInfo,r,"internal-error");case 13:Mt(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=gi._fromServerResponse(Yn(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Si(){return Si=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(oe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ti(e,t,n){return Ci.apply(this,arguments)}function Ci(){return Ci=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,Gr(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Hr._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(){return Ni=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),a={requestType:"EMAIL_SIGNIN",email:n},Mt(r.handleCodeInApp,i,"argument-error"),r&&bi(i,a,r),e.next=6,vr(i,a);case 6:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ai(){return Ai=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),Mt((a=Lr.credentialWithLink(n,r||Bt()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ci(i,a));case 4:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Di(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:createAuthUri",Yt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Pi(){return Pi=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qt()?Bt():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Di(oe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Oi(){return(Oi=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=oe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&bi(r.auth,a,n),e.next=8,fr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(){return(Li=x(A().mark((function e(t,n,r){var i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&bi(i.auth,o,r),e.next=8,mr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mi(e,t){return Fi.apply(this,arguments)}function Fi(){return Fi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Vi(){return(Vi=x(A().mark((function e(t,n){var r,i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=oe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,yn(a,Mi(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ui(e,t,n){return ji.apply(this,arguments)}function ji(){return ji=x(A().mark((function e(t,n,r){var i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,yn(t,rr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}var Bi=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};I(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),qi=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return I(this,n),(o=t.call(this,e,r,i)).username=a,o}return E(n)}(Bi),zi=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"facebook.com",r)}return E(n)}(Bi),Ki=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return E(n)}(qi),Gi=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"google.com",r)}return E(n)}(Bi),Wi=function(e){v(n,e);var t=k(n);function n(e,r,i){return I(this,n),t.call(this,e,"twitter.com",r,i)}return E(n)}(qi);function Hi(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=vn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Bi(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new zi(a,i);case"github.com":return new Ki(a,i);case"google.com":return new Gi(a,i);case"twitter.com":return new Wi(a,i,e.screenName||null);case"custom":case"anonymous":return new Bi(a,null);default:return new Bi(a,r,i)}}(n)}var Qi=function(){function e(t,n){I(this,e),this.type=t,this.credential=n}return E(e,[{key:"toJSON",value:function(){return{multiFactorSession:C({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Yi=function(){function e(t,n,r){I(this,e),this.session=t,this.hints=n,this.signInResolver=r}return E(e,[{key:"resolveSignIn",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Yn(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return gi._fromServerResponse(r,e)}));Mt(i.mfaPendingCredential,r,"internal-error");var o=Qi._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=x(A().mark((function e(t){var a,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Hr._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Mt(n.user,r,"internal-error"),e.abrupt("return",Hr._forOperation(n.user,n.operationType,u));case 17:Dt(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Xi(e,t){return Xt(e,"POST","/v2/accounts/mfaEnrollment:start",Yt(e,t))}function Ji(e,t){return Xt(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(e,t))}var Zi=function(){function e(t){var n=this;I(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return gi._fromServerResponse(t.auth,e)})))}))}return E(e,[{key:"getSession",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Qi,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,yn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,yn(this.user,Ji(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),$i=new WeakMap;var ea="__sak",ta=function(){function e(t,n){I(this,e),this.storageRetriever=t,this.type=n}return E(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ea,"1"),this.storage.removeItem(ea),Promise.resolve(!0)):Promise.resolve(!1)}catch(Kb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var na=function(e){v(n,e);var t=k(n);function n(){var e;return I(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=j();return Fn(e)||zn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Wn(),e._shouldAllowMigration=!0,e}return E(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Gn()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=x(A().mark((function e(t,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(l(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=x(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(l(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(l(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ta);na.type="LOCAL";var ra=na,ia=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return E(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ta);ia.type="SESSION";var aa=ia;function oa(e){return Promise.all(e.map(function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ua=function(){function e(t){I(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return E(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=x(A().mark((function e(t){var n,r,i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,oa(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function sa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ua.receivers=[];var ca=function(){function e(t){I(this,e),this.target=t,this.handlers=new Set}return E(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=x(A().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=sa("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function la(){return window}function fa(){return"undefined"!==typeof la().WorkerGlobalScope&&"function"===typeof la().importScripts}function ha(){return da.apply(this,arguments)}function da(){return(da=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function pa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var va="firebaseLocalStorageDb",ya="firebaseLocalStorage",ma="fbase_key",ga=function(){function e(t){I(this,e),this.request=t}return E(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ka(e,t){return e.transaction([ya],t?"readwrite":"readonly").objectStore(ya)}function ba(){var e=indexedDB.deleteDatabase(va);return new ga(e).toPromise()}function wa(){var e=indexedDB.open(va,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ya,{keyPath:ma})}catch(r){n(r)}})),e.addEventListener("success",x(A().mark((function n(){var r;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ya)){n.next=12;break}return r.close(),n.next=5,ba();case 5:return n.t0=t,n.next=8,wa();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function xa(e,t,n){return Ia.apply(this,arguments)}function Ia(){return Ia=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ka(t,!0).put((C(i={},ma,n),C(i,"value",r),i)),e.abrupt("return",new ga(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}function _a(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ka(t,!1).get(n),e.next=3,new ga(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Sa(e,t){var n=ka(e,!0).delete(t);return new ga(n).toPromise()}var Ta=function(){function e(){I(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return E(e,[{key:"_openDb",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,wa();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=x(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ua._getInstance(fa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=x(A().mark((function e(n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=x(A().mark((function e(){var t,n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ha();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ca(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&pa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,wa();case 5:return t=e.sent,e.next=8,xa(t,ea,"1");case 8:return e.next=10,Sa(t,ea);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=x(A().mark((function e(t,n){var r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return xa(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return _a(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Sa(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ka(e,!1).getAll();return new ga(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=b(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ta.type="LOCAL";var Ca=Ta;function Na(e,t){return Xt(e,"POST","/v2/accounts/mfaSignIn:start",Yt(e,t))}function Aa(e){return Da.apply(this,arguments)}function Da(){return Da=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Ra(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Rt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Pa(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Oa=1e12,La=function(){function e(t){I(this,e),this.auth=t,this.counter=Oa,this._widgets=new Map}return E(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ma(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Oa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Oa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Oa,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ma=function(){function e(t,n,r){var i=this;I(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Mt(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return E(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Fa=Pa("rcb"),Va=new Kt(3e4,6e4),Ua="https://www.google.com/recaptcha/api.js?",ja=function(){function e(){I(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!la().grecaptcha}return E(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Mt(Ba(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(la().grecaptcha):new Promise((function(r,i){var a=la().setTimeout((function(){i(Rt(e,"network-request-failed"))}),Va.get());la()[Fa]=function(){la().clearTimeout(a),delete la()[Fa];var o=la().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Rt(e,"internal-error"))},Ra("".concat(Ua,"?").concat(ee({onload:Fa,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Rt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!la().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ba(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var qa=function(){function e(){I(this,e)}return E(e,[{key:"load",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new La(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),za="recaptcha",Ka={theme:"light",type:"image"},Ga=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ka),r=arguments.length>2?arguments[2]:void 0;I(this,e),this.parameters=n,this.type=za,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yn(r),this.isInvisible="invisible"===this.parameters.size,Mt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Mt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qa:new ja,this.validateStartingState()}return E(e,[{key:"verify",value:function(){var e=x(A().mark((function e(){var t,n,r,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Mt(!this.parameters.sitekey,this.auth,"argument-error"),Mt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Mt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=la()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Mt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=x(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mt(qt()&&!fa(),this.auth,"internal-error"),e.next=3,Wa();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Aa(this.auth);case 8:Mt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Mt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Wa(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ha=function(){function e(t,n){I(this,e),this.verificationId=t,this.onConfirmation=n}return E(e,[{key:"confirm",value:function(e){var t=Pr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Qa(){return Qa=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),e.next=3,Za(i,n,oe(r));case 3:return a=e.sent,e.abrupt("return",new Ha(a,(function(e){return ci(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Ya(e,t,n){return Xa.apply(this,arguments)}function Xa(){return(Xa=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),e.next=3,ri(!1,i,"phone");case 3:return e.next=5,Za(i.auth,n,oe(r));case 5:return a=e.sent,e.abrupt("return",new Ha(a,(function(e){return fi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(){return(Ja=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(t),e.next=3,Za(i.auth,n,oe(r));case 3:return a=e.sent,e.abrupt("return",new Ha(a,(function(e){return di(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(e,t,n){return $a.apply(this,arguments)}function $a(){return $a=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Mt("string"===typeof a,t,"argument-error"),Mt(r.type===za,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Mt("enroll"===u.type,t,"internal-error"),e.next=13,Xi(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Mt("signin"===u.type,t,"internal-error"),Mt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Na(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Tr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),$a.apply(this,arguments)}function eo(){return(eo=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ti(oe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var to=function(){function e(t){I(this,e),this.providerId=e.PROVIDER_ID,this.auth=Yn(t)}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return Za(this.auth,e,oe(t))}}],[{key:"credential",value:function(e,t){return Pr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Pr._fromTokenResponse(n,r):null}}]),e}();function no(e,t){return t?jt(t):(Mt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}to.PROVIDER_ID="phone",to.PHONE_SIGN_IN_METHOD="phone";var ro=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this,"custom","custom")).params=e,r}return E(n,[{key:"_getIdTokenResponse",value:function(e){return _r(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _r(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _r(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(er);function io(e){return ui(e.auth,new ro(e),e.bypassAuthState)}function ao(e){var t=e.auth,n=e.user;return Mt(n,t,"internal-error"),ai(n,new ro(e),e.bypassAuthState)}function oo(e){return uo.apply(this,arguments)}function uo(){return uo=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Mt(r=t.user,n,"internal-error"),e.abrupt("return",ti(r,new ro(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}var so=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];I(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return E(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=x(A().mark((function t(n,r){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=x(A().mark((function e(t){var n,r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return io;case"linkViaPopup":case"linkViaRedirect":return oo;case"reauthViaPopup":case"reauthViaRedirect":return ao;default:Dt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),co=new Kt(2e3,1e4);function lo(e,t,n){return fo.apply(this,arguments)}function fo(){return fo=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),Ot(t,n,Mr),a=no(i,r),o=new yo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),fo.apply(this,arguments)}function ho(){return(ho=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ot((i=oe(t)).auth,n,Mr),a=no(i.auth,r),o=new yo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t,n){return vo.apply(this,arguments)}function vo(){return(vo=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ot((i=oe(t)).auth,n,Mr),a=no(i.auth,r),o=new yo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yo=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o){var u;return I(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=d(u),u}return E(n,[{key:"executeNotNull",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Mt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=x(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt(1===this.filter.length,"Popup operations only handle one event"),t=sa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Rt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Rt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Rt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,co.get())}()}}]),n}(so);yo.currentPopupAction=null;var mo=new Map,go=function(e){v(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return I(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return E(n,[{key:"execute",value:function(){var e=x(A().mark((function e(){var t,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=mo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ko(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,h(l(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:mo.set(this.auth._key(),t);case 21:return this.bypassAuthState||mo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=x(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",h(l(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",h(l(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(so);function ko(e,t){return bo.apply(this,arguments)}function bo(){return bo=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(n),i=Io(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}function wo(e,t){return xo.apply(this,arguments)}function xo(){return xo=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Io(t)._set(_o(n),"true"));case 1:case"end":return e.stop()}}),e)}))),xo.apply(this,arguments)}function Io(e){return jt(e._redirectPersistence)}function _o(e){return Pn("pendingRedirect",e.config.apiKey,e.name)}function Eo(e,t,n){return function(e,t,n){return So.apply(this,arguments)}(e,t,n)}function So(){return So=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Yn(t),Ot(t,n,Mr),a=no(i,r),e.next=5,wo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function To(e,t,n){return function(e,t,n){return Co.apply(this,arguments)}(e,t,n)}function Co(){return(Co=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ot((i=oe(t)).auth,n,Mr),a=no(i.auth,r),e.next=5,wo(a,i.auth);case 5:return e.next=7,Lo(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function No(e,t,n){return function(e,t,n){return Ao.apply(this,arguments)}(e,t,n)}function Ao(){return(Ao=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ot((i=oe(t)).auth,n,Mr),a=no(i.auth,r),e.next=5,ri(!1,i,n.providerId);case 5:return e.next=7,wo(a,i.auth);case 7:return e.next=9,Lo(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yn(t)._initializationPromise;case 2:return e.abrupt("return",Po(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function Po(e,t){return Oo.apply(this,arguments)}function Oo(){return Oo=x(A().mark((function e(t,n){var r,i,a,o,u,s=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Yn(t),a=no(i,n),o=new go(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Lo(e){return Mo.apply(this,arguments)}function Mo(){return(Mo=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sa("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fo=function(){function e(t){I(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return E(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Uo(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Rt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vo(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Vo(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Vo(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Uo(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function jo(e){return Bo.apply(this,arguments)}function Bo(){return Bo=x(A().mark((function e(t){var n,r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Xt(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}var qo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zo=/^https?/;function Ko(){return Ko=x(A().mark((function e(t){var n,r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,jo(t);case 4:n=e.sent,r=n.authorizedDomains,i=b(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Go(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Dt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Ko.apply(this,arguments)}function Go(e){var t=Bt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!zo.test(r))return!1;if(qo.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Wo=new Kt(3e4,6e4);function Ho(){var e=la().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=T(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Qo=null;function Yo(e){return Qo=Qo||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ho(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ho(),n(Rt(e,"network-request-failed"))},timeout:Wo.get()})}if(null===(i=null===(r=la().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=la().gapi)||void 0===a?void 0:a.load)){var u=Pa("iframefcb");return la()[u]=function(){gapi.load?o():n(Rt(e,"network-request-failed"))},Ra("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Qo=null,e}))}(e),Qo}var Xo=new Kt(5e3,15e3),Jo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $o(e){var t=e.config;Mt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Gt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ze},i=Zo.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ee(r).slice(1))}function eu(e){return tu.apply(this,arguments)}function tu(){return tu=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yo(t);case 2:return n=e.sent,Mt(r=la().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:$o(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jo,dontclear:!0},(function(e){return new Promise(function(){var n=x(A().mark((function n(r,i){var a,o,u;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){la().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Rt(t,"network-request-failed"),o=la().setTimeout((function(){i(a)}),Xo.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}var nu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ru="_blank",iu="http://localhost",au=function(){function e(t){I(this,e),this.window=t,this.associatedEvent=null}return E(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ou(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},nu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=j().toLowerCase();n&&(u=Vn(l)?ru:n),Mn(l)&&(t=t||iu,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Kn(l)&&"_self"!==u)return uu(t||"",u),new au(null);var h=window.open(t||"",u,f);Mt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new au(h)}function uu(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var su="__/auth/handler",cu="emulator/auth/handler";function lu(e,t,n,r,i,a){Mt(e.config.authDomain,e,"auth-domain-config-required"),Mt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ze,eventId:i};if(t instanceof Mr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Fr){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(su);return Gt(t,cu)}(e),"?").concat(ee(p).slice(1))}var fu="webStorageSupport",hu=function(){function e(){I(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aa,this._completeRedirectFn=Po}return E(e,[{key:"_openPopup",value:function(){var e=x(A().mark((function e(t,n,r,i){var a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vt(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=lu(t,n,r,Bt(),i),e.abrupt("return",ou(t,o,sa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=x(A().mark((function e(t,n,r,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=lu(t,n,r,Bt(),i),la().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Vt(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu(t);case 2:return n=e.sent,r=new Fo(t),n.register("authEvent",(function(e){return Mt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fu,{type:fu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Dt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ko.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Wn()||Fn()||zn()}}]),e}(),du=hu,pu=function(){function e(t){I(this,e),this.factorId=t}return E(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ft("unexpected MultiFactorSessionType")}}}]),e}(),vu=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone")).credential=e,r}return E(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Xt(e,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Xt(e,"POST","/v2/accounts/mfaSignIn:finalize",Yt(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(pu),yu=function(){function e(){I(this,e)}return E(e,null,[{key:"assertion",value:function(e){return vu._fromCredential(e)}}]),e}();yu.FACTOR_ID="phone";var mu,gu="@firebase/auth",ku="0.19.12",bu=function(){function e(t){I(this,e),this.auth=t,this.internalListeners=new Map}return E(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function wu(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function xu(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}mu="Browser",Me(new he("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Mt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Mt(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:mu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hn(mu)},i=new Qn(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Me(new he("auth-internal",(function(e){return function(e){return new bu(e)}(Yn(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(gu,ku,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(mu)),Ye(gu,ku,"esm2017");var Iu,_u=function(){return _u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_u.apply(this,arguments)},Eu=function(e){return{loading:void 0===e||null===e,value:e}},Su=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return _u(_u({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Eu(t.defaultValue);case"value":return _u(_u({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Eu(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},Tu=function(e,n){var r=Su((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return oe(e).onAuthStateChanged(t,n,r)}(e,(function(e){return wu(void 0,void 0,void 0,(function(){var t;return xu(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]);var c=[s,a,i];return(0,t.useMemo)((function(){return c}),c)},Cu=n(184),Nu=function(){var e=(0,t.useContext)(GE).auth,n=c(Tu(e),1)[0];return(0,Cu.jsx)("nav",{className:"appbar",children:(0,Cu.jsx)("div",{className:"container",children:(0,Cu.jsx)("div",{className:"tolbar",children:n?(0,Cu.jsx)("button",{onClick:function(){return e.signOut()},children:"Exit"}):(0,Cu.jsx)("button",{children:"Login"})})})})},Au="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Du={},Ru=Ru||{},Pu=Au||self;function Ou(){}function Lu(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Mu(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Fu="closure_uid_"+(1e9*Math.random()>>>0),Vu=0;function Uu(e,t,n){return e.call.apply(e.bind,arguments)}function ju(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Bu(e,t,n){return(Bu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uu:ju).apply(null,arguments)}function qu(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zu(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ku(){this.s=this.s,this.o=this.o}var Gu={};Ku.prototype.s=!1,Ku.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Fu)&&e[Fu]||(e[Fu]=++Vu)}(this);delete Gu[e]}},Ku.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Hu=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Qu(e){return Array.prototype.concat.apply([],arguments)}function Yu(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Xu(e){return/^[\s\xa0]*$/.test(e)}var Ju,Zu=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function $u(e,t){return-1!=e.indexOf(t)}function es(e,t){return e<t?-1:e>t?1:0}e:{var ts=Pu.navigator;if(ts){var ns=ts.userAgent;if(ns){Ju=ns;break e}}Ju=""}function rs(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function is(e){var t={};for(var n in e)t[n]=e[n];return t}var as="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function os(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<as.length;a++)n=as[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function us(e){return us[" "](e),e}us[" "]=Ou;var ss,cs=$u(Ju,"Opera"),ls=$u(Ju,"Trident")||$u(Ju,"MSIE"),fs=$u(Ju,"Edge"),hs=fs||ls,ds=$u(Ju,"Gecko")&&!($u(Ju.toLowerCase(),"webkit")&&!$u(Ju,"Edge"))&&!($u(Ju,"Trident")||$u(Ju,"MSIE"))&&!$u(Ju,"Edge"),ps=$u(Ju.toLowerCase(),"webkit")&&!$u(Ju,"Edge");function vs(){var e=Pu.document;return e?e.documentMode:void 0}e:{var ys="",ms=function(){var e=Ju;return ds?/rv:([^\);]+)(\)|;)/.exec(e):fs?/Edge\/([\d\.]+)/.exec(e):ls?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ps?/WebKit\/(\S+)/.exec(e):cs?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ms&&(ys=ms?ms[1]:""),ls){var gs=vs();if(null!=gs&&gs>parseFloat(ys)){ss=String(gs);break e}}ss=ys}var ks,bs={};function ws(){return function(e){var t=bs;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Zu(String(ss)).split("."),n=Zu("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=es(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||es(0==a[2].length,0==o[2].length)||es(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Pu.document&&ls){var xs=vs();ks=xs||(parseInt(ss,10)||void 0)}else ks=void 0;var Is=ks,_s=function(){if(!Pu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Pu.addEventListener("test",Ou,t),Pu.removeEventListener("test",Ou,t)}catch(n){}return e}();function Es(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ss(e,t){if(Es.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ds){e:{try{us(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ts[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ss.Z.h.call(this)}}Es.prototype.h=function(){this.defaultPrevented=!0},zu(Ss,Es);var Ts={2:"touch",3:"pen",4:"mouse"};Ss.prototype.h=function(){Ss.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),Ns=0;function As(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ns,this.ca=this.fa=!1}function Ds(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Rs(e){this.src=e,this.g={},this.h=0}function Ps(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Wu(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ds(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Os(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Rs.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Os(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new As(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Ls="closure_lm_"+(1e6*Math.random()|0),Ms={};function Fs(e,t,n,r,i){if(r&&r.once)return Us(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Fs(e,t[a],n,r,i);return null}return n=Ws(n),e&&e[Cs]?e.N(t,n,Mu(r)?!!r.capture:!!r,i):Vs(e,t,n,!1,r,i)}function Vs(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Mu(i)?!!i.capture:!!i,u=Ks(e);if(u||(e[Ls]=u=new Rs(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=zs;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_s||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(qs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Us(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Us(e,t[a],n,r,i);return null}return n=Ws(n),e&&e[Cs]?e.O(t,n,Mu(r)?!!r.capture:!!r,i):Vs(e,t,n,!0,r,i)}function js(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)js(e,t[a],n,r,i);else r=Mu(r)?!!r.capture:!!r,n=Ws(n),e&&e[Cs]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Os(a=e.g[t],n,r,i))&&(Ds(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ks(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Os(t,n,r,i)),(n=-1<e?t[e]:null)&&Bs(n))}function Bs(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Cs])Ps(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ks(t))?(Ps(n,e),0==n.h&&(n.src=null,t[Ls]=null)):Ds(e)}}}function qs(e){return e in Ms?Ms[e]:Ms[e]="on"+e}function zs(e,t){if(e.ca)e=!0;else{t=new Ss(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Bs(e),e=n.call(r,t)}return e}function Ks(e){return(e=e[Ls])instanceof Rs?e:null}var Gs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ws(e){return"function"===typeof e?e:(e[Gs]||(e[Gs]=function(t){return e.handleEvent(t)}),e[Gs])}function Hs(){Ku.call(this),this.i=new Rs(this),this.P=this,this.I=null}function Qs(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Es(t,e);else if(t instanceof Es)t.target=t.target||e;else{var i=t;os(t=new Es(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ys(o,r,!0,t)&&i}if(i=Ys(o=t.g=e,r,!0,t)&&i,i=Ys(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ys(o=t.g=n[a],r,!1,t)&&i}function Ys(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Ps(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}zu(Hs,Ku),Hs.prototype[Cs]=!0,Hs.prototype.removeEventListener=function(e,t,n,r){js(this,e,t,n,r)},Hs.prototype.M=function(){if(Hs.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ds(n[r]);delete t.g[e],t.h--}}this.I=null},Hs.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Hs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Xs=Pu.JSON.stringify;function Js(){var e=ac,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Zs,$s=function(){function e(){I(this,e),this.h=this.g=null}return E(e,[{key:"add",value:function(e,t){var n=ec.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ec=new(function(){function e(t,n){I(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return E(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new tc}),(function(e){return e.reset()})),tc=function(){function e(){I(this,e),this.next=this.g=this.h=null}return E(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function nc(e){Pu.setTimeout((function(){throw e}),0)}function rc(e,t){Zs||function(){var e=Pu.Promise.resolve(void 0);Zs=function(){e.then(oc)}}(),ic||(Zs(),ic=!0),ac.add(e,t)}var ic=!1,ac=new $s;function oc(){for(var e;e=Js();){try{e.h.call(e.g)}catch(n){nc(n)}var t=ec;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ic=!1}function uc(e,t){Hs.call(this),this.h=e||1,this.g=t||Pu,this.j=Bu(this.kb,this),this.l=Date.now()}function sc(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function cc(e,t,n){if("function"===typeof e)n&&(e=Bu(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Bu(e.handleEvent,e)}return 2147483647<Number(t)?-1:Pu.setTimeout(e,t||0)}function lc(e){e.g=cc((function(){e.g=null,e.i&&(e.i=!1,lc(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zu(uc,Hs),(Iu=uc.prototype).da=!1,Iu.S=null,Iu.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qs(this,"tick"),this.da&&(sc(this),this.start()))}},Iu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Iu.M=function(){uc.Z.M.call(this),sc(this),delete this.g};var fc=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return E(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:lc(this)}},{key:"M",value:function(){h(l(n.prototype),"M",this).call(this),this.g&&(Pu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ku);function hc(e){Ku.call(this),this.h=e,this.g={}}zu(hc,Ku);var dc=[];function pc(e,t,n,r){Array.isArray(n)||(n&&(dc[0]=n.toString()),n=dc);for(var i=0;i<n.length;i++){var a=Fs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function vc(e){rs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Bs(e)}),e),e.g={}}function yc(){this.g=!0}function mc(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Xs(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}hc.prototype.M=function(){hc.Z.M.call(this),vc(this)},hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yc.prototype.Aa=function(){this.g=!1},yc.prototype.info=function(){};var gc={},kc=null;function bc(){return kc=kc||new Hs}function wc(e){Es.call(this,gc.Ma,e)}function xc(e){var t=bc();Qs(t,new wc(t,e))}function Ic(e,t){Es.call(this,gc.STAT_EVENT,e),this.stat=t}function _c(e){var t=bc();Qs(t,new Ic(t,e))}function Ec(e,t){Es.call(this,gc.Na,e),this.size=t}function Sc(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Pu.setTimeout((function(){e()}),t)}gc.Ma="serverreachability",zu(wc,Es),gc.STAT_EVENT="statevent",zu(Ic,Es),gc.Na="timingevent",zu(Ec,Es);var Tc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Cc={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Nc(){}function Ac(e){return e.h||(e.h=e.i())}function Dc(){}Nc.prototype.h=null;var Rc,Pc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Oc(){Es.call(this,"d")}function Lc(){Es.call(this,"c")}function Mc(){}function Fc(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new hc(this),this.P=Uc,e=hs?125:void 0,this.W=new uc(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vc}function Vc(){this.i=null,this.g="",this.h=!1}zu(Oc,Es),zu(Lc,Es),zu(Mc,Nc),Mc.prototype.g=function(){return new XMLHttpRequest},Mc.prototype.i=function(){return{}},Rc=new Mc;var Uc=45e3,jc={},Bc={};function qc(e,t,n){e.K=1,e.v=fl(al(t)),e.s=n,e.U=!0,zc(e,null)}function zc(e,t){e.F=Date.now(),Hc(e),e.A=al(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),_l(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Vc,e.g=Tf(e.l,n?t:null,!e.s),0<e.O&&(e.L=new fc(Bu(e.Ia,e,e.g),e.O)),pc(e.V,e.g,"readystatechange",e.gb),t=e.H?is(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),xc(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Kc(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Gc(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Wc(e,n))==Bc){4==t&&(e.o=4,_c(14),i=!1),mc(e.j,e.m,null,"[Incomplete Response]");break}if(r==jc){e.o=4,_c(15),mc(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}mc(e.j,e.m,r,null),Zc(e,r)}Kc(e)&&r!=Bc&&r!=jc&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,_c(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),kf(t),t.L=!0,_c(11))):(mc(e.j,e.m,n,"[Invalid Chunked Response]"),Jc(e),Xc(e))}function Wc(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Bc:(n=Number(t.substring(n,r)),isNaN(n)?jc:(r+=1)+n>t.length?Bc:(t=t.substr(r,n),e.C=r+n,t))}function Hc(e){e.Y=Date.now()+e.P,Qc(e,e.P)}function Qc(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Sc(Bu(e.eb,e),t)}function Yc(e){e.B&&(Pu.clearTimeout(e.B),e.B=null)}function Xc(e){0==e.l.G||e.I||xf(e.l,e)}function Jc(e){Yc(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,sc(e.W),vc(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Zc(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Rl(n.i,e)))if(n.I=e.N,!e.J&&Rl(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;wf(n),lf(n)}gf(n),_c(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Sc(Bu(n.ab,n),6e3));if(1>=Dl(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else _f(n,11)}else if((e.J||n.g==e)&&wf(n),!Xu(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&($u(l,"spdy")||$u(l,"quic")||$u(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Pl(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,ll(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Sf(r,r.H?r.la:null,r.W),d.J){Ol(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Yc(p),Hc(p)),r.g=d}else mf(r);0<n.l.length&&df(n)}else"stop"!=a[0]&&"close"!=a[0]||_f(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?_f(n,7):cf(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}xc(4)}catch(a){}}function $c(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Lu(e)||"string"===typeof e)Hu(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Lu(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Lu(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function el(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof el)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function tl(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];nl(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)nl(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function nl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Iu=Fc.prototype).setTimeout=function(e){this.P=e},Iu.gb=function(e){e=e.target;var t=this.L;t&&3==rf(e)?t.l():this.Ia(e)},Iu.Ia=function(e){try{if(e==this.g)e:{var t=rf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||hs||this.g&&(this.h.h||this.g.ga()||af(this.g)))){this.I||4!=t||7==n||xc(8==n||0>=r?3:2),Yc(this);var i=this.g.ba();this.N=i;t:if(Kc(this)){var a=af(this.g);e="";var o=a.length,u=4==rf(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Jc(this),Xc(this);var s="";break t}this.h.i=new Pu.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xu(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,_c(12),Jc(this),Xc(this);break e}mc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Zc(this,i)}this.U?(Gc(this,t,s),hs&&this.i&&3==t&&(pc(this.V,this.W,"tick",this.fb),this.W.start())):(mc(this.j,this.m,s,null),Zc(this,s)),4==t&&Jc(this),this.i&&!this.I&&(4==t?xf(this.l,this):(this.i=!1,Hc(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,_c(12)):(this.o=0,_c(13)),Jc(this),Xc(this)}}}catch(t){}},Iu.fb=function(){if(this.g){var e=rf(this.g),t=this.g.ga();this.C<t.length&&(Yc(this),Gc(this,e,t),this.i&&4!=e&&Hc(this))}},Iu.cancel=function(){this.I=!0,Jc(this)},Iu.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(xc(3),_c(17)),Jc(this),this.o=2,Xc(this)):Qc(this,this.Y-e)},(Iu=el.prototype).R=function(){tl(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Iu.T=function(){return tl(this),this.g.concat()},Iu.get=function(e,t){return nl(this.h,e)?this.h[e]:t},Iu.set=function(e,t){nl(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Iu.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var rl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function il(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof il){this.g=void 0!==t?t:e.g,ol(this,e.j),this.s=e.s,ul(this,e.i),sl(this,e.m),this.l=e.l,t=e.h;var n=new bl;n.i=t.i,t.g&&(n.g=new el(t.g),n.h=t.h),cl(this,n),this.o=e.o}else e&&(n=String(e).match(rl))?(this.g=!!t,ol(this,n[1]||"",!0),this.s=hl(n[2]||""),ul(this,n[3]||"",!0),sl(this,n[4]),this.l=hl(n[5]||"",!0),cl(this,n[6]||"",!0),this.o=hl(n[7]||"")):(this.g=!!t,this.h=new bl(null,this.g))}function al(e){return new il(e)}function ol(e,t,n){e.j=n?hl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ul(e,t,n){e.i=n?hl(t,!0):t}function sl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function cl(e,t,n){t instanceof bl?(e.h=t,function(e,t){t&&!e.j&&(wl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(xl(this,t),_l(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=dl(t,gl)),e.h=new bl(t,e.g))}function ll(e,t,n){e.h.set(t,n)}function fl(e){return ll(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}il.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dl(t,vl,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(dl(t,vl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(dl(n,"/"==n.charAt(0)?ml:yl,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",dl(n,kl)),e.join("")};var vl=/[#\/\?@]/g,yl=/[#\?:]/g,ml=/[#\?]/g,gl=/[#\?@]/g,kl=/#/g;function bl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wl(e){e.g||(e.g=new el,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function xl(e,t){wl(e),t=El(e,t),nl(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,nl((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&tl(e)))}function Il(e,t){return wl(e),t=El(e,t),nl(e.g.h,t)}function _l(e,t,n){xl(e,t),0<n.length&&(e.i=null,e.g.set(El(e,t),Yu(n)),e.h+=n.length)}function El(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Iu=bl.prototype).add=function(e,t){wl(this),this.i=null,e=El(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Iu.forEach=function(e,t){wl(this),this.g.forEach((function(n,r){Hu(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Iu.T=function(){wl(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Iu.R=function(e){wl(this);var t=[];if("string"===typeof e)Il(this,e)&&(t=Qu(t,this.g.get(El(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Qu(t,e[n])}return t},Iu.set=function(e,t){return wl(this),this.i=null,Il(this,e=El(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Iu.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Iu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Sl=E((function e(t,n){I(this,e),this.h=t,this.g=n}));function Tl(e){this.l=e||Nl,Pu.PerformanceNavigationTiming?e=0<(e=Pu.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Pu.g&&Pu.g.Ea&&Pu.g.Ea()&&Pu.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cl,Nl=10;function Al(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Dl(e){return e.h?1:e.g?e.g.size:0}function Rl(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Pl(e,t){e.g?e.g.add(t):e.h=t}function Ol(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ll(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Yu(e.i)}function Ml(){}function Fl(){this.g=new Ml}function Vl(e,t,n){var r=n||"";try{$c(e,(function(e,n){var i=e;Mu(e)&&(i=Xs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ul(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function jl(e){this.l=e.$b||null,this.j=e.ib||!1}function Bl(e,t){Hs.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ql,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tl.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ml.prototype.stringify=function(e){return Pu.JSON.stringify(e,void 0)},Ml.prototype.parse=function(e){return Pu.JSON.parse(e,void 0)},zu(jl,Nc),jl.prototype.g=function(){return new Bl(this.l,this.j)},jl.prototype.i=(Cl={},function(){return Cl}),zu(Bl,Hs);var ql=0;function zl(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Kl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Gl(e)}function Gl(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Iu=Bl.prototype).open=function(e,t){if(this.readyState!=ql)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Gl(this)},Iu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Pu).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Iu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kl(this)),this.readyState=ql},Iu.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Gl(this)),this.g&&(this.readyState=3,Gl(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Pu.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zl(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Iu.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Kl(this):Gl(this),3==this.readyState&&zl(this)}},Iu.Ua=function(e){this.g&&(this.response=this.responseText=e,Kl(this))},Iu.Ta=function(e){this.g&&(this.response=e,Kl(this))},Iu.ha=function(){this.g&&Kl(this)},Iu.setRequestHeader=function(e,t){this.v.append(e,t)},Iu.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Iu.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Bl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Wl=Pu.JSON.parse;function Hl(e){Hs.call(this),this.headers=new el,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ql,this.K=this.L=!1}zu(Hl,Hs);var Ql="",Yl=/^https?$/i,Xl=["POST","PUT"];function Jl(e){return"content-type"==e.toLowerCase()}function Zl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$l(e),tf(e)}function $l(e){e.D||(e.D=!0,Qs(e,"complete"),Qs(e,"error"))}function ef(e){if(e.h&&"undefined"!=typeof Ru&&(!e.C[1]||4!=rf(e)||2!=e.ba()))if(e.v&&4==rf(e))cc(e.Fa,0,e);else if(Qs(e,"readystatechange"),4==rf(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(rl)[1]||null;if(!a&&Pu.self&&Pu.self.location){var o=Pu.self.location.protocol;a=o.substr(0,o.length-1)}i=!Yl.test(a?a.toLowerCase():"")}t=i}if(t)Qs(e,"complete"),Qs(e,"success");else{e.m=6;try{var u=2<rf(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",$l(e)}}finally{tf(e)}}}function tf(e,t){if(e.g){nf(e);var n=e.g,r=e.C[0]?Ou:null;e.g=null,e.C=null,t||Qs(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function nf(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Pu.clearTimeout(e.A),e.A=null)}function rf(e){return e.g?e.g.readyState:0}function af(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ql:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function of(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return rs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ll(e,t,n))}function uf(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sf(e){this.za=0,this.l=[],this.h=new yc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=uf("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=uf("baseRetryDelayMs",5e3,e),this.$a=uf("retryDelaySeedMs",1e4,e),this.Ya=uf("forwardChannelMaxRetries",2,e),this.ra=uf("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Tl(e&&e.concurrentRequestLimit),this.Ca=new Fl,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function cf(e){if(ff(e),3==e.G){var t=e.V++,n=al(e.F);ll(n,"SID",e.J),ll(n,"RID",t),ll(n,"TYPE","terminate"),vf(e,n),(t=new Fc(e,e.h,t,void 0)).K=2,t.v=fl(al(n)),n=!1,Pu.navigator&&Pu.navigator.sendBeacon&&(n=Pu.navigator.sendBeacon(t.v.toString(),"")),!n&&Pu.Image&&((new Image).src=t.v,n=!0),n||(t.g=Tf(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Hc(t)}Ef(e)}function lf(e){e.g&&(kf(e),e.g.cancel(),e.g=null)}function ff(e){lf(e),e.u&&(Pu.clearTimeout(e.u),e.u=null),wf(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Pu.clearTimeout(e.m),e.m=null)}function hf(e,t){e.l.push(new Sl(e.Za++,t)),3==e.G&&df(e)}function df(e){Al(e.i)||e.m||(e.m=!0,rc(e.Ha,e),e.C=0)}function pf(e,t){var n;n=t?t.m:e.V++;var r=al(e.F);ll(r,"SID",e.J),ll(r,"RID",n),ll(r,"AID",e.U),vf(e,r),e.o&&e.s&&of(r,e.o,e.s),n=new Fc(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=yf(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Pl(e.i,n),qc(n,r,t)}function vf(e,t){e.j&&$c({},(function(e,n){ll(t,n,e)}))}function yf(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Bu(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Vl(l,o,"req"+c+"_")}catch(th){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function mf(e){e.g||e.u||(e.Y=1,rc(e.Ga,e),e.A=0)}function gf(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Sc(Bu(e.Ga,e),If(e,e.A)),e.A++,!0)}function kf(e){null!=e.B&&(Pu.clearTimeout(e.B),e.B=null)}function bf(e){e.g=new Fc(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=al(e.oa);ll(t,"RID","rpc"),ll(t,"SID",e.J),ll(t,"CI",e.N?"0":"1"),ll(t,"AID",e.U),vf(e,t),ll(t,"TYPE","xmlhttp"),e.o&&e.s&&of(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=fl(al(t)),n.s=null,n.U=!0,zc(n,e)}function wf(e){null!=e.v&&(Pu.clearTimeout(e.v),e.v=null)}function xf(e,t){var n=null;if(e.g==t){wf(e),kf(e),e.g=null;var r=2}else{if(!Rl(e.i,t))return;n=t.D,Ol(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Qs(r=bc(),new Ec(r,n,t,i)),df(e)}else mf(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Dl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Sc(Bu(e.Ha,e,t),If(e,e.C)),e.C++,!0))}(e,t)||2==r&&gf(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_f(e,5);break;case 4:_f(e,10);break;case 3:_f(e,6);break;default:_f(e,2)}}function If(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function _f(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Bu(e.jb,e);n||(n=new il("//www.google.com/images/cleardot.gif"),Pu.location&&"http"==Pu.location.protocol||ol(n,"https"),fl(n)),function(e,t){var n=new yc;if(Pu.Image){var r=new Image;r.onload=qu(Ul,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qu(Ul,n,r,"TestLoadImage: error",!1,t),r.onabort=qu(Ul,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qu(Ul,n,r,"TestLoadImage: timeout",!1,t),Pu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else _c(2);e.G=0,e.j&&e.j.va(t),Ef(e),ff(e)}function Ef(e){e.G=0,e.I=-1,e.j&&(0==Ll(e.i).length&&0==e.l.length||(e.i.i.length=0,Yu(e.l),e.l.length=0),e.j.ua())}function Sf(e,t,n){var r=function(e){return e instanceof il?al(e):new il(e,void 0)}(n);if(""!=r.i)t&&ul(r,t+"."+r.i),sl(r,r.m);else{var i=Pu.location;r=function(e,t,n,r){var i=new il(null,void 0);return e&&ol(i,e),t&&ul(i,t),n&&sl(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&rs(e.aa,(function(e,t){ll(r,t,e)})),t=e.D,n=e.sa,t&&n&&ll(r,t,n),ll(r,"VER",e.ma),vf(e,r),r}function Tf(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Hl(new jl({ib:!0})):new Hl(e.qa)).L=e.H,t}function Cf(){}function Nf(){if(ls&&!(10<=Number(Is)))throw Error("Environmental error: no available transport.")}function Af(e,t){Hs.call(this),this.g=new sf(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Xu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xu(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pf(this)}function Df(e){Oc.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Rf(){Lc.call(this),this.status=1}function Pf(e){this.g=e}(Iu=Hl.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rc.g(),this.C=this.u?Ac(this.u):Ac(Rc),this.g.onreadystatechange=Bu(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Zl(this,a)}e=n||"";var i=new el(this.headers);r&&$c(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Jl,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Pu.FormData&&e instanceof Pu.FormData,!(0<=Wu(Xl,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nf(this),0<this.B&&((this.K=function(e){return ls&&ws()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bu(this.pa,this)):this.A=cc(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Zl(this,a)}},Iu.pa=function(){"undefined"!=typeof Ru&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qs(this,"timeout"),this.abort(8))},Iu.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Qs(this,"complete"),Qs(this,"abort"),tf(this))},Iu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),tf(this,!0)),Hl.Z.M.call(this)},Iu.Fa=function(){this.s||(this.F||this.v||this.l?ef(this):this.cb())},Iu.cb=function(){ef(this)},Iu.ba=function(){try{return 2<rf(this)?this.g.status:-1}catch(Cl){return-1}},Iu.ga=function(){try{return this.g?this.g.responseText:""}catch(Cl){return""}},Iu.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Wl(t)}},Iu.Da=function(){return this.m},Iu.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Iu=sf.prototype).ma=8,Iu.G=1,Iu.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Iu.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Fc(this,this.h,e,void 0),n=this.s;if(this.P&&(n?os(n=is(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=yf(this,t,r),ll(i=al(this.F),"RID",e),ll(i,"CVER",22),this.D&&ll(i,"X-HTTP-Session-Id",this.D),vf(this,i),this.o&&n&&of(i,this.o,n),Pl(this.i,t),this.Ra&&ll(i,"TYPE","init"),this.ja?(ll(i,"$req",r),ll(i,"SID","null"),t.$=!0,qc(t,i,null)):qc(t,i,r),this.G=2}}else 3==this.G&&(e?pf(this,e):0==this.l.length||Al(this.i)||pf(this))},Iu.Ga=function(){if(this.u=null,bf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Sc(Bu(this.bb,this),e)}},Iu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_c(10),lf(this),bf(this))},Iu.ab=function(){null!=this.v&&(this.v=null,lf(this),gf(this),_c(19))},Iu.jb=function(e){e?(this.h.info("Successfully pinged google.com"),_c(2)):(this.h.info("Failed to ping google.com"),_c(1))},(Iu=Cf.prototype).xa=function(){},Iu.wa=function(){},Iu.va=function(){},Iu.ua=function(){},Iu.Oa=function(){},Nf.prototype.g=function(e,t){return new Af(e,t)},zu(Af,Hs),Af.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),rc(Bu(e.hb,e,t))),_c(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Sf(e,null,e.W),df(e)},Af.prototype.close=function(){cf(this.g)},Af.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,hf(this.g,t)}else this.v?((t={}).__data__=Xs(e),hf(this.g,t)):hf(this.g,e)},Af.prototype.M=function(){this.g.j=null,delete this.j,cf(this.g),delete this.g,Af.Z.M.call(this)},zu(Df,Oc),zu(Rf,Lc),zu(Pf,Cf),Pf.prototype.xa=function(){Qs(this.g,"a")},Pf.prototype.wa=function(e){Qs(this.g,new Df(e))},Pf.prototype.va=function(e){Qs(this.g,new Rf(e))},Pf.prototype.ua=function(){Qs(this.g,"b")},Nf.prototype.createWebChannel=Nf.prototype.g,Af.prototype.send=Af.prototype.u,Af.prototype.open=Af.prototype.m,Af.prototype.close=Af.prototype.close,Tc.NO_ERROR=0,Tc.TIMEOUT=8,Tc.HTTP_ERROR=6,Cc.COMPLETE="complete",Dc.EventType=Pc,Pc.OPEN="a",Pc.CLOSE="b",Pc.ERROR="c",Pc.MESSAGE="d",Hs.prototype.listen=Hs.prototype.N,Hl.prototype.listenOnce=Hl.prototype.O,Hl.prototype.getLastError=Hl.prototype.La,Hl.prototype.getLastErrorCode=Hl.prototype.Da,Hl.prototype.getStatus=Hl.prototype.ba,Hl.prototype.getResponseJson=Hl.prototype.Qa,Hl.prototype.getResponseText=Hl.prototype.ga,Hl.prototype.send=Hl.prototype.ea;var Of=Du.createWebChannelTransport=function(){return new Nf},Lf=Du.getStatEventTarget=function(){return bc()},Mf=Du.ErrorCode=Tc,Ff=Du.EventType=Cc,Vf=Du.Event=gc,Uf=Du.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},jf=Du.FetchXmlHttpFactory=jl,Bf=Du.WebChannel=Dc,qf=Du.XhrIo=Hl,zf="@firebase/firestore",Kf=function(){function e(t){I(this,e),this.uid=t}return E(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Kf.UNAUTHENTICATED=new Kf(null),Kf.GOOGLE_CREDENTIALS=new Kf("google-credentials-uid"),Kf.FIRST_PARTY=new Kf("first-party-uid"),Kf.MOCK_USER=new Kf("mock-user");var Gf="9.6.11",Wf=new Ee("@firebase/firestore");function Hf(){return Wf.logLevel}function Qf(e){if(Wf.logLevel<=ye.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Jf);Wf.debug.apply(Wf,["Firestore (".concat(Gf,"): ").concat(e)].concat(T(i)))}}function Yf(e){if(Wf.logLevel<=ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Jf);Wf.error.apply(Wf,["Firestore (".concat(Gf,"): ").concat(e)].concat(T(i)))}}function Xf(e){if(Wf.logLevel<=ye.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Jf);Wf.warn.apply(Wf,["Firestore (".concat(Gf,"): ").concat(e)].concat(T(i)))}}function Jf(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Gf,") INTERNAL ASSERTION FAILED: ")+e;throw Yf(t),new Error(t)}function $f(e,t){e||Zf()}function eh(e,t){return e}var th={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},nh=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return E(n)}(H),rh=E((function e(){var t=this;I(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ih=E((function e(t,n){I(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ah=function(){function e(){I(this,e)}return E(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kf.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),oh=function(){function e(t){I(this,e),this.token=t,this.changeListener=null}return E(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),uh=function(){function e(t){I(this,e),this.t=t,this.currentUser=Kf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new rh;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new rh,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Qf("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Qf("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new rh)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Qf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?($f("string"==typeof n.accessToken),new ih(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return $f(null===e||"string"==typeof e),new Kf(e)}}]),e}(),sh=E((function e(t,n,r){I(this,e),this.type="FirstParty",this.user=Kf.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),ch=function(){function e(t,n,r){I(this,e),this.h=t,this.l=n,this.m=r}return E(e,[{key:"getToken",value:function(){return Promise.resolve(new sh(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Kf.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),lh=E((function e(t){I(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),fh=function(){function e(t){I(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return E(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Qf("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Qf("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Qf("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Qf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?($f("string"==typeof t.token),e.p=t.token,new lh(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),hh=function(){function e(t,n){var r=this;I(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return E(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function dh(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}hh.A=-1;var ph=function(){function e(){I(this,e)}return E(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=dh(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function vh(e,t){return e<t?-1:e>t?1:0}function yh(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function mh(e){return e+"\0"}var gh=function(){function e(t,n){if(I(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new nh(th.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nh(th.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new nh(th.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nh(th.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return E(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?vh(this.nanoseconds,e.nanoseconds):vh(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),kh=function(){function e(t){I(this,e),this.timestamp=t}return E(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new gh(0,0))}},{key:"max",value:function(){return new e(new gh(253402300799,999999999))}}]),e}();function bh(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wh(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xh(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ih=function(){function e(t,n,r){I(this,e),void 0===n?n=0:n>t.length&&Zf(),void 0===r?r=t.length-n:r>t.length-n&&Zf(),this.segments=t,this.offset=n,this.len=r}return E(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),_h=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new nh(th.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,T(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ih),Eh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sh=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Eh.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new nh(th.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new nh(th.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new nh(th.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new nh(th.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ih),Th=function(){function e(t){I(this,e),this.fields=t,t.sort(Sh.comparator)}return E(e,[{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return yh(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Ch=function(e){function t(e){I(this,t),this.binaryString=e}return E(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return vh(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ch.EMPTY_BYTE_STRING=new Ch("");var Nh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ah(e){if($f(!!e),"string"==typeof e){var t=0,n=Nh.exec(e);if($f(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Dh(e.seconds),nanos:Dh(e.nanos)}}function Dh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Rh(e){return"string"==typeof e?Ch.fromBase64String(e):Ch.fromUint8Array(e)}function Ph(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Oh(e){var t=e.mapValue.fields.__previous_value__;return Ph(t)?Oh(t):t}function Lh(e){var t=Ah(e.mapValue.fields.__local_write_time__.timestampValue);return new gh(t.seconds,t.nanos)}var Mh=E((function e(t,n,r,i,a,o,u,s){I(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Fh=function(){function e(t,n){I(this,e),this.projectId=t,this.database=n||"(default)"}return E(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Vh(e){return null==e}function Uh(e){return 0===e&&1/e==-1/0}function jh(e){return"number"==typeof e&&Number.isInteger(e)&&!Uh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Bh=function(){function e(t){I(this,e),this.path=t}return E(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===_h.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(_h.fromString(t))}},{key:"fromName",value:function(t){return new e(_h.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(_h.emptyPath())}},{key:"comparator",value:function(e,t){return _h.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new _h(t.slice()))}}]),e}(),qh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zh={nullValue:"NULL_VALUE"};function Kh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ph(e)?4:id(e)?9:10:Zf()}function Gh(e,t){if(e===t)return!0;var n=Kh(e);if(n!==Kh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Lh(e).isEqual(Lh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ah(e.timestampValue),r=Ah(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Rh(e.bytesValue).isEqual(Rh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dh(e.geoPointValue.latitude)===Dh(t.geoPointValue.latitude)&&Dh(e.geoPointValue.longitude)===Dh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dh(e.integerValue)===Dh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Dh(e.doubleValue),r=Dh(t.doubleValue);return n===r?Uh(n)===Uh(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yh(e.arrayValue.values||[],t.arrayValue.values||[],Gh);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(bh(n)!==bh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gh(n[i],r[i])))return!1;return!0}(e,t);default:return Zf()}}function Wh(e,t){return void 0!==(e.values||[]).find((function(e){return Gh(e,t)}))}function Hh(e,t){if(e===t)return 0;var n=Kh(e),r=Kh(t);if(n!==r)return vh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vh(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Dh(e.integerValue||e.doubleValue),r=Dh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Qh(e.timestampValue,t.timestampValue);case 4:return Qh(Lh(e),Lh(t));case 5:return vh(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Rh(e),r=Rh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=vh(n[i],r[i]);if(0!==a)return a}return vh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=vh(Dh(e.latitude),Dh(t.latitude));return 0!==n?n:vh(Dh(e.longitude),Dh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Hh(n[i],r[i]);if(a)return a}return vh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=vh(r[o],a[o]);if(0!==u)return u;var s=Hh(n[r[o]],i[a[o]]);if(0!==s)return s}return vh(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Zf()}}function Qh(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vh(e,t);var n=Ah(e),r=Ah(t),i=vh(n.seconds,r.seconds);return 0!==i?i:vh(n.nanos,r.nanos)}function Yh(e){return Xh(e)}function Xh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ah(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Rh(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Bh.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Xh(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Xh(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Zf();var t,n}function Jh(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Zh(e){return!!e&&"integerValue"in e}function $h(e){return!!e&&"arrayValue"in e}function ed(e){return!!e&&"nullValue"in e}function td(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nd(e){return!!e&&"mapValue"in e}function rd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return wh(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=rd(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=rd(e.arrayValue.values[r]);return n}return Object.assign({},e)}function id(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ad(e){return"nullValue"in e?zh:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Jh(Fh.empty(),Bh.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Zf()}function od(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Jh(Fh.empty(),Bh.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?qh:Zf()}function ud(e,t){return void 0===e?t:void 0===t||Hh(e,t)>0?e:t}function sd(e,t){return void 0===e?t:void 0===t||Hh(e,t)<0?e:t}var cd=function(){function e(t){I(this,e),this.value=t}return E(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!nd(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rd(t)}},{key:"setAll",value:function(e){var t=this,n=Sh.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=rd(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Gh(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];nd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){wh(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(rd(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ld(e){var t=[];return wh(e.fields,(function(e,n){var r=new Sh([e]);if(nd(n)){var i=ld(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Th(t)}var fd=function(){function e(t,n,r,i,a,o){I(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return E(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=cd.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=cd.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,kh.min(),kh.min(),cd.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,kh.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,kh.min(),cd.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,kh.min(),cd.empty(),2)}}]),e}(),hd=E((function e(t,n,r,i){I(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function dd(e){return e.fields.find((function(e){return 2===e.kind}))}function pd(e){return e.fields.filter((function(e){return 2!==e.kind}))}hd.UNKNOWN_ID=-1;var vd=E((function e(t,n){I(this,e),this.fieldPath=t,this.kind=n})),yd=function(){function e(t,n){I(this,e),this.sequenceNumber=t,this.offset=n}return E(e,null,[{key:"empty",value:function(){return new e(0,kd.min())}}]),e}();function md(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=kh.fromTimestamp(1e9===r?new gh(n+1,0):new gh(n,r));return new kd(i,Bh.empty(),t)}function gd(e){return new kd(e.readTime,e.key,-1)}var kd=function(){function e(t,n,r){I(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return E(e,null,[{key:"min",value:function(){return new e(kh.min(),Bh.empty(),-1)}},{key:"max",value:function(){return new e(kh.max(),Bh.empty(),-1)}}]),e}();function bd(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Bh.comparator(e.documentKey,t.documentKey))?n:vh(e.largestBatchId,t.largestBatchId)}var wd=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;I(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function xd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new wd(e,t,n,r,i,a,o)}function Id(e){var t=eh(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Yh(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Vh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Yh(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Yh(e)})).join(",")),t.P=n}return t.P}function _d(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!jd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Gh(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qd(e.startAt,t.startAt)&&qd(e.endAt,t.endAt)}function Ed(e){return Bh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Sd(e,t){return e.filters.filter((function(e){return e instanceof Nd&&e.field.isEqual(t)}))}function Td(e,t,n){var r,i,a=!0,o=b(Sd(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=ad(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=zh}ud(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ud(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}function Cd(e,t,n){var r,i,a=!0,o=b(Sd(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=od(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=qh}sd(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];sd(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}var Nd=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Hh(t,this.value)):null!==t&&Kh(this.value)===Kh(t)&&this.v(Hh(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zf()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Ad(e,t,r):"array-contains"===t?new Od(e,r):"in"===t?new Ld(e,r):"not-in"===t?new Md(e,r):"array-contains-any"===t?new Fd(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Dd(e,n):new Rd(e,n)}}]),n}(function(){return E((function e(){I(this,e)}))}()),Ad=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,e,r,i)).key=Bh.fromName(i.referenceValue),a}return E(n,[{key:"matches",value:function(e){var t=Bh.comparator(e.key,this.key);return this.v(t)}}]),n}(Nd),Dd=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,"in",r)).keys=Pd("in",r),i}return E(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Nd),Rd=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,"not-in",r)).keys=Pd("not-in",r),i}return E(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Nd);function Pd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Bh.fromName(e.referenceValue)}))}var Od=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"array-contains",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return $h(t)&&Wh(t.arrayValue,this.value)}}]),n}(Nd),Ld=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"in",r)}return E(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Wh(this.value.arrayValue,t)}}]),n}(Nd),Md=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"not-in",r)}return E(n,[{key:"matches",value:function(e){if(Wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Wh(this.value.arrayValue,t)}}]),n}(Nd),Fd=function(e){v(n,e);var t=k(n);function n(e,r){return I(this,n),t.call(this,e,"array-contains-any",r)}return E(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!$h(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Wh(t.value.arrayValue,e)}))}}]),n}(Nd),Vd=E((function e(t,n){I(this,e),this.position=t,this.inclusive=n})),Ud=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";I(this,e),this.field=t,this.dir=n}));function jd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Bd(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Bh.comparator(Bh.fromName(o.referenceValue),n.key):Hh(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function qd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Gh(e.position[n],t.position[n]))return!1;return!0}var zd=E((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;I(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Kd(e,t,n,r,i,a,o,u){return new zd(e,t,n,r,i,a,o,u)}function Gd(e){return new zd(e)}function Wd(e){return!Vh(e.limit)&&"F"===e.limitType}function Hd(e){return!Vh(e.limit)&&"L"===e.limitType}function Qd(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Yd(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Xd(e){return null!==e.collectionGroup}function Jd(e){var t=eh(e);if(null===t.D){t.D=[];var n=Yd(t),r=Qd(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Ud(n)),t.D.push(new Ud(Sh.keyField(),"asc"));else{var i,a=!1,o=b(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Ud(Sh.keyField(),s))}}}return t.D}function Zd(e){var t=eh(e);if(!t.C)if("F"===t.limitType)t.C=xd(t.path,t.collectionGroup,Jd(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=b(Jd(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ud(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Vd(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Vd(t.startAt.position,!t.startAt.inclusive):null;t.C=xd(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function $d(e,t,n){return new zd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ep(e,t){return _d(Zd(e),Zd(t))&&e.limitType===t.limitType}function tp(e){return"".concat(Id(Zd(e)),"|lt:").concat(e.limitType)}function np(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Yh(t.value));var t})).join(", "),"]")),Vh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Yh(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Yh(e)})).join(",")),"Target(".concat(t,")")}(Zd(e)),"; limitType=").concat(e.limitType,")")}function rp(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Bh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Bd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jd(e),t))&&!(e.endAt&&!function(e,t,n){var r=Bd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jd(e),t))}(e,t)}function ip(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ap(e){return function(t,n){var r,i=!1,a=b(Jd(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=op(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function op(e,t,n){var r=e.field.isKeyField()?Bh.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Hh(r,i):Zf()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Zf()}}function up(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(t)?"-0":t}}function sp(e){return{integerValue:""+e}}function cp(e,t){return jh(t)?sp(t):up(e,t)}var lp=E((function e(){I(this,e),this._=void 0}));function fp(e,t,n){return e instanceof pp?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vp?yp(e,t):e instanceof mp?gp(e,t):function(e,t){var n=dp(e,t),r=bp(n)+bp(e.k);return Zh(n)&&Zh(e.k)?sp(r):up(e.M,r)}(e,t)}function hp(e,t,n){return e instanceof vp?yp(e,t):e instanceof mp?gp(e,t):n}function dp(e,t){return e instanceof kp?Zh(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var pp=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n)}(lp),vp=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).elements=e,r}return E(n)}(lp);function yp(e,t){var n,r=wp(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Gh(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var mp=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).elements=e,r}return E(n)}(lp);function gp(e,t){var n,r=wp(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Gh(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var kp=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).M=e,i.k=r,i}return E(n)}(lp);function bp(e){return Dh(e.integerValue||e.doubleValue)}function wp(e){return $h(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var xp=E((function e(t,n){I(this,e),this.field=t,this.transform=n}));var Ip=E((function e(t,n){I(this,e),this.version=t,this.transformResults=n})),_p=function(){function e(t,n){I(this,e),this.updateTime=t,this.exists=n}return E(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ep(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Sp=E((function e(){I(this,e)}));function Tp(e,t,n){e instanceof Rp?function(e,t,n){var r=e.value.clone(),i=Lp(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Pp?function(e,t,n){if(Ep(e.precondition,t)){var r=Lp(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Op(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cp(e,t,n){e instanceof Rp?function(e,t,n){if(Ep(e.precondition,t)){var r=e.value.clone(),i=Mp(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Dp(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Pp?function(e,t,n){if(Ep(e.precondition,t)){var r=Mp(e.fieldTransforms,n,t),i=t.data;i.setAll(Op(e)),i.setAll(r),t.convertToFoundDocument(Dp(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Ep(e.precondition,t)&&t.convertToNoDocument(kh.min())}(e,t)}function Np(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=dp(a.transform,o||null);null!=u&&(null==r&&(r=cd.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ap(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&yh(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vp&&t instanceof vp||e instanceof mp&&t instanceof mp?yh(e.elements,t.elements,Gh):e instanceof kp&&t instanceof kp?Gh(e.k,t.k):e instanceof pp&&t instanceof pp}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Dp(e){return e.isFoundDocument()?e.version:kh.min()}var Rp=function(e){v(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return I(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return E(n)}(Sp),Pp=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return I(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return E(n)}(Sp);function Op(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Lp(e,t,n){var r=new Map;$f(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,hp(o,u,n[i]))}return r}function Mp(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,fp(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Fp,Vp,Up=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return E(n)}(Sp),jp=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return E(n)}(Sp),Bp=E((function e(t){I(this,e),this.count=t}));function qp(e){switch(e){default:return Zf();case th.CANCELLED:case th.UNKNOWN:case th.DEADLINE_EXCEEDED:case th.RESOURCE_EXHAUSTED:case th.INTERNAL:case th.UNAVAILABLE:case th.UNAUTHENTICATED:return!1;case th.INVALID_ARGUMENT:case th.NOT_FOUND:case th.ALREADY_EXISTS:case th.PERMISSION_DENIED:case th.FAILED_PRECONDITION:case th.ABORTED:case th.OUT_OF_RANGE:case th.UNIMPLEMENTED:case th.DATA_LOSS:return!0}}function zp(e){if(void 0===e)return Yf("GRPC error has no .code"),th.UNKNOWN;switch(e){case Fp.OK:return th.OK;case Fp.CANCELLED:return th.CANCELLED;case Fp.UNKNOWN:return th.UNKNOWN;case Fp.DEADLINE_EXCEEDED:return th.DEADLINE_EXCEEDED;case Fp.RESOURCE_EXHAUSTED:return th.RESOURCE_EXHAUSTED;case Fp.INTERNAL:return th.INTERNAL;case Fp.UNAVAILABLE:return th.UNAVAILABLE;case Fp.UNAUTHENTICATED:return th.UNAUTHENTICATED;case Fp.INVALID_ARGUMENT:return th.INVALID_ARGUMENT;case Fp.NOT_FOUND:return th.NOT_FOUND;case Fp.ALREADY_EXISTS:return th.ALREADY_EXISTS;case Fp.PERMISSION_DENIED:return th.PERMISSION_DENIED;case Fp.FAILED_PRECONDITION:return th.FAILED_PRECONDITION;case Fp.ABORTED:return th.ABORTED;case Fp.OUT_OF_RANGE:return th.OUT_OF_RANGE;case Fp.UNIMPLEMENTED:return th.UNIMPLEMENTED;case Fp.DATA_LOSS:return th.DATA_LOSS;default:return Zf()}}(Vp=Fp||(Fp={}))[Vp.OK=0]="OK",Vp[Vp.CANCELLED=1]="CANCELLED",Vp[Vp.UNKNOWN=2]="UNKNOWN",Vp[Vp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vp[Vp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vp[Vp.NOT_FOUND=5]="NOT_FOUND",Vp[Vp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vp[Vp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vp[Vp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vp[Vp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vp[Vp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vp[Vp.ABORTED=10]="ABORTED",Vp[Vp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vp[Vp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vp[Vp.INTERNAL=13]="INTERNAL",Vp[Vp.UNAVAILABLE=14]="UNAVAILABLE",Vp[Vp.DATA_LOSS=15]="DATA_LOSS";var Kp=function(){function e(t,n){I(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return E(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){wh(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return xh(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Gp=function(){function e(t,n){I(this,e),this.comparator=t,this.root=n||Hp.EMPTY}return E(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Hp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Hp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Wp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Wp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Wp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Wp(this.root,e,this.comparator,!0)}}]),e}(),Wp=function(){function e(t,n,r,i){I(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return E(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Hp=function(){function e(t,n,r,i,a){I(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return E(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Zf();if(this.right.isRed())throw Zf();var e=this.left.check();if(e!==this.right.check())throw Zf();return e+(this.isRed()?0:1)}}]),e}();Hp.EMPTY=null,Hp.RED=!0,Hp.BLACK=!1,Hp.EMPTY=new(function(){function e(){I(this,e),this.size=0}return E(e,[{key:"key",get:function(){throw Zf()}},{key:"value",get:function(){throw Zf()}},{key:"color",get:function(){throw Zf()}},{key:"left",get:function(){throw Zf()}},{key:"right",get:function(){throw Zf()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Hp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Qp=function(){function e(t){I(this,e),this.comparator=t,this.data=new Gp(this.comparator)}return E(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Yp(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Yp(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Yp=function(){function e(t){I(this,e),this.iter=t}return E(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Xp(e){return e.hasNext()?e.getNext():void 0}var Jp=new Gp(Bh.comparator);function Zp(){return Jp}var $p=new Gp(Bh.comparator);function ev(){return $p}function tv(){return new Kp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var nv=new Gp(Bh.comparator),rv=new Qp(Bh.comparator);function iv(){for(var e=rv,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var av=new Qp(vh);function ov(){return av}var uv=function(){function e(t,n,r,i,a){I(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return E(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,sv.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(kh.min(),r,ov(),Zp(),iv())}}]),e}(),sv=function(){function e(t,n,r,i,a){I(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return E(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Ch.EMPTY_BYTE_STRING,n,iv(),iv(),iv())}}]),e}(),cv=E((function e(t,n,r,i){I(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),lv=E((function e(t,n){I(this,e),this.targetId=t,this.$=n})),fv=E((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ch.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;I(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),hv=function(){function e(){I(this,e),this.B=0,this.L=vv(),this.U=Ch.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return E(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=iv(),t=iv(),n=iv();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Zf()}})),new sv(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=vv()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),dv=function(){function e(t){I(this,e),this.nt=t,this.st=new Map,this.it=Zp(),this.rt=pv(),this.ot=new Qp(vh)}return E(e,[{key:"ut",value:function(e){var t,n=b(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Zf()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Ed(i))if(0===n){var a=new Bh(i.path);this.ct(t,a,fd.newNoDocument(a,kh.min()))}else $f(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Ed(a.target)){var o=new Bh(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,fd.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=iv();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new uv(e,n,this.ot,this.it,r);return this.it=Zp(),this.rt=pv(),this.ot=new Qp(vh),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new hv,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Qp(vh),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Qf("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new hv),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function pv(){return new Gp(Bh.comparator)}function vv(){return new Gp(Bh.comparator)}var yv={asc:"ASCENDING",desc:"DESCENDING"},mv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gv=E((function e(t,n){I(this,e),this.databaseId=t,this.N=n}));function kv(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bv(e,t){return e.N?t.toBase64():t.toUint8Array()}function wv(e,t){return kv(e,t.toTimestamp())}function xv(e){return $f(!!e),kh.fromTimestamp(function(e){var t=Ah(e);return new gh(t.seconds,t.nanos)}(e))}function Iv(e,t){return function(e){return new _h(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _v(e){var t=_h.fromString(e);return $f(Hv(t)),t}function Ev(e,t){return Iv(e.databaseId,t.path)}function Sv(e,t){var n=_v(t);if(n.get(1)!==e.databaseId.projectId)throw new nh(th.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nh(th.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bh(Av(n))}function Tv(e,t){return Iv(e.databaseId,t)}function Cv(e){var t=_v(e);return 4===t.length?_h.emptyPath():Av(t)}function Nv(e){return new _h(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Av(e){return $f(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dv(e,t,n){return{name:Ev(e,t),fields:n.value.mapValue.fields}}function Rv(e,t,n){var r=Sv(e,t.name),i=xv(t.updateTime),a=new cd({mapValue:{fields:t.fields}}),o=fd.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Pv(e,t){return"found"in t?function(e,t){$f(!!t.found),t.found.name,t.found.updateTime;var n=Sv(e,t.found.name),r=xv(t.found.updateTime),i=new cd({mapValue:{fields:t.found.fields}});return fd.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){$f(!!t.missing),$f(!!t.readTime);var n=Sv(e,t.missing),r=xv(t.readTime);return fd.newNoDocument(n,r)}(e,t):Zf()}function Ov(e,t){var n;if(t instanceof Rp)n={update:Dv(e,t.key,t.value)};else if(t instanceof Up)n={delete:Ev(e,t.key)};else if(t instanceof Pp)n={update:Dv(e,t.key,t.data),updateMask:Wv(t.fieldMask)};else{if(!(t instanceof jp))return Zf();n={verify:Ev(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof pp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mp)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kp)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Zf()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Zf()}(e,t.precondition)),n}function Lv(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?_p.updateTime(xv(e.updateTime)):void 0!==e.exists?_p.exists(e.exists):_p.none()}(t.currentDocument):_p.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)$f("REQUEST_TIME"===t.setToServerValue),n=new pp;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new vp(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new mp(i)}else"increment"in t?n=new kp(e,t.increment):Zf();var a=Sh.fromServerFormat(t.fieldPath);return new xp(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Sv(e,t.update.name),a=new cd({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Th(t.map((function(e){return Sh.fromServerFormat(e)})))}(t.updateMask);return new Pp(i,a,o,n,r)}return new Rp(i,a,n,r)}if(t.delete){var u=Sv(e,t.delete);return new Up(u,n)}if(t.verify){var s=Sv(e,t.verify);return new jp(s,n)}return Zf()}function Mv(e,t){return{documents:[Tv(e,t.path)]}}function Fv(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Tv(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Tv(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(td(e.value))return{unaryFilter:{field:qv(e.field),op:"IS_NAN"}};if(ed(e.value))return{unaryFilter:{field:qv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(td(e.value))return{unaryFilter:{field:qv(e.field),op:"IS_NOT_NAN"}};if(ed(e.value))return{unaryFilter:{field:qv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qv(e.field),op:Bv(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:qv(e.field),direction:jv(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Vh(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Vv(e){var t=Cv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$f(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Uv(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ud(zv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Vh(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Vd(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Vd(n,t)}(n.endAt)),Kd(t,i,u,o,s,"F",c,l)}function Uv(e){return e?void 0!==e.unaryFilter?[Gv(e)]:void 0!==e.fieldFilter?[Kv(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Uv(e)})).reduce((function(e,t){return e.concat(t)})):Zf():[]}function jv(e){return yv[e]}function Bv(e){return mv[e]}function qv(e){return{fieldPath:e.canonicalString()}}function zv(e){return Sh.fromServerFormat(e.fieldPath)}function Kv(e){return Nd.create(zv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zf()}}(e.fieldFilter.op),e.fieldFilter.value)}function Gv(e){switch(e.unaryFilter.op){case"IS_NAN":var t=zv(e.unaryFilter.field);return Nd.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=zv(e.unaryFilter.field);return Nd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zv(e.unaryFilter.field);return Nd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zv(e.unaryFilter.field);return Nd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Zf()}}function Wv(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Hv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Qv(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Xv(t)),t=Yv(e.get(n),t);return Xv(t)}function Yv(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Xv(e){return e+"\x01\x01"}function Jv(e){var t=e.length;if($f(t>=2),2===t)return $f("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),_h.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Zf(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Zf()}a=o+2}return new _h(r)}var Zv=["userId","batchId"];function $v(e,t){return[e,Qv(t)]}function ey(e,t,n){return[e,Qv(t),n]}var ty={},ny=["prefixPath","collectionGroup","readTime","documentId"],ry=["prefixPath","collectionGroup","documentId"],iy=["collectionGroup","readTime","prefixPath","documentId"],ay=["canonicalId","targetId"],oy=["targetId","path"],uy=["path","targetId"],sy=["collectionId","parent"],cy=["indexId","uid"],ly=["uid","sequenceNumber"],fy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hy=["indexId","uid","orderedDocumentKey"],dy=["userId","collectionPath","documentId"],py=["userId","collectionPath","largestBatchId"],vy=["userId","collectionGroup","largestBatchId"],yy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),my=[].concat(T(yy),["documentOverlays"]),gy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ky=[].concat(gy,["indexConfiguration","indexState","indexEntries"]),by="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wy=function(){function e(){I(this,e),this.onCommittedListeners=[]}return E(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),xy=function(){function e(t){var n=this;I(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return E(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Zf(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Iy=function(){function e(t,n){var r=this;I(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new rh,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Sy(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Dy(e.target.error);r.At.reject(new Sy(t,n))}}return E(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Qf("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Cy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Sy(n,t)}}}]),e}(),_y=function(){function e(t,n,r){I(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(j())&&Yf("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return E(e,[{key:"Nt",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Qf("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Sy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new nh(th.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new nh(th.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Sy(t,n))},i.onupgradeneeded=function(e){Qf("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Qf("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=x(A().mark((function e(t,n,r,i){var a,o,u,s,c=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(A().mark((function e(){var n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Iy.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),xy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Qf("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Qf("SimpleDb","Removing database:",e),Ny(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!W())return!1;if(e.St())return!0;var t=j(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ey=function(){function e(t){I(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return E(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Ny(this.Ft.delete())}}]),e}(),Sy=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,th.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return E(n)}(nh);function Ty(e){return"IndexedDbTransactionError"===e.name}var Cy=function(){function e(t){I(this,e),this.store=t}return E(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Qf("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Qf("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ny(n)}},{key:"add",value:function(e){return Qf("SimpleDb","ADD",this.store.name,e,e),Ny(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ny(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Qf("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Qf("SimpleDb","DELETE",this.store.name,e),Ny(this.store.delete(e))}},{key:"count",value:function(){return Qf("SimpleDb","COUNT",this.store.name),Ny(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new xy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new xy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Qf("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new xy((function(n,r){t.onerror=function(e){var t=Dy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new xy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ey(i),o=t(i.primaryKey,i.value,a);if(o instanceof xy){var u=o.catch((function(e){return a.done(),xy.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return xy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ny(e){return new xy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Dy(e.target.error);n(t)}}))}var Ay=!1;function Dy(e){var t=_y.Vt(j());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new nh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ay||(Ay=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ry=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return E(n)}(wy);function Py(e,t){var n=eh(e);return _y.xt(n.Ht,t)}var Oy=function(){function e(t,n,r,i){I(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return E(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Tp(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=b(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Cp(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Cp(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(kh.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),iv())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&yh(this.mutations,e.mutations,(function(e,t){return Ap(e,t)}))&&yh(this.baseMutations,e.baseMutations,(function(e,t){return Ap(e,t)}))}}]),e}(),Ly=function(){function e(t,n,r,i){I(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return E(e,null,[{key:"from",value:function(t,n,r){$f(t.mutations.length===r.length);for(var i=nv,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),My=function(){function e(t,n){I(this,e),this.largestBatchId=t,this.mutation=n}return E(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Fy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:kh.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kh.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ch.EMPTY_BYTE_STRING;I(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return E(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Vy=E((function e(t){I(this,e),this.Jt=t}));function Uy(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ev(e,t.key),fields:t.data.value.mapValue.fields,updateTime:kv(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:By(t.version)};else{if(!t.isUnknownDocument())return Zf();r.unknownDocument={path:n.path.toArray(),version:By(t.version)}}return r}function jy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function By(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qy(e){var t=new gh(e.seconds,e.nanoseconds);return kh.fromTimestamp(t)}function zy(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Lv(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Lv(e.Jt,t)})),u=gh.fromMillis(t.localWriteTimeMs);return new Oy(t.batchId,u,n,o)}function Ky(e){var t,n,r=qy(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?qy(e.lastLimboFreeSnapshotVersion):kh.min();return void 0!==e.query.documents?($f(1===(n=e.query).documents.length),t=Zd(Gd(Cv(n.documents[0])))):t=function(e){return Zd(Vv(e))}(e.query),new Fy(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ch.fromBase64String(e.resumeToken))}function Gy(e,t){var n,r=By(t.snapshotVersion),i=By(t.lastLimboFreeSnapshotVersion);n=Ed(t.target)?Mv(e.Jt,t.target):Fv(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Id(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Wy(e){var t=Vv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$d(t,t.limit,"L"):t}function Hy(e,t){return new My(t.largestBatchId,Lv(e.Jt,t.overlayMutation))}function Qy(e,t){var n=t.path.lastSegment();return[e,Qv(t.path.popLast()),n]}var Yy=function(){function e(){I(this,e)}return E(e,[{key:"getBundleMetadata",value:function(e,t){return Xy(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:qy(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Xy(e).put({bundleId:(n=t).id,createTime:By(xv(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Jy(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Wy(t.bundledQuery),readTime:qy(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Jy(e).put(function(e){return{name:e.name,readTime:By(xv(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Xy(e){return Py(e,"bundles")}function Jy(e){return Py(e,"namedQueries")}var Zy=function(){function e(t,n){I(this,e),this.M=t,this.userId=n}return E(e,[{key:"getOverlay",value:function(e,t){var n=this;return $y(e).get(Qy(this.userId,t)).next((function(e){return e?Hy(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new My(t,a);i.push(r.Xt(e,o))})),xy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Qv(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push($y(e).Qt("collectionPathOverlayIndex",i))})),xy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=tv(),a=Qv(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $y(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Hy(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=tv(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $y(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Hy(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return $y(e).put(function(e,t,n){var r=c(Qy(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ov(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function $y(e){return Py(e,"documentOverlays")}var em=function(){function e(){I(this,e)}return E(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Dh(e.integerValue));else if("doubleValue"in e){var n=Dh(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Uh(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Rh(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?id(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Zf()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Bh.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function tm(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function nm(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=tm(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}em.fe=new em;var rm=function(){function e(){I(this,e),this.buffer=new Uint8Array(1024),this.position=0}return E(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=nm(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=nm(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),im=function(){function e(t){I(this,e),this.De=t}return E(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),am=function(){function e(t){I(this,e),this.De=t}return E(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),om=function(){function e(){I(this,e),this.De=new rm,this.Ce=new im(this.De),this.xe=new am(this.De)}return E(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),um=function(){function e(t,n,r,i){I(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return E(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function sm(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=cm(e.arrayValue,t.arrayValue))?n:0!==(n=cm(e.directionalValue,t.directionalValue))?n:Bh.comparator(e.documentKey,t.documentKey)}function cm(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var lm=function(){function e(t){I(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=b(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return E(e,[{key:"$e",value:function(e){var t=dd(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=pd(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=b(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),fm=function(){function e(){I(this,e),this.qe=new hm}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),xy.resolve()}},{key:"getCollectionParents",value:function(e,t){return xy.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return xy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return xy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return xy.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return xy.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return xy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return xy.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return xy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return xy.resolve()}}]),e}(),hm=function(){function e(){I(this,e),this.index={}}return E(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qp(_h.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Qp(_h.comparator)).toArray()}}]),e}(),dm=new Uint8Array(0),pm=function(){function e(t,n){I(this,e),this.user=t,this.databaseId=n,this.Ke=new hm,this.Ge=new Kp((function(e){return Id(e)}),(function(e,t){return _d(e,t)})),this.uid=t.uid||""}return E(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Qv(i)};return vm(e).put(a)}return xy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[mh(t),""],!1,!0);return vm(e).qt(r).next((function(e){var r,i=b(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Jv(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=mm(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=mm(e),r=gm(e),i=ym(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=ym(e),i=!0,a=new Map;return xy.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=iv(),o=[];return xy.forEach(a,(function(i,a){var u;Qf("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Id(t)));var s=function(e,t){var n=dd(t);if(void 0===n)return null;var r,i=b(Sd(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=b(pd(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=b(Sd(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=b(pd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Td(e,o.fieldPath,e.startAt):Cd(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Vd(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=b(pd(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Cd(e,o.fieldPath,e.endAt):Td(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Vd(r,i)}(a,i),h=n.je(i,a,l),d=n.je(i,a,f),p=n.We(i,a,c),v=n.ze(i.indexId,s,h,!!l&&l.inclusive,d,!!f&&f.inclusive,p);return xy.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Bh.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return xy.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):dm,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,T(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new um(e,Bh.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new um(e,Bh.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new um(e,Bh.empty(),dm,dm)}},{key:"getFieldIndex",value:function(e,t){var n=new lm(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new om,i=b(pd(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);em.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new om;return em.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new om;return em.fe.Zt(Jh(this.databaseId,t),n.Ne(function(e){var t=pd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new om);var i,a=0,o=b(pd(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=b(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&$h(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);em.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=T(e),a=[],o=b(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=b(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new om;f.seed(l.Se()),em.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Nd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=mm(e),i=gm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return xy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new yd(t.sequenceNumber,new kd(qy(t.readTime),new Bh(Jv(t.documentKey)),t.largestBatchId)):yd.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new vd(Sh.fromServerFormat(n),r)}));return new hd(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:vh(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=mm(e),a=gm(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return xy.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:By(r.readTime),documentKey:Qv(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return xy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?xy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),xy.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?xy.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return ym(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return ym(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=ym(e),i=new Qp(sm);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new um(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Qp(sm),r=this.Ze(t,e);if(null==r)return n;var i=dd(t);if(null!=i){var a=e.data.field(i.fieldPath);if($h(a)){var o,u=b(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new um(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new um(t.indexId,e.key,dm,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Qf("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Xp(a),s=Xp(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Xp(o)):l?(i(u),u=Xp(a)):(u=Xp(a),s=Xp(o))}}(r,i,sm,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),xy.waitFor(o)}},{key:"rn",value:function(e){var t=1;return gm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return sm(e,t)})).filter((function(e,t,n){return!t||0!==sm(e,n[t-1])}));var r=[];r.push(e);var i,a=b(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=sm(o,e),s=sm(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,dm,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,dm,[]]));return c}}]),e}();function vm(e){return Py(e,"collectionParents")}function ym(e){return Py(e,"indexEntries")}function mm(e){return Py(e,"indexConfiguration")}function gm(e){return Py(e,"indexState")}var km={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bm=function(){function e(t,n,r){I(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return E(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function wm(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){$f(1===u)})));var c,l=[],f=b(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ey(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return xy.waitFor(a).next((function(){return l}))}function xm(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Zf();t=e.noDocument}return JSON.stringify(t).length}bm.DEFAULT_COLLECTION_PERCENTILE=10,bm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bm.DEFAULT=new bm(41943040,bm.DEFAULT_COLLECTION_PERCENTILE,bm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bm.DISABLED=new bm(-1,0,0);var Im=function(){function e(t,n,r,i){I(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return E(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Em(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Sm(e),o=Em(e);return o.add({}).next((function(u){$f("number"==typeof u);var s,c=new Oy(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ov(e.Jt,t)})),i=n.mutations.map((function(t){return Ov(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Qp((function(e,t){return vh(e.canonicalString(),t.canonicalString())})),d=b(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ey(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ty))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),xy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Em(e).get(t).next((function(e){return e?($f(e.userId===n.userId),zy(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?xy.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Em(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&($f(t.batchId>=r),a=zy(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Em(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Em(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return zy(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=$v(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Sm(e).Wt({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Jv(l);if(s===n.userId&&t.path.isEqual(h))return Em(e).get(f).next((function(e){if(!e)throw Zf();$f(e.userId===n.userId),a.push(zy(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qp(vh),i=[];return t.forEach((function(t){var a=$v(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Sm(e).Wt({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Jv(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),xy.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=$v(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Qp(vh);return Sm(e).Wt({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Jv(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Em(e).get(t).next((function(e){if(null===e)throw Zf();$f(e.userId===n.userId),r.push(zy(n.M,e))})))})),xy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return wm(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),xy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return xy.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Sm(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Jv(e[1]);i.push(a)}else r.done()})).next((function(){$f(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return _m(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Tm(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return $f(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function _m(e,t,n){var r=$v(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Sm(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Em(e){return Py(e,"mutations")}function Sm(e){return Py(e,"documentMutations")}function Tm(e){return Py(e,"mutationQueues")}var Cm=function(){function e(t){I(this,e),this.mn=t}return E(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Nm=function(){function e(t,n){I(this,e),this.referenceDelegate=t,this.M=n}return E(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Cm(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return kh.fromTimestamp(new gh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Am(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return $f(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Am(e).Wt((function(o,u){var s=Ky(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return xy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Am(e).Wt((function(e,n){var r=Ky(n);t(r)}))}},{key:"pn",value:function(e){return Dm(e).get("targetGlobalKey").next((function(e){return $f(null!==e),e}))}},{key:"In",value:function(e,t){return Dm(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Am(e).put(Gy(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Id(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Am(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ky(n);_d(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Rm(e);return t.forEach((function(t){var o=Qv(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),xy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Rm(e);return xy.forEach(t,(function(t){var a=Qv(t.path);return xy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Rm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rm(e),i=iv();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Jv(e[1]),a=new Bh(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Qv(t.path),r=IDBKeyRange.bound([n],[mh(n)],!1,!0),i=0;return Rm(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Am(e).get(t).next((function(e){return e?Ky(e):null}))}}]),e}();function Am(e){return Py(e,"targets")}function Dm(e){return Py(e,"targetGlobal")}function Rm(e){return Py(e,"targetDocuments")}function Pm(e){return Om.apply(this,arguments)}function Om(){return Om=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===th.FAILED_PRECONDITION&&t.message===by){e.next=2;break}throw t;case 2:Qf("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Om.apply(this,arguments)}function Lm(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=vh(r,o);return 0===s?vh(i,u):s}var Mm=function(){function e(t){I(this,e),this.An=t,this.buffer=new Qp(Lm),this.Rn=0}return E(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Lm(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Fm=function(){function e(t,n){I(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return E(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Qf("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ty(n.t0)){n.next=12;break}Qf("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Pm(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Vm=function(){function e(t,n){I(this,e),this.Dn=t,this.params=n}return E(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return xy.resolve(hh.A);var r=new Mm(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Qf("LruGarbageCollector","Garbage collection skipped; disabled"),xy.resolve(km)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Qf("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),km):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Qf("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Hf()<=ye.DEBUG&&Qf("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),xy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Um=function(){function e(t,n){I(this,e),this.db=t,this.garbageCollector=function(e,t){return new Vm(e,t)}(this,n)}return E(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return jm(e,n)}},{key:"removeReference",value:function(e,t,n){return jm(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return jm(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Tm(e).zt((function(r){return _m(e,r,t).next((function(e){return e&&(n=!0),xy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,kh.min()),Rm(e).delete([0,Qv(o.path)])}))}));i.push(s)}})).next((function(){return xy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return jm(e,t)}},{key:"Mn",value:function(e,t){var n,r=Rm(e),i=hh.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==hh.A&&t(new Bh(Jv(n)),i),i=s,n=u):i=hh.A})).next((function(){i!==hh.A&&t(new Bh(Jv(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function jm(e,t){return Rm(e).put(function(e,t){return{targetId:0,path:Qv(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Bm=function(){function e(){I(this,e),this.changes=new Kp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return E(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,fd.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?xy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),qm=function(){function e(t){I(this,e),this.M=t}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Gm(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Gm(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],jy(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=fd.newInvalidDocument(t);return Gm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Wm(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:fd.newInvalidDocument(t)};return Gm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Wm(t))},(function(e,i){r={document:n.$n(t,i),size:xm(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Zp();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=Zp(),i=new Gp(Bh.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,xm(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return xy.resolve();var r=new Qp(Qm);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Wm(r.first()),Wm(r.last())),a=r.getIterator(),o=a.getNext();return Gm(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Bh.fromSegments([].concat(T(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Qm(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Wm(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),jy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gm(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Zp(),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Bh.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Zp(),o=Hm(t,n),u=Hm(t,kd.max());return Gm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Bh.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new zm(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Km(e).get("remoteDocumentGlobalKey").next((function(e){return $f(!!e),e}))}},{key:"Fn",value:function(e,t){return Km(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Rv(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Bh.fromSegments(t.noDocument.path),i=qy(t.noDocument.readTime);n=fd.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Zf();var a=Bh.fromSegments(t.unknownDocument.path),o=qy(t.unknownDocument.version);n=fd.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new gh(e[0],e[1]);return kh.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(kh.min()))return n}return fd.newInvalidDocument(e)}}]),e}(),zm=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Kp((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Qp((function(e,t){return vh(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Uy(t.Kn.M,o);i=i.add(a.path.popLast());var c=xm(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Uy(t.Kn.M,o.convertToNoDocument(kh.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),xy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Bm);function Km(e){return Py(e,"remoteDocumentGlobal")}function Gm(e){return Py(e,"remoteDocumentsV14")}function Wm(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Hm(e,t){var n=t.documentKey.path.toArray();return[e,jy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Qm(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=vh(n[a],r[a]))return i;return(i=vh(n.length,r.length))||((i=vh(n[n.length-2],r[r.length-2]))||vh(n[n.length-1],r[r.length-1]))}var Ym=function(){function e(t){I(this,e),this.M=t}return E(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Iy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zv,{unique:!0}),e.createObjectStore("documentMutations")}(e),Xm(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=xy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Xm(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zv,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return xy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:dy});t.createIndex("collectionPathOverlayIndex",py,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",vy,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ny});t.createIndex("documentKeyIndex",ry),t.createIndex("collectionGroupIndex",iy)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:cy}).createIndex("sequenceNumberIndex",ly,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:fy}).createIndex("documentKeyIndex",hy,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=xm(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return xy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return xy.forEach(r,(function(r){$f(r.userId===n.userId);var i=zy(t.M,r);return wm(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new _h(n),o=function(e){return[0,Qv(e)]}(a);r.push(t.get(o).next((function(n){return n?xy.resolve():function(n){return t.put({targetId:0,path:Qv(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return xy.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:sy});var n=t.store("collectionParents"),r=new hm,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Qv(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new _h(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Jv(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Ky(r),a=Gy(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Bh(_h.fromString(i.document.name).popFirst(5)):i.noDocument?Bh.fromSegments(i.noDocument.path):i.unknownDocument?Bh.fromSegments(i.unknownDocument.path):Zf()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return xy.waitFor(r)}))}}]),e}();function Xm(e){e.createObjectStore("targetDocuments",{keyPath:oy}).createIndex("documentTargetsIndex",uy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ay,{unique:!0}),e.createObjectStore("targetGlobal")}var Jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Zm=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(I(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new nh(th.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Um(this,i),this.hs=n+"main",this.M=new Vy(s),this.ls=new _y(this.hs,this.ts,new Ym(this.M)),this.fs=new Nm(this.referenceDelegate,this.M),this.ds=function(e){return new qm(e)}(this.M),this._s=new Yy,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&Yf("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return E(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new nh(th.FAILED_PRECONDITION,Jm);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new hh(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=x(A().mark((function n(r){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=x(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return eg(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(Ty(t))return Qf("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Qf("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return $m(e).get("owner").next((function(e){return xy.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return eg(e).delete(this.clientId)}},{key:"vs",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Py(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return xy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=b(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?xy.resolve(!0):$m(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new nh(th.FAILED_PRECONDITION,Jm);return!1}}return!(!t.networkEnabled||!t.inForeground)||eg(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Qf("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=x(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ry(e,hh.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return eg(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Im.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new pm(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Zy.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Qf("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?ky:13===i?gy:12===i?my:11===i?yy:void Zf();return this.ls.runTransaction(e,o,u,(function(i){return a=new Ry(i,r.es?r.es.next():hh.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw Yf("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new nh(th.FAILED_PRECONDITION,by);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return $m(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new nh(th.FAILED_PRECONDITION,Jm)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $m(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=$m(e);return n.get("owner").next((function(e){return t.bs(e)?(Qf("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):xy.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Yf("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Qf("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Yf("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(zu){Yf("Failed to set zombie client id.",zu)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(zu){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return _y.vt()}}]),e}();function $m(e){return Py(e,"owner")}function eg(e){return Py(e,"clientMetadata")}function tg(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ng=function(){function e(t,n,r){I(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return E(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=b(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=b(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Bh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Xd(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Bh(t)).next((function(e){var t=ev();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ev();return this.indexManager.getCollectionParents(e,i).next((function(o){return xy.forEach(o,(function(o){var u=function(e,t){return new zd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=b(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=fd.newInvalidDocument(s),r=r.insert(s,c)),Cp(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){rp(t,n)||(r=r.remove(e))})),r}))}}]),e}(),rg=function(){function e(t,n,r,i){I(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return E(e,null,[{key:"Ys",value:function(t,n){var r,i=iv(),a=iv(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ig=function(){function e(){I(this,e)}return E(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(kh.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(Wd(t)||Hd(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(Hf()<=ye.DEBUG&&Qf("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),np(t)),i.Zs.Qs(e,t,md(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new Qp(ap(e));return t.forEach((function(t,r){rp(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return Hf()<=ye.DEBUG&&Qf("QueryEngine","Using full collection scan to execute query:",np(t)),this.Zs.Qs(e,t,kd.min())}}]),e}(),ag=function(){function e(t,n,r,i){I(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new Gp(vh),this.ri=new Kp((function(e){return Id(e)}),_d),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return E(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new ng(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function og(e,t,n,r){return new ag(e,t,n,r)}function ug(e,t){return sg.apply(this,arguments)}function sg(){return sg=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=iv(),s=b(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=b(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=b(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=b(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),sg.apply(this,arguments)}function cg(e,t){var n=eh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=xy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);$f(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function lg(e){var t=eh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function fg(e,t){var n=eh(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ch.EMPTY_BYTE_STRING,kh.min()).withLastLimboFreeSnapshotVersion(kh.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=Zp();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(hg(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(kh.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return xy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function hg(e,t,n){var r=iv();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Zp();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(kh.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Qf("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function dg(e,t){var n=eh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function pg(e,t){var n=eh(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,xy.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new Fy(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function vg(e,t,n){return yg.apply(this,arguments)}function yg(){return yg=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eh(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ty(e.t1)){e.next=12;break}throw e.t1;case 12:Qf("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),yg.apply(this,arguments)}function mg(e,t,n){var r=eh(e),i=kh.min(),a=iv();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=eh(e),i=r.ri.get(n);return void 0!==i?xy.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,Zd(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:kh.min(),n?a:iv())})).next((function(e){return bg(r,ip(t),e),{documents:e,li:a}}))}))}function gg(e,t){var n=eh(e),r=eh(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function kg(e,t){var n=eh(e),r=n.oi.get(t)||kh.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,md(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return bg(n,t,e),e}))}function bg(e,t,n){var r=kh.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function wg(e,t,n,r){return xg.apply(this,arguments)}function xg(){return xg=x(A().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=eh(t),o=iv(),u=Zp(),s=b(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.fi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.di(l)).setReadTime(n._i(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,pg(a,function(e){return Zd(Gd(_h.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return hg(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),xg.apply(this,arguments)}function Ig(e,t){return _g.apply(this,arguments)}function _g(){return _g=x(A().mark((function e(t,n){var r,i,a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:iv(),e.next=3,pg(t,Zd(Wy(n.bundledQuery)));case 3:return i=e.sent,a=eh(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=xv(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Ch.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),_g.apply(this,arguments)}var Eg=function(){function e(t){I(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return E(e,[{key:"getBundleMetadata",value:function(e,t){return xy.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:xv(n.createTime)}),xy.resolve()}},{key:"getNamedQuery",value:function(e,t){return xy.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:Wy(e.bundledQuery),readTime:xv(e.readTime)}}(t)),xy.resolve()}}]),e}(),Sg=function(){function e(){I(this,e),this.overlays=new Gp(Bh.comparator),this.gi=new Map}return E(e,[{key:"getOverlay",value:function(e,t){return xy.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),xy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),xy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=tv(),i=t.length+1,a=new Bh(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return xy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Gp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=tv(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=tv(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return xy.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new My(t,n));var a=this.gi.get(t);void 0===a&&(a=iv(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),Tg=function(){function e(){I(this,e),this.yi=new Qp(Cg.pi),this.Ii=new Qp(Cg.Ti)}return E(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Cg(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new Cg(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new Bh(new _h([])),r=new Cg(n,e),i=new Cg(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new Bh(new _h([])),n=new Cg(t,e),r=new Cg(t,e+1),i=iv();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Cg(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Cg=function(){function e(t,n){I(this,e),this.key=t,this.vi=n}return E(e,null,[{key:"pi",value:function(e,t){return Bh.comparator(e.key,t.key)||vh(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return vh(e.vi,t.vi)||Bh.comparator(e.key,t.key)}}]),e}(),Ng=function(){function e(t,n){I(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Qp(Cg.pi)}return E(e,[{key:"checkEmpty",value:function(e){return xy.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Oy(i,t,n,r);this.Bs.push(a);var o,u=b(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new Cg(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return xy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return xy.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return xy.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return xy.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return xy.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Cg(t,0),i=new Cg(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),xy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qp(vh);return t.forEach((function(e){var t=new Cg(e,0),i=new Cg(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),xy.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Bh.isDocumentKey(i)||(i=i.child(""));var a=new Cg(new Bh(i),0),o=new Qp(vh);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),xy.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;$f(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return xy.forEach(t.mutations,(function(i){var a=new Cg(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Cg(t,0),r=this.Di.firstAfterOrEqual(n);return xy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,xy.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Ag=function(){function e(t){I(this,e),this.Mi=t,this.docs=new Gp(Bh.comparator),this.size=0}return E(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return xy.resolve(n?n.document.mutableCopy():fd.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Zp();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():fd.newInvalidDocument(e))})),xy.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Zp(),i=new Bh(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||bd(gd(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return xy.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Zf()}},{key:"Oi",value:function(e,t){return xy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Dg(this)}},{key:"getSize",value:function(e){return xy.resolve(this.size)}}]),e}(),Dg=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).Kn=e,r}return E(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),xy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Bm),Rg=function(){function e(t){I(this,e),this.persistence=t,this.Fi=new Kp((function(e){return Id(e)}),_d),this.lastRemoteSnapshotVersion=kh.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Tg,this.targetCount=0,this.Li=Cm.gn()}return E(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),xy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return xy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return xy.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),xy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),xy.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new Cm(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,xy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),xy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,xy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),xy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return xy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return xy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),xy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),xy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),xy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return xy.resolve(n)}},{key:"containsKey",value:function(e,t){return xy.resolve(this.Bi.containsKey(t))}}]),e}(),Pg=function(){function e(t,n){var r=this;I(this,e),this.Ui={},this.overlays={},this.es=new hh(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Rg(this),this.indexManager=new fm,this.ds=new Ag((function(e){return r.referenceDelegate.qi(e)})),this.M=new Vy(n),this._s=new Eg(this.M)}return E(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Sg,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new Ng(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Qf("MemoryPersistence","Starting transaction:",e);var i=new Og(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return xy.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Og=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return E(n)}(wy),Lg=function(){function e(t){I(this,e),this.persistence=t,this.ji=new Tg,this.Wi=null}return E(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw Zf()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),xy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),xy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),xy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xy.forEach(this.Hi,(function(r){var i=Bh.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,kh.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return xy.or([function(){return xy.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function Mg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Fg(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Vg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ug=function(){function e(t,n,r,i){I(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return E(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new nh(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Yf("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),jg=function(){function e(t,n,r){I(this,e),this.targetId=t,this.state=n,this.error=r}return E(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new nh(i.error.code,i.error.message))),a?new e(t,i.state,r):(Yf("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Bg=function(){function e(t,n){I(this,e),this.clientId=t,this.activeTargetIds=n}return E(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ov(),o=0;i&&o<r.activeTargetIds.length;++o)i=jh(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Yf("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),qg=function(){function e(t,n){I(this,e),this.clientId=t,this.onlineState=n}return E(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Yf("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),zg=function(){function e(){I(this,e),this.activeTargetIds=ov()}return E(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Kg=function(){function e(t,n,r,i,a){I(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Gp(vh),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=Mg(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new zg),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return E(e,[{key:"start",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=b(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Mg(this.persistenceKey,i)))&&(o=Bg.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=b(this.rr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.sr(f)}catch(d){c.e(d)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Vg(this.persistenceKey,e));if(n){var r=jg.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Vg(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Qf("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Qf("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Qf("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Qf("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void Yf("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(x(A().mark((function e(){var r,i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=hh.A;if(null!=e)try{var n=JSON.parse(e);$f("number"==typeof n),t=n}catch(e){Yf("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==hh.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new Ug(this.currentUser,e,t,n),i=Fg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=Fg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=Vg(this.persistenceKey,e),i=new jg(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return Bg.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ug.Yi(new Kf(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return jg.Yi(r,t)}},{key:"mr",value:function(e){return qg.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:Qf("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=ov();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Gg=function(){function e(){I(this,e),this.$r=new zg,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return E(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new zg,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Wg=function(){function e(){I(this,e)}return E(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Hg=function(){function e(){var t=this;I(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return E(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){Qf("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Qf("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Qg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Yg=function(){function e(t){I(this,e),this.Wr=t.Wr,this.zr=t.zr}return E(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),Xg=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return E(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new qf;o.listenOnce(Ff.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Mf.NO_ERROR:var t=o.getResponseJson();Qf("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Mf.TIMEOUT:Qf("Connection",'RPC "'+e+'" timed out'),a(new nh(th.DEADLINE_EXCEEDED,"Request time out"));break;case Mf.HTTP_ERROR:var n=o.getStatus();if(Qf("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(th).indexOf(t)>=0?t:th.UNKNOWN}(r.status);a(new nh(u,r.message))}else a(new nh(th.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new nh(th.UNAVAILABLE,"Connection failed."));break;default:Zf()}}finally{Qf("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Of(),a=Lf(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new jf({})),this.ao(o.initMessageHeaders,t,n),B()||K()||j().indexOf("Electron/")>=0||G()||j().indexOf("MSAppHost/")>=0||z()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Qf("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Yg({Wr:function(e){l?Qf("Connection","Not sending because WebChannel is closed:",e):(c||(Qf("Connection","Opening WebChannel transport."),s.open(),c=!0),Qf("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Bf.EventType.OPEN,(function(){l||Qf("Connection","WebChannel transport opened.")})),h(s,Bf.EventType.CLOSE,(function(){l||(l=!0,Qf("Connection","WebChannel transport closed"),f.no())})),h(s,Bf.EventType.ERROR,(function(e){l||(l=!0,Xf("Connection","WebChannel transport errored:",e),f.no(new nh(th.UNAVAILABLE,"The operation could not be completed")))})),h(s,Bf.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];$f(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Qf("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Fp[e];if(void 0!==t)return zp(t)}(a),u=i.message;void 0===o&&(o=th.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new nh(o,u)),s.close()}else Qf("Connection","WebChannel received:",n),f.so(n)}})),h(a,Vf.STAT_EVENT,(function(e){e.stat===Uf.PROXY?Qf("Connection","Detected buffering proxy"):e.stat===Uf.NOPROXY&&Qf("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){I(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return E(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);Qf("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return Qf("RestConnection","Received: ",e),e}),(function(t){throw Xf("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=Qg[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function Jg(){return"undefined"!=typeof window?window:null}function Zg(){return"undefined"!=typeof document?document:null}function $g(e){return new gv(e,!0)}var ek=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;I(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return E(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&Qf("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),tk=function(){function e(t,n,r,i,a,o,u,s){I(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new ek(t,n)}return E(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===th.RESOURCE_EXHAUSTED?(Yf(n.toString()),Yf("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===th.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new nh(th.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return Qf("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(Qf("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),nk=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,u){var s;return I(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return E(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Zf()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?($f(void 0===t||"string"==typeof t),Ch.fromBase64String(t||"")):($f(void 0===t||t instanceof Uint8Array),Ch.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?th.UNKNOWN:zp(e.code);return new nh(t,e.message||"")}(o);n=new fv(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Sv(e,s.document.name),l=xv(s.document.updateTime),f=new cd({mapValue:{fields:s.document.fields}}),h=fd.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new cv(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Sv(e,v.document),m=v.readTime?xv(v.readTime):kh.min(),g=fd.newNoDocument(y,m),k=v.removedTargetIds||[];n=new cv([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Sv(e,b.document),x=b.removedTargetIds||[];n=new cv([],x,w,null)}else{if(!("filter"in t))return Zf();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new Bp(_),S=I.targetId;n=new lv(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return kh.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?kh.min():t.readTime?xv(t.readTime):kh.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Nv(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Ed(r)?{documents:Mv(e,r)}:{query:Fv(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=bv(e,t.resumeToken):t.snapshotVersion.compareTo(kh.min())>0&&(n.readTime=kv(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zf()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Nv(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(tk),rk=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,u){var s;return I(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return E(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,h(l(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if($f(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?($f(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?xv(e.updateTime):xv(t);return n.isEqual(kh.min())&&(n=xv(t)),new Ip(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=xv(e.commitTime);return this.listener.Yo(n,t)}return $f(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=Nv(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ov(t.M,e)}))};this.Fo(n)}}]),n}(tk),ik=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return I(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return E(n,[{key:"eu",value:function(){if(this.tu)throw new nh(th.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===th.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new nh(th.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===th.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new nh(th.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return E((function e(){I(this,e)}))}()),ak=function(){function e(t,n){I(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return E(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(Yf(t),this.iu=!1):Qf("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),ok=E((function e(t,n,r,i,a){var o=this;I(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr((function(e){r.enqueueAndForget(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=mk(o),!e.t0){e.next=5;break}return Qf("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eh(t)).fu.add(4),e.next=4,ck(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,uk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new ak(r,i)}));function uk(e){return sk.apply(this,arguments)}function sk(){return sk=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mk(t)){e.next=18;break}n=b(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),sk.apply(this,arguments)}function ck(e){return lk.apply(this,arguments)}function lk(){return lk=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),lk.apply(this,arguments)}function fk(e,t){var n=eh(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),yk(n)?vk(n):Wk(n).xo()&&dk(n,t))}function hk(e,t){var n=eh(e),r=Wk(n);n.lu.delete(t),r.xo()&&pk(n,t),0===n.lu.size&&(r.xo()?r.Mo():mk(n)&&n.wu.set("Unknown"))}function dk(e,t){e.mu.Z(t.targetId),Wk(e).jo(t)}function pk(e,t){e.mu.Z(t),Wk(e).Wo(t)}function vk(e){e.mu=new dv({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),Wk(e).start(),e.wu.ru()}function yk(e){return mk(e)&&!Wk(e).Co()&&e.lu.size>0}function mk(e){return 0===eh(e).fu.size}function gk(e){e.mu=void 0}function kk(e){return bk.apply(this,arguments)}function bk(){return bk=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){dk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),bk.apply(this,arguments)}function wk(e,t){return xk.apply(this,arguments)}function xk(){return xk=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gk(t),yk(t)?(t.wu.au(n),vk(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),xk.apply(this,arguments)}function Ik(e,t,n){return _k.apply(this,arguments)}function _k(){return _k=x(A().mark((function e(t,n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof fv&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Qf("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ek(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof cv?t.mu.ut(n):n instanceof lv?t.mu._t(n):t.mu.ht(n),r.isEqual(kh.min())){e.next=29;break}return e.prev=14,e.next=17,lg(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(Ch.EMPTY_BYTE_STRING,n.snapshotVersion)),pk(e,t);var r=new Fy(n.target,t,1,n.sequenceNumber);dk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Qf("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ek(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),_k.apply(this,arguments)}function Ek(e,t,n){return Sk.apply(this,arguments)}function Sk(){return Sk=x(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ty(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,ck(t);case 5:t.wu.set("Offline"),r||(r=function(){return lg(t.localStore)}),t.asyncQueue.enqueueRetryable(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qf("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,uk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Sk.apply(this,arguments)}function Tk(e,t){return t().catch((function(n){return Ek(e,n,t)}))}function Ck(e){return Nk.apply(this,arguments)}function Nk(){return Nk=x(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eh(t),r=Hk(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!Ak(n)){e.next=19;break}return e.prev=3,e.next=6,dg(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,Dk(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ek(n,e.t0);case 17:e.next=2;break;case 19:Rk(n)&&Pk(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Nk.apply(this,arguments)}function Ak(e){return mk(e)&&e.hu.length<10}function Dk(e,t){e.hu.push(t);var n=Hk(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Rk(e){return mk(e)&&!Hk(e).Co()&&e.hu.length>0}function Pk(e){Hk(e).start()}function Ok(e){return Lk.apply(this,arguments)}function Lk(){return Lk=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Hk(t).Zo();case 1:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}function Mk(e){return Fk.apply(this,arguments)}function Fk(){return Fk=x(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Hk(t),r=b(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}function Vk(e,t,n){return Uk.apply(this,arguments)}function Uk(){return Uk=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=Ly.from(i,n,r),e.next=3,Tk(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Ck(t);case 5:case"end":return e.stop()}}),e)}))),Uk.apply(this,arguments)}function jk(e,t){return Bk.apply(this,arguments)}function Bk(){return Bk=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Hk(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qp(i=n.code)||i===th.ABORTED){e.next=7;break}return r=t.hu.shift(),Hk(t).ko(),e.next=5,Tk(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Ck(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Rk(t)&&Pk(t);case 5:case"end":return e.stop()}}),e)}))),Bk.apply(this,arguments)}function qk(e,t){return zk.apply(this,arguments)}function zk(){return zk=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=eh(t)).asyncQueue.verifyOperationInProgress(),Qf("RemoteStore","RemoteStore received new credentials"),i=mk(r),r.fu.add(3),e.next=6,ck(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,uk(r);case 12:case"end":return e.stop()}}),e)}))),zk.apply(this,arguments)}function Kk(e,t){return Gk.apply(this,arguments)}function Gk(){return Gk=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eh(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,uk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,ck(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Gk.apply(this,arguments)}function Wk(e){return e.gu||(e.gu=function(e,t,n){var r=eh(e);return r.eu(),new nk(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:kk.bind(null,e),Yr:wk.bind(null,e),Qo:Ik.bind(null,e)}),e.du.push(function(){var t=x(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),yk(e)?vk(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:gk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function Hk(e){return e.yu||(e.yu=function(e,t,n){var r=eh(e);return r.eu(),new rk(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Ok.bind(null,e),Yr:jk.bind(null,e),Xo:Mk.bind(null,e),Yo:Vk.bind(null,e)}),e.du.push(function(){var t=x(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,Ck(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(Qf("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var Qk=function(){function e(t,n,r,i,a){I(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new rh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return E(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nh(th.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Yk(e,t){if(Yf("AsyncQueue","".concat(t,": ").concat(e)),Ty(e))return new nh(th.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Xk=function(){function e(t){I(this,e),this.comparator=t?function(e,n){return t(e,n)||Bh.comparator(e.key,n.key)}:function(e,t){return Bh.comparator(e.key,t.key)},this.keyedMap=ev(),this.sortedSet=new Gp(this.comparator)}return E(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Jk=function(){function e(){I(this,e),this.pu=new Gp(Bh.comparator)}return E(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Zf():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Zk=function(){function e(t,n,r,i,a,o,u,s){I(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return E(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Xk.emptySet(n),a,r,i,!0,!1)}}]),e}(),$k=E((function e(){I(this,e),this.Tu=void 0,this.listeners=[]})),eb=E((function e(){I(this,e),this.queries=new Kp((function(e){return tp(e)}),ep),this.onlineState="Unknown",this.Eu=new Set}));function tb(e,t){return nb.apply(this,arguments)}function nb(){return nb=x(A().mark((function e(t,n){var r,i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eh(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new $k),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Yk(e.t0,"Initialization of query '".concat(np(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&ub(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),nb.apply(this,arguments)}function rb(e,t){return ib.apply(this,arguments)}function ib(){return ib=x(A().mark((function e(t,n){var r,i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eh(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ib.apply(this,arguments)}function ab(e,t){var n,r=eh(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=b(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Tu=o}}}catch(f){a.e(f)}finally{a.f()}i&&ub(r)}function ob(e,t,n){var r=eh(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function ub(e){e.Eu.forEach((function(e){e.next()}))}var sb=function(){function e(t,n,r){I(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return E(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Zk(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=Zk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),cb=function(){function e(t,n){I(this,e),this.payload=t,this.byteLength=n}return E(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),lb=function(){function e(t){I(this,e),this.M=t}return E(e,[{key:"fi",value:function(e){return Sv(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?Rv(this.M,e.document,!1):fd.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return xv(e)}}]),e}(),fb=function(){function e(t,n,r){I(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hb(t)}return E(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=_h.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new lb(this.M),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=b(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||iv()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wg(this.localStore,new lb(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=b(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ig(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function hb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var db=E((function e(t){I(this,e),this.key=t})),pb=E((function e(t){I(this,e),this.key=t})),vb=function(){function e(t,n){I(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=iv(),this.mutatedKeys=iv(),this.Uu=ap(t),this.qu=new Xk(this.Uu)}return E(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new Jk,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Wd(this.query)&&i.size===this.query.limit?i.last():null,c=Hd(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=rp(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Wd(this.query)||Hd(this.query))for(;o.size>this.query.limit;){var l=Wd(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zf()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new Zk(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Jk,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=iv(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new pb(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new db(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=iv();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return Zk.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),yb=E((function e(t,n,r){I(this,e),this.query=t,this.targetId=n,this.view=r})),mb=E((function e(t){I(this,e),this.key=t,this.Zu=!1})),gb=function(){function e(t,n,r,i,a,o){I(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new Kp((function(e){return tp(e)}),ep),this.na=new Map,this.sa=new Set,this.ia=new Gp(Bh.comparator),this.ra=new Map,this.oa=new Tg,this.ua={},this.aa=new Map,this.ca=Cm.yn(),this.onlineState="Unknown",this.ha=void 0}return E(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function kb(e,t){return bb.apply(this,arguments)}function bb(){return bb=x(A().mark((function e(t,n){var r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=hw(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,pg(r.localStore,Zd(n));case 8:return u=e.sent,r.isPrimaryClient&&fk(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,wb(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}function wb(e,t,n,r){return xb.apply(this,arguments)}function xb(){return xb=x(A().mark((function e(t,n,r,i){var a,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=x(A().mark((function e(t,n,r,i){var a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,mg(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(qb(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,mg(t.localStore,n,!0);case 3:return a=e.sent,o=new vb(n,a.li),u=o.Gu(a.documents),s=sv.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),qb(t,r,c.Hu),l=new yb(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function Ib(e,t){return _b.apply(this,arguments)}function _b(){return _b=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eh(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!ep(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,vg(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),hk(r.remoteStore,i.targetId),jb(r,i.targetId)})).catch(Pm);case 9:e.next=14;break;case 11:return jb(r,i.targetId),e.next=14,vg(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Eb(e,t,n){return Sb.apply(this,arguments)}function Sb(){return Sb=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dw(t),e.prev=1,e.next=4,function(e,t){var n,r=eh(e),i=gh.now(),a=t.reduce((function(e,t){return e.add(t.key)}),iv());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=b(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Np(c,n.get(c.key));null!=l&&u.push(new Pp(c.key,l,ld(l.value.mapValue),_p.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new Gp(vh)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Gb(i,a.changes);case 9:return e.next=11,Ck(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Yk(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Sb.apply(this,arguments)}function Tb(e,t){return Cb.apply(this,arguments)}function Cb(){return Cb=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),e.prev=1,e.next=4,fg(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&($f(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?$f(n.Zu):e.removedDocuments.size>0&&($f(n.Zu),n.Zu=!1))})),e.next=8,Gb(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Pm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Cb.apply(this,arguments)}function Nb(e,t,n){var r=eh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=eh(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ub(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ab(e,t,n){return Db.apply(this,arguments)}function Db(){return Db=x(A().mark((function e(t,n,r){var i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=eh(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Gp(Bh.comparator)).insert(o,fd.newNoDocument(o,kh.min())),s=iv().add(o),c=new uv(kh.min(),new Map,new Qp(vh),u,s),e.next=9,Tb(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),Kb(i),e.next=16;break;case 14:return e.next=16,vg(i.localStore,n,!1).then((function(){return jb(i,n,r)})).catch(Pm);case 16:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Rb(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),i=n.batch.batchId,e.prev=1,e.next=4,cg(r.localStore,n);case 4:return a=e.sent,Ub(r,i,null),Vb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Gb(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Pb.apply(this,arguments)}function Ob(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eh(t),e.prev=1,e.next=4,function(e,t){var n=eh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return $f(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Ub(i,n,r),Vb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Gb(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Lb.apply(this,arguments)}function Mb(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mk((r=eh(t)).remoteStore)||Qf("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=eh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Yk(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Fb.apply(this,arguments)}function Vb(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function Ub(e,t,n){var r=eh(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function jb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||Bb(e,t)}))}function Bb(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(hk(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),Kb(e))}function qb(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof db?(e.oa.addReference(a.key,t),zb(e,a)):a instanceof pb?(Qf("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||Bb(e,a.key)):Zf()}}catch(o){i.e(o)}finally{i.f()}}function zb(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(Qf("SyncEngine","New document in limbo: "+n),e.sa.add(r),Kb(e))}function Kb(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new Bh(_h.fromString(t)),r=e.ca.next();e.ra.set(r,new mb(n)),e.ia=e.ia.insert(n,r),fk(e.remoteStore,new Fy(Zd(Gd(n.path)),r,2,hh.A))}}function Gb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return Wb=x(A().mark((function e(t,n,r){var i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=eh(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=rg.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=x(A().mark((function e(t,n){var r,i,a,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return xy.forEach(n,(function(t){return xy.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return xy.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ty(e.t0)){e.next=10;break}throw e.t0;case 10:Qf("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Hb(e,t){return Qb.apply(this,arguments)}function Qb(){return Qb=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=eh(t)).currentUser.isEqual(n)){e.next=11;break}return Qf("SyncEngine","User change. New user:",n.toKey()),e.next=5,ug(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new nh(th.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Gb(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Yb(e,t){var n=eh(e),r=n.ra.get(t);if(r&&r.Zu)return iv().add(r.key);var i=iv(),a=n.na.get(t);if(!a)return i;var o,u=b(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(l){u.e(l)}finally{u.f()}return i}function Xb(e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),e.next=3,mg(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&qb(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),Jb.apply(this,arguments)}function Zb(e,t){return $b.apply(this,arguments)}function $b(){return $b=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),e.abrupt("return",kg(r.localStore,n).then((function(e){return Gb(r,e)})));case 2:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function ew(e,t,n,r){return tw.apply(this,arguments)}function tw(){return tw=x(A().mark((function e(t,n,r,i){var a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eh(t),e.next=3,function(e,t){var n=eh(e),r=eh(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):xy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Ck(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Ub(a,n,i||null),Vb(a,n),function(e,t){eh(eh(e).Bs)._n(t)}(a.localStore,n)):Zf();case 11:return e.next=13,Gb(a,o);case 13:e.next=16;break;case 15:Qf("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),tw.apply(this,arguments)}function nw(e,t){return rw.apply(this,arguments)}function rw(){return rw=x(A().mark((function e(t,n){var r,i,a,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hw(r=eh(t)),dw(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,iw(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,Kk(r.remoteStore,!0);case 9:o=b(a);try{for(o.s();!(u=o.n()).done;)s=u.value,fk(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],l=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return jb(r,t),vg(r.localStore,t,!0)})),hk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,iw(r,c);case 21:return function(e){var t=eh(e);t.ra.forEach((function(e,n){hk(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new Gp(Bh.comparator)}(r),r.ha=!1,e.next=25,Kk(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),rw.apply(this,arguments)}function iw(e,t,n){return aw.apply(this,arguments)}function aw(){return aw=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=eh(t),a=[],o=[],u=b(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.na.get(c))||0===f.length){e.next=34;break}return e.next=11,pg(i.localStore,Zd(f[0]));case 11:l=e.sent,h=b(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ea.get(p),e.next=20,Xb(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,gg(i.localStore,c);case 36:return m=e.sent,e.next=39,pg(i.localStore,m);case 39:return l=e.sent,e.next=42,wb(i,ow(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),aw.apply(this,arguments)}function ow(e){return Kd(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function uw(e){var t=eh(e);return eh(eh(t.localStore).persistence).Fs()}function sw(e,t,n,r){return cw.apply(this,arguments)}function cw(){return cw=x(A().mark((function e(t,n,r,i){var a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=eh(t)).ha){e.next=3;break}return e.abrupt("return",void Qf("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,kg(a.localStore,ip(o[0]));case 10:return u=e.sent,s=uv.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Gb(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,vg(a.localStore,n,!0);case 17:return jb(a,n,i),e.abrupt("break",20);case 19:Zf();case 20:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e,t,n){return fw.apply(this,arguments)}function fw(){return fw=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=hw(t)).ha){e.next=45;break}a=b(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return Qf("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,gg(i.localStore,u);case 12:return s=e.sent,e.next=15,pg(i.localStore,s);case 15:return c=e.sent,e.next=18,wb(i,ow(s),c.targetId,!1);case 18:fk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=b(r),e.prev=30,h=A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,vg(i.localStore,t,!1).then((function(){hk(i.remoteStore,t),jb(i,t)})).catch(Pm);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),fw.apply(this,arguments)}function hw(e){var t=eh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ab.bind(null,t),t.ta.Qo=ab.bind(null,t.eventManager),t.ta.fa=ob.bind(null,t.eventManager),t}function dw(e){var t=eh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ob.bind(null,t),t}function pw(e,t,n){var r=eh(e);(function(){var e=x(A().mark((function e(t,n,r){var i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=eh(e),r=xv(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(hb(i)),a=new fb(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Gb(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=eh(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Xf("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var vw=function(){function e(){I(this,e),this.synchronizeTabs=!1}return E(e,[{key:"initialize",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=$g(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return og(this.persistence,new ig,e.initialUser,this.M)}},{key:"wa",value:function(e){return new Pg(Lg.zi,this.M)}},{key:"_a",value:function(e){return new Gg}},{key:"terminate",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),yw=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return E(n,[{key:"initialize",value:function(){var e=x(A().mark((function e(t){var r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(l(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,dw(this.ya.syncEngine);case 6:return e.next=8,Ck(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return og(this.persistence,new ig,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Fm(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=tg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?bm.withCacheSize(this.cacheSizeBytes):bm.DEFAULT;return new Zm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Jg(),Zg(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new Gg}}]),n}(vw),mw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return E(n,[{key:"initialize",value:function(){var e=x(A().mark((function e(t){var r,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(l(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof Kg,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:ew.bind(null,r),Or:sw.bind(null,r),Fr:lw.bind(null,r),Fs:uw.bind(null,r),kr:Zb.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nw(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=Jg();if(!Kg.vt(t))throw new nh(th.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(yw),gw=function(){function e(){I(this,e)}return E(e,[{key:"initialize",value:function(){var e=x(A().mark((function e(t,n){var r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Nb(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Hb.bind(null,this.syncEngine),e.next=12,Kk(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new eb}},{key:"createDatastore",value:function(e){var t,n=$g(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Xg(t));return function(e,t,n,r){return new ik(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Nb(o.syncEngine,e,0)},a=Hg.vt()?new Hg:new Wg,new ok(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new gb(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eh(t),Qf("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,ck(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function kw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return x(A().mark((function r(){var i;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var bw=function(){function e(t){I(this,e),this.observer=t,this.muted=!1}return E(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ww=function(){function e(t,n){var r=this;I(this,e),this.Ta=t,this.M=n,this.metadata=new rh,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return E(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=x(A().mark((function e(){var t,n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new cb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=x(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=x(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xw=function(){function e(t){I(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return E(e,[{key:"lookup",value:function(){var e=x(A().mark((function e(t){var n,r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new nh(th.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=x(A().mark((function e(t,n){var r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),i=Nv(r.M)+"/documents",a={documents:n.map((function(e){return Ev(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Pv(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());$f(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Up(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=x(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Bh.fromPath(t);n.mutations.push(new jp(r,n.precondition(r)))})),e.next=7,function(){var e=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=eh(t),i=Nv(r.M)+"/documents",a={writes:n.map((function(e){return Ov(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zf();t=kh.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nh(th.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_p.updateTime(t):_p.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kh.min()))throw new nh(th.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _p.updateTime(t)}return _p.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Iw=function(){function e(t,n,r,i){I(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new ek(this.asyncQueue,"transaction_retry")}return E(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new xw(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!Vh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qp(t)}return!1}}]),e}(),_w=function(){function e(t,n,r,i){var a=this;I(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Kf.UNAUTHENTICATED,this.clientId=ph.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qf("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Qf("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return E(e,[{key:"getConfiguration",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new nh(th.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new rh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(x(A().mark((function n(){var r;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Yk(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ew(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Qf("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ug(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}function Tw(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Nw(t);case 3:return r=e.sent,Qf("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return qk(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return qk(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e){return Aw.apply(this,arguments)}function Aw(){return Aw=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Qf("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Ew(t,new vw);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Dw(e){return Rw.apply(this,arguments)}function Rw(){return Rw=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Qf("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Tw(t,new gw);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Pw(e){return Nw(e).then((function(e){return e.persistence}))}function Ow(e){return Nw(e).then((function(e){return e.localStore}))}function Lw(e){return Dw(e).then((function(e){return e.remoteStore}))}function Mw(e){return Dw(e).then((function(e){return e.syncEngine}))}function Fw(e){return Vw.apply(this,arguments)}function Vw(){return Vw=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dw(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=kb.bind(null,n.syncEngine),r.onUnlisten=Ib.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function Uw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function i(){return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bw({next:function(a){t.enqueueAndForget((function(){return rb(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new nh(th.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new nh(th.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new sb(Gd(n.path),a,{includeMetadataChanges:!0,Cu:!0});return tb(e,o)},i.next=3,Fw(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function jw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function i(){return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bw({next:function(n){t.enqueueAndForget((function(){return rb(e,o)})),n.fromCache&&"server"===r.source?i.reject(new nh(th.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new sb(n,a,{includeMetadataChanges:!0,Cu:!0});return tb(e,o)},i.next=3,Fw(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Bw=new Map;function qw(e,t,n){if(!n)throw new nh(th.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zw(e,t,n,r){if(!0===t&&!0===r)throw new nh(th.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Kw(e){if(!Bh.isDocumentKey(e))throw new nh(th.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gw(e){if(Bh.isDocumentKey(e))throw new nh(th.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ww(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Zf()}function Hw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nh(th.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ww(e);throw new nh(th.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Qw(e,t){if(t<=0)throw new nh(th.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Yw=function(){function e(t){var n;if(I(this,e),void 0===t.host){if(void 0!==t.ssl)throw new nh(th.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new nh(th.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,zw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return E(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Xw=function(){function e(t,n,r){I(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yw({}),this._settingsFrozen=!1,t instanceof Fh?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nh(th.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fh(e.options.projectId)}(t))}return E(e,[{key:"app",get:function(){if(!this._app)throw new nh(th.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new nh(th.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ah;switch(e.type){case"gapi":var t=e.client;return $f(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ch(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new nh(th.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Bw.get(e);t&&(Qf("ComponentProvider","Removing Datastore"),Bw.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Jw(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Hw(e,Xw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Xf("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Kf.MOCK_USER;else{o=U(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new nh(th.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Kf(s)}e._authCredentials=new oh(new ih(o,u))}}var Zw=function(){function e(t,n,r){I(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return E(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ex(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),$w=function(){function e(t,n,r){I(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return E(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ex=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,e,r,Gd(i)))._path=i,a.type="collection",a}return E(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Zw(this.firestore,null,new Bh(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}($w);function tx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=oe(e),qw("collection","path",t),e instanceof Xw){var a=_h.fromString.apply(_h,[t].concat(r));return Gw(a),new ex(e,null,a)}if(!(e instanceof Zw||e instanceof ex))throw new nh(th.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(_h.fromString.apply(_h,[t].concat(r)));return Gw(o),new ex(e.firestore,null,o)}function nx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=oe(e),1===arguments.length&&(t=ph.R()),qw("doc","path",t),e instanceof Xw){var a=_h.fromString.apply(_h,[t].concat(r));return Kw(a),new Zw(e,null,new Bh(a))}if(!(e instanceof Zw||e instanceof ex))throw new nh(th.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(_h.fromString.apply(_h,[t].concat(r)));return Kw(o),new Zw(e.firestore,e instanceof ex?e.converter:null,new Bh(o))}function rx(e,t){return e=oe(e),t=oe(t),(e instanceof Zw||e instanceof ex)&&(t instanceof Zw||t instanceof ex)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ix(e,t){return e=oe(e),t=oe(t),e instanceof $w&&t instanceof $w&&e.firestore===t.firestore&&ep(e._query,t._query)&&e.converter===t.converter}var ax=function(){function e(){var t=this;I(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new ek(this,"async_queue_retry"),this.qa=function(){var e=Zg();e&&Qf("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=Zg();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return E(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=Zg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new rh;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=x(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ty(e.t0)){e.next=12;break}throw e.t0;case 12:Qf("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yf("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=Qk.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&Zf()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=b(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function ox(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ux=function(){function e(){I(this,e),this._progressObserver={},this._taskCompletionResolver=new rh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return E(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),sx=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ax,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return E(n,[{key:"_terminate",value:function(){return this._firestoreClient||lx(this),this._firestoreClient.terminate()}}]),n}(Xw);function cx(e){return e._firestoreClient||lx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Mh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new _w(e._authCredentials,e._appCheckCredentials,e._queue,r)}function fx(e,t,n){var r=new rh;return e.asyncQueue.enqueue(x(A().mark((function i(){return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ew(e,n);case 3:return i.next=5,Tw(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===th.FAILED_PRECONDITION||e.code===th.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function hx(e){return function(e){return e.asyncQueue.enqueue(x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pw(e);case 2:return n=t.sent,t.next=5,Lw(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=eh(e);return t.fu.delete(0),uk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(cx(e=Hw(e,sx)))}function dx(e){return function(e){return e.asyncQueue.enqueue(x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pw(e);case 2:return n=t.sent,t.next=5,Lw(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=eh(t)).fu.add(0),e.next=4,ck(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(cx(e=Hw(e,sx)))}function px(e,t){var n=cx(e=Hw(e,sx)),r=new ux;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ww(e,t)}(function(e,t){if(e instanceof Uint8Array)return kw(e,t);if(e instanceof ArrayBuffer)return kw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,$g(t));e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pw,t.next=3,Mw(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function vx(e,t){return function(e,t){return e.asyncQueue.enqueue(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=eh(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Ow(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(cx(e=Hw(e,sx)),t).then((function(t){return t?new $w(e,null,t.query):null}))}function yx(e){if(e._initialized||e._terminated)throw new nh(th.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mx=function(){function e(){I(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new nh(th.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sh(n)}return E(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var gx=function(){function e(t){I(this,e),this._byteString=t}return E(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ch.fromBase64String(t))}catch(t){throw new nh(th.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ch.fromUint8Array(t))}}]),e}(),kx=E((function e(t){I(this,e),this._methodName=t})),bx=function(){function e(t,n){if(I(this,e),!isFinite(t)||t<-90||t>90)throw new nh(th.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nh(th.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return E(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return vh(this._lat,e._lat)||vh(this._long,e._long)}}]),e}(),wx=/^__.*__$/,xx=function(){function e(t,n,r){I(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Pp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rp(e,this.data,t,this.fieldTransforms)}}]),e}(),Ix=function(){function e(t,n,r){I(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return E(e,[{key:"toMutation",value:function(e,t){return new Pp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function _x(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zf()}}var Ex=function(){function e(t,n,r,i,a,o){I(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return E(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return Gx(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(_x(this.Xa)&&wx.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),Sx=function(){function e(t,n,r){I(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||$g(t)}return E(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ex({Xa:e,methodName:t,uc:n,path:Sh.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Tx(e){var t=e._freezeSettings(),n=$g(e._databaseId);return new Sx(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cx(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);Bx("Data must be an object, but it was:",o,r);var u,s,c=Ux(r,o);if(a.merge)u=new Th(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=b(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=qx(t,d,n);if(!o.contains(p))throw new nh(th.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Wx(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Th(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new xx(new cd(c),u,s)}var Nx=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(kx);function Ax(e,t,n){return new Ex({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Dx=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"_toFieldTransform",value:function(e){return new xp(e.path,new pp)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(kx),Rx=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e)).cc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=Ax(this,e,!0),n=this.cc.map((function(e){return Vx(e,t)})),r=new vp(n);return new xp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(kx),Px=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e)).cc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=Ax(this,e,!0),n=this.cc.map((function(e){return Vx(e,t)})),r=new mp(n);return new xp(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(kx),Ox=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e)).hc=r,i}return E(n,[{key:"_toFieldTransform",value:function(e){var t=new kp(e.M,cp(e.M,this.hc));return new xp(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(kx);function Lx(e,t,n,r){var i=e.ac(1,t,n);Bx("Data must be an object, but it was:",i,r);var a=[],o=cd.empty();wh(r,(function(e,r){var u=Kx(t,e,n);r=oe(r);var s=i.sc(u);if(r instanceof Nx)a.push(u);else{var c=Vx(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Th(a);return new Ix(o,u,i.fieldTransforms)}function Mx(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[qx(t,r,n)],s=[i];if(a.length%2!=0)throw new nh(th.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(qx(t,a[c])),s.push(a[c+1]);for(var l=[],f=cd.empty(),h=u.length-1;h>=0;--h)if(!Wx(l,u[h])){var d=u[h],p=s[h];p=oe(p);var v=o.sc(d);if(p instanceof Nx)l.push(d);else{var y=Vx(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Th(l);return new Ix(f,m,o.fieldTransforms)}function Fx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Vx(n,e.ac(r?4:3,t))}function Vx(e,t){if(jx(e=oe(e)))return Bx("Unsupported field value:",t,e),Ux(e,t);if(e instanceof kx)return function(e,t){if(!_x(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=Vx(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=oe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return cp(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=gh.fromDate(e);return{timestampValue:kv(t.M,n)}}if(e instanceof gh){var r=new gh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:kv(t.M,r)}}if(e instanceof bx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gx)return{bytesValue:bv(t.M,e._byteString)};if(e instanceof Zw){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Iv(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(Ww(e)))}(e,t)}function Ux(e,t){var n={};return xh(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wh(e,(function(e,r){var i=Vx(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function jx(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof gh||e instanceof bx||e instanceof gx||e instanceof Zw||e instanceof kx)}function Bx(e,t,n){if(!jx(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ww(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function qx(e,t,n){if((t=oe(t))instanceof mx)return t._internalPath;if("string"==typeof t)return Kx(e,t);throw Gx("Field path arguments must be of type string or ",e,!1,void 0,n)}var zx=new RegExp("[~\\*/\\[\\]]");function Kx(e,t,n){if(t.search(zx)>=0)throw Gx("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return D(mx,T(t.split(".")))._internalPath}catch(r){throw Gx("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Gx(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new nh(th.INVALID_ARGUMENT,u+e+s)}function Wx(e,t){return e.some((function(e){return e.isEqual(t)}))}var Hx=function(){function e(t,n,r,i,a){I(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return E(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Zw(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Qx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Yx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Qx=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){return h(l(n.prototype),"data",this).call(this)}}]),n}(Hx);function Yx(e,t){return"string"==typeof t?Kx(e,t):t instanceof mx?t._internalPath:t._delegate._internalPath}var Xx=function(){function e(t,n){I(this,e),this.hasPendingWrites=t,this.fromCache=n}return E(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Jx=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,u){var s;return I(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return E(n,[{key:"exists",value:function(){return h(l(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Zx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Yx("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Hx),Zx=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(l(n.prototype),"data",this).call(this,e)}}]),n}(Jx),$x=function(){function e(t,n,r,i){I(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xx(i.hasPendingWrites,i.fromCache),this.query=r}return E(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Zx(n._firestore,n._userDataWriter,r.key,r,new Xx(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nh(th.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Zx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Zx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xx(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:eI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function eI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zf()}}function tI(e,t){return e instanceof Jx&&t instanceof Jx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $x&&t instanceof $x&&e._firestore===t._firestore&&ix(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function nI(e){if(Hd(e)&&0===e.explicitOrderBy.length)throw new nh(th.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rI=E((function e(){I(this,e)}));function iI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var aI=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return E(n,[{key:"_apply",value:function(e){var t=Tx(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new nh(th.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){yI(o,a);var s,c=[],l=b(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(vI(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=vI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||yI(o,a),u=Fx(n,"where",o,"in"===a||"not-in"===a);var h=Nd.create(i,a,u);return function(e,t){if(t.S()){var n=Yd(e);if(null!==n&&!n.isEqual(t.field))throw new nh(th.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Qd(e);null!==r&&mI(e,t.field,r)}var i=function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new nh(th.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new nh(th.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new $w(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new zd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(rI);var oI=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return E(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new nh(th.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nh(th.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ud(t,n);return function(e,t){if(null===Qd(e)){var n=Yd(e);null!==n&&mI(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new $w(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zd(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(rI);var uI=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return E(n,[{key:"_apply",value:function(e){return new $w(e.firestore,e.converter,$d(e._query,this.wc,this.mc))}}]),n}(rI);var sI=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return E(n,[{key:"_apply",value:function(e){var t=pI(e,this.type,this.gc,this.yc);return new $w(e.firestore,e.converter,function(e,t){return new zd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(rI);function cI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sI("startAt",t,!0)}function lI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sI("startAfter",t,!1)}var fI=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return I(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return E(n,[{key:"_apply",value:function(e){var t=pI(e,this.type,this.gc,this.yc);return new $w(e.firestore,e.converter,function(e,t){return new zd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(rI);function hI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fI("endBefore",t,!1)}function dI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fI("endAt",t,!0)}function pI(e,t,n,r){if(n[0]=oe(n[0]),n[0]instanceof Hx)return function(e,t,n,r,i){if(!r)throw new nh(th.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=b(Jd(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Jh(t,r.key));else{var c=r.data.field(s.field);if(Ph(c))throw new nh(th.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new nh(th.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Vd(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Tx(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new nh(th.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new nh(th.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Xd(e)&&-1!==c.indexOf("/"))throw new nh(th.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(_h.fromString(c));if(!Bh.isDocumentKey(l))throw new nh(th.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Bh(l);u.push(Jh(t,f))}else{var h=Fx(n,r,c);u.push(h)}}return new Vd(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function vI(e,t,n){if("string"==typeof(n=oe(n))){if(""===n)throw new nh(th.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xd(t)&&-1!==n.indexOf("/"))throw new nh(th.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(_h.fromString(n));if(!Bh.isDocumentKey(r))throw new nh(th.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Jh(e,new Bh(r))}if(n instanceof Zw)return Jh(e,n._key);throw new nh(th.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ww(n),"."))}function yI(e,t){if(!Array.isArray(e)||0===e.length)throw new nh(th.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new nh(th.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function mI(e,t,n){if(!n.isEqual(t))throw new nh(th.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var gI=function(){function e(){I(this,e)}return E(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Kh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zf()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return wh(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new bx(Dh(e.latitude),Dh(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Oh(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Lh(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ah(e);return new gh(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=_h.fromString(e);$f(Hv(n));var r=new Fh(n.get(1),n.get(3)),i=new Bh(n.popFirst(5));return r.isEqual(t)||Yf("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function kI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bI=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new gx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zw(this.firestore,null,t)}}]),n}(gI),wI=function(){function e(t,n){I(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tx(t)}return E(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=xI(e,this._firestore),i=kI(r.converter,t,n),a=Cx(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,_p.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=xI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=oe(t))||t instanceof mx?Mx(this._dataReader,"WriteBatch.update",i._key,t,n,o):Lx(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,_p.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=xI(e,this._firestore);return this._mutations=this._mutations.concat(new Up(t._key,_p.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new nh(th.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function xI(e,t){if((e=oe(e)).firestore!==t)throw new nh(th.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var II=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new gx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zw(this.firestore,null,t)}}]),n}(gI);function _I(e){e=Hw(e,Zw);var t=Hw(e.firestore,sx),n=cx(t),r=new II(t);return function(e,t){var n=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=eh(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new nh(th.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Yk(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ow(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Jx(t,r,e._key,n,new Xx(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function EI(e){e=Hw(e,$w);var t=Hw(e.firestore,sx),n=cx(t),r=new II(t);return function(e,t){var n=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=x(A().mark((function e(t,n,r){var i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,mg(t,n,!0);case 3:i=e.sent,a=new vb(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Yk(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Ow(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new $x(t,r,e,n)}))}function SI(e,t,n){e=Hw(e,Zw);var r=Hw(e.firestore,sx),i=kI(e.converter,t,n);return AI(r,[Cx(Tx(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,_p.none())])}function TI(e,t,n){e=Hw(e,Zw);for(var r=Hw(e.firestore,sx),i=Tx(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return AI(r,[("string"==typeof(t=oe(t))||t instanceof mx?Mx(i,"updateDoc",e._key,t,n,o):Lx(i,"updateDoc",e._key,t)).toMutation(e._key,_p.exists(!0))])}function CI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=oe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||ox(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(ox(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Zw)l=Hw(e.firestore,sx),f=Gd(e._key.path),c={next:function(t){n[s]&&n[s](DI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Hw(e,$w);l=Hw(p.firestore,sx),f=p._query;var v=new II(l);c={next:function(e){n[s]&&n[s](new $x(l,v,p,e))},error:n[s+1],complete:n[s+2]},nI(e._query)}return function(e,t,n,r){var i=new bw(r),a=new sb(t,i,n);return e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=tb,t.next=3,Fw(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rb,t.next=3,Fw(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(cx(l),f,h,c)}function NI(e,t){return function(e,t){var n=new bw(t);return e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eh(e).Eu.add(t),t.next()},t.next=3,Fw(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){eh(e).Eu.delete(t)},t.next=3,Fw(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(cx(e=Hw(e,sx)),ox(t)?t:{next:t})}function AI(e,t){return function(e,t){var n=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Eb,r.next=3,Mw(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(cx(e),t)}function DI(e,t,n){var r=n.docs.get(t._key),i=new II(e);return new Jx(e,i,t._key,r,new Xx(n.hasPendingWrites,n.fromCache),t.converter)}var RI=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r))._firestore=e,i}return E(n,[{key:"get",value:function(e){var t=this,r=xI(e,this._firestore),i=new II(this._firestore);return h(l(n.prototype),"get",this).call(this,e).then((function(e){return new Jx(t._firestore,i,r._key,e._document,new Xx(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){I(this,e),this._firestore=t,this._transaction=n,this._dataReader=Tx(t)}return E(e,[{key:"get",value:function(e){var t=this,n=xI(e,this._firestore),r=new bI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Zf();var i=e[0];if(i.isFoundDocument())return new Hx(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Hx(t._firestore,r,n._key,null,n.converter);throw Zf()}))}},{key:"set",value:function(e,t,n){var r=xI(e,this._firestore),i=kI(r.converter,t,n),a=Cx(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=xI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=oe(t))||t instanceof mx?Mx(this._dataReader,"Transaction.update",i._key,t,n,o):Lx(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=xI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function PI(e,t){return function(e,t){var n=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){var i;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Dw(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Iw(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(cx(e=Hw(e,sx)),(function(n){return t(new RI(e,n))}))}function OI(){return new Dx("serverTimestamp")}function LI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rx("arrayUnion",t)}function MI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Px("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Gf=e}(ze),Me(new he("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new sx(i,new uh(e.getProvider("auth-internal")),new fh(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ye(zf,"3.4.8",e),Ye(zf,"3.4.8","esm2017")}();var FI=function(){return FI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},FI.apply(this,arguments)},VI=function(e){return{loading:void 0===e||null===e,value:e}},UI=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return FI(FI({},e),{error:t.error,loading:!1,value:void 0});case"reset":return VI(t.defaultValue);case"value":return FI(FI({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),VI(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},jI=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},BI=function(e,t){var n=!e&&!t,r=!!e&&!!t&&ix(e,t);return n||r},qI=function(e,t){return jI(e,BI,t)},zI=function(e,n){var r=null===n||void 0===n?void 0:n.snapshotOptions,i=function(e,n){var r=UI(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=qI(e,o);(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?CI(l.current,n.snapshotListenOptions,s,u):CI(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]);var f=[c,a,i];return(0,t.useMemo)((function(){return f}),f)}(e,n),a=i[0],o=i[1],u=i[2],s=[KI(a,r),o,u,a];return(0,t.useMemo)((function(){return s}),s)},KI=function(e,n){return(0,t.useMemo)((function(){return null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)}))}),[e,n])},GI=function(){return(0,Cu.jsx)("div",{className:"container",children:(0,Cu.jsx)("div",{className:"loader-content",style:{height:window.innerHeight-50},children:(0,Cu.jsx)("div",{className:"lds-dual-ring"})})})};var WI=n.p+"static/media/contacts.dcdecf802036e7347af38007664311ed.svg",HI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAAFcBAMAAAB2OBsfAAAAIVBMVEXu7u4AAAD////39/c/Pz+Li4tkZGQhISGsrKzHx8fe3t5EfHciAAAYq0lEQVR42sydwZfTRhKHjbQv7OaEMrY1MyfRsj2WT0bDW/ZxygyEwN7slyGQ03qAJLsnTIAJOcXeJbvJKeMXYDmO2bwQ/so1Hnd3lSx3V7Vsgw556EWt/iR1V1f9qtxTEqdHVDo93E/9dPKvNy+f3rx6dNQPgvDo4dV7t16+8YSI28XuDE+Xc5fdCdTrH+5OMLNHePXeT5MH2X2PcFMRvb6Zg6qQ7/3kifcGV7RufhpYjof3xu8J7uXPAtLxyav3ADchwk6BR+8YN/pXwDque6L9rnBT8XwvYB7lr9P4neD64k+9wOGo/jx9wWvGTeMf+oHTEU5f8HpxRfJV4Hw8Hom14vri172gwFH+QqwRV4jnQcHj7+t8u5/baI6OrDY4XRdutNgilK8d/PjyzZs3pQ8n//n9vwd3F4+Zquds70sl6YLYT9NkAe3Da7emy6yIBTguP/1ygUNRHcWcfqenbNy0mfvCwk/euolTzxa19SeuZfT6s1ybVx7Gq8ZNm3k9P7xta/ss7xWHw3i1uLnv9vGPlLbPvsp7v2KVuHm0D7+gdSnEr58u5l0J7jxt+LUnUlqXvojm1+3yaHW4rTnaR+OJv0Ief75ozVns8nhluJ1sV7dFzDKCE5/zWfaRK6vCHeS9Wh7u2xGRfcGbq8H9ZW7Zj7lLzOlp1uG4sQrcDzJz7J90vuzpXzIz7s7ycZvZFVS444rsOj5cNm6EZ0jFE0VwRdTJmIf2cnHx7R+x+eZOP8+Yh/YScdP/oZs/EcVxYxzy34hpuCRHs56ZycW0gtkptjTd5bnnMRq43y5BXZ2e/hsN33RpuANMuyxczLu5LNxG9q7LwsW8h8vBbfWzK/zScJHBCcdLwYVDoTpeLm6rhz9ccdzGvHe6PFyR7KHhUBgXWYWuWDZuXEfWoTDuC3C7v4ql40ZoBXoSF8StZ03NsnFLaG50o2K4PTjN2qvA9eF0q4oiuB6cZ8OotArckgd90ytRAVwYS34cl1aDW0r/AF1Jd9z0BVwfyJNdoINAD1eL09nmguuDrxSO6AmFt4nhg4P/vKKnORKwcA7tHdlD3y7Bhd2drFJP72plN7x2ayxoKlidGBibcJtzNsyMG72ey2GH1z2aJDWAgZsbbgd5H9Yu89MVKg1hxgV+VMUNt459O0uXrYUJgBsUXO8DNPAccDsZXcjY5XNDku06JZLD3fFxwQoxtGqM5tzKE4o+2YQfk4+rl8bvbLM76ljSPHcouvxvc0sxA7cOFxojbhpZc8PhkBDWgyW02+bi6hd2JzLi+gkhk10h4Hp/1pfHTNw6+jIGXD8m5d0PCaIJGH/dNgs3HaCWpjTbC1pZAAEXvKNKzMEF07Ri1sfTOjEJfEhQwdIO9hyouN4At1vYh59QM+/V215swwVvaTNi4Ca6mbkPkWfCjq59eXBwcDebxX78vWhbRDswBkd0XE+bwJEx+4CijVmF28/y/7Y/zOalbqSWNJGv39N3EV2BVF94y+Kz9rLVeG/d8932adJk8s8M8CNrpcSxsvZ091y/s5EZt5HNBM1dnEkcbtq89cQimeU162Ve7sI+9nCSLa+iIjMXvxUW2eFYmz4ibh15yoY4uTannlml7OAfsbnKpwn9SBLusTYLRlyYXqmOY+twhBZ1YTSmjcMWDTfq6wXNWF8MRm5lHBGGow6pDSqJ+hphSsKtgQXNGNZrm1udanGLhmMmOftxZAyM9W33Sbhqoh22jbgJ8A9NBH7GOJc9I66+vErBbUKvxIDrnVUAfzNXYcaZ1eJKZFQS9PsaEnBP4F0NuGlPG1Oz8OFlJls1NuJ6F+WF2wTcvgrWzWqKnhJjW5qt9RSXtUxGmenOKogPhRW3gR7N8A6O0epuq/v/HRZRV8zqoHcCn8uMq6bx0CIbSqMbehQVLEXL8dCsgjWxG2nAjbE/v/imyi7cpymkPszybEdEEzk24/o1/B0Wm5uaerlkQVeHulWzRde2bL9tViA7apRbpJdj/b3IFX514OmZL+5j/WiRe95Sn8tGsKe/Ar1+8oVesMwXq8k2NuLWMr6YtdalvMuoZ/CVidq01dfp5zLhdjIi3sKb7gBzRy+/0CbKVr3Yy68yw7hqLDywEcih2+VViyh70jVf7F9Co2EBbi0T9Aib4BfuMqv0pFl/YKkVStBoWIA7IAu60I4zcJU3KxeAhZW3ndxUBcJVa8S+TdBtwpfEKR3anU22sgVXLwDpQlxlnT0bQQOu1BxcpQ+NLRdHMCLOx9Wm30ZwZjZ0Yy6uWrC6lovVc20txNWm30Ywu1clYteRSeNz36LwqecqL8JtasfCRjB7sHPsgljlyW1FNjEdrFi5uOfpbgDyQHhVerMRV7XhqtHw0QLcjoawdJnAmcbE3UGmwbBi13ISBQC3BZxMS5fSenoOuLLtru1izZOnQMKnsbmwNS1jsQsYErRwmi7WXzvHPVdjZd9esXAWJbZ5uHKhsNdo1tRcysFVwdfI2qV0R7ddcL0edA1NF8vvUI5zcJtAqLThDtScdcCdfeNv7Bf35oVQJQ3VYBxhwUUviIuLPo3x4hPkoyNcNXS7BNy9AkV7/nkodRsvrmcK2ACuHLohoUsZ+Y2cSptqkMF8McxTYNxmQL+LQHEfF7cBfWrzxQM8eDVuvIPCHkuXSi92wa1Do22+GEMB3MyDWKpYkRbBxW3CL2y+uDmXL8vMnlDQ71J2w034k6ScxU0CxkKFPicbV/oCgm7gg3EGtxEwTGmjEG67T8aNa6jUSuOeCRi2qYbj5dXhKnt1LoPb4wzH2pz15uDuMnDlaoDNSKlNDP9PjxqKX5j+rprVrygXD6BnrdzzOlFcWSbumHLxDgycJa6/Q5OuMO52MdwR5eI61l9wvBfQtII14sr1fiuCuD2Ur32P3q6MgKoQt6XsBeftnmuvAfcMEKkkbp1RnDbBvbQUXJJlEA0kJON8z4iFu+GI2+fgJkCBmeHKmRaKtbzdGa5Pa9vXc03i9tQytY6p1ge6iL3tQM+1Ga5cFjd4uI7LhKwXIIqtF3RaYYbb1H4PB3fTDVcKzURcoHzPcBvaHSN12SiE2+JJ2XKuHUpc/6z27zm4FTfcBEqQhLZ9pV+f4krDUKF2WS+E24QCL6FtR82UmQLZ0zOd5LMWC34YkXAEMp1V5Z4DS7wGXIbOEME1TOImYJ0jdVksEmaoOKjoZzTDbYAKX1KXhXQG6VtvUdsm8Ge5OvQKY3KXMiIpIultU9umfVC0p6PgSkTtspBG5p+Q9d1Z4VNHerenuANSJdayFEipzO6TcU9AqbLWm6bhEA13LysMOqjnZFw52MszXBhW0nB7BeRor8fa7gL4CKe4Ca3OLUe6OiyS+RmS20oPbDTFndm10GfjPnDBbWVVOmtbWf/cneLWoMtBwz0ukPlJoABJauvNpsr+FPcCdFhouEXyanWGkDzDnU3OjQgU7G7TceNLBbKW/AStdwJdsA6Ux1bVpX7U8+xHlZZs+v3lyDjkZ82tSf680zPE8gtw2lAu1WRJRjkUWpcJNCZM3AGtuAWeNtXsLJUuI92c1mWEypV4uDJBy4hEElDYUCdWwOYVtzhUi0g9vMvAFaqmQC1xZRYu6pOFG6EnJbZV00vFFhUWbgd+URau/LA+B1d5RSpq32LhDqCox8JtQJWB2lYt+soGf8TCPYHWiFWlt4PqsohtL8hVVBmWByzcHdcqPRlL8BQgFd6VsLdMxW0wlRhdsikjGRauml8l7C1Tceug2piFK+3YPksbVsJGyevTauNzZTlifgGctlgZMQ8LG6Eo7eKolnoXnJ2jt23i8l1iW+UjyzVYVn7wBsNbFZOH27DtwJB7erkvU60ZAYlnyNjF3P6FwCVRkKrcVhPXgtP8XVXRt8H1d08CJ31NLfoNbLZZAQx1N8Scwjtm0N+TYy+jhNMigovOuJ2AU5aiTjsSt7boh2yESJhU0pdfeGf9sT8+PZYu1Q4e+iwVh67R6tPjwCXOkzJg6QxOmLIkvXDMx5V7eYUsXCmylqRDxsFVPyZwiITFb+DXJs64+5wum0EBBbIZcDWyyanMk5aOHXDrRXIT6R5XgczBPeR0WajsTbqAh5y2Mk9aGmAPiVNH5lb25g0ccOsSt+OOu1kId98BtyJxh2vHZb1dmZgt9YCfzRy7joOh44CbSNw9d9w1TjWZpVe4HH+3TvsB4hIVIIXbR7EPS4k5DSzZuH0Hfa1VBLdN/L2kUb185YAbOuGmARrwPNwEluKsBVcJ7i64Tsp7Mdweqvbl4e4Qf7yYj4s3KeUJ9tsFchObLrhBSe1hwenyxOUN4S+zxWory+vdcGvuuQn5w/Qr7fXhNtAGJCzBtBG4TNMMbuBmjDYFV8VRpfqjIrjMqaa2Kvle8P7ok/hj4CL2q2yamyHTG7xcu+3TcdvP1G7NzAq/YnZXVYRP5wwV17+oW22sFRdsMXafjnsW7EJVKobLq7QDG85t0P3dC0F2x0ZqW4W754QLNqbbpuOe6D2zIifcsiOu3gjGvhOlPtWb6n1TEHfEwwWjoUrH7YENVXm4KproueF6Hb3ZKBl3j7gHoiG0dAncI7DBzWk1Gq0t3DGZh9vM4HaZuGDnP4+KG8O9/3i4ShYZOOLqjZ5HVNwEbkfthLvpJOmdltX+kvlzLNa2dfjHyXi4jQzuPhvXV9seUHFrcJNuHq4STE9ccVHxHKktvxxwIS5L7MfFc1tU3GN4PQ9Xif0uqZRZ8dwlnEG0tu3AN+OI65KoinLLaqxt+3BW83BVosolDRjhZP+Ite7PbCYPVxmEGnGvv/83dz5PUhNRHA8ZQY9G5wfrKXZ21pk5jUEK9cSuhbCc3BFQuLFYFngbClbw5IyWFDfZWhb0xpQ/9690fiSd9/pH0u8lGdzTdk0n+UxPp3+8/r73DMXQPTXJorhljpXocq20CXuKrZZ0lzE4di+sDP22yLjyCLtbAncPG/0LHjlBT6Lhpq4ETPkFEid0SBKK9xgPyuQXn6IzT9pdNvFOpkCgEnAEa1jcMuNKh9Bhq5MGbSvgKMBU6RBPmIWPsjcIPadMu3S4sjf8wjYJ7yXrJQGyN5aoMMF9RlBWB5RhxC4qnPDfAOlXuFNcecs1mGuBZJMliE2KOBBUbuVT+E2jPeiUFMTy5MZJ8RxSquRWvh2wrFtIwHOfK+ZOinL7Piqq3MeKIdqDokzMzZPKJ0WpEdwoqnwBx6QmPiiTyvMcEdJiFwbyzquc9oV9n4ObOSJgKS45N2VqmFnsL+2VMyOKs1ECFvvZyQ2W4pJxJzJZbZ5hBoTQ5uB2s3PZrGOwcDdB+ky7QU2mInuHhQuU7iwHsKzYBylbrJWz6PcjDi50AOO418HiXrGF2YepkRi42L2uhLUimx8X+3cr7gSE1ufgIudFumsoLPYpuCMeLnINpTveouKeO25TsHCHyPGW7taMipvuuO/xcLFbM91pHBfHzriHPFzsNE53ycfFN11xyUL1xDKruOSTAx7gYs8Vd4eHqwY8IIeTwMV+3bhKOAl6sA4e7j4PVw3WQQ6FYsRt1tW6KBQKGChG9PUuuF1OXtAJOFCgr3e7cqBdBUk6B/azdeLu83A3ZVz3JKbT7SxQ6P+wdU/JMwVmCKr1ti4KQeUxAnytF1cN8EUOn2bEbdbUGbTwaeTgdGttXT04HTX0H7N1ebh66D9qYMW1jgx6YEVi2Eql2KsXVw9bSQwKSsZ9VgLXEBSUGHJ1rbiGkKvEgLZrxTUFtCWGC8bFbuG1qXmWg2sKF0wLxkzGfVUCVwnGjIz/0hRPWZV2C604r8CxBHG92w3wteiRSYA72k23inAbfFwpXhwh3Cjgu6Bt6eltFNxTTId4kaVEiREuLQg+Lm4W4r4PAu/TcLUg+MkHH1JSDOBieuhlF41+4JzjRi32YKQCgEtK4MDE3SDjWhM4kNJj4KK0qlgrb+Ymvs8pWtNjkJKPGG1kbw+LcOk2MmvyEVJqF1RMx8B37bjwPJiEa03tQkucA4sycZi9Mkx/RcK1Js4hpSWCxYGDPjvdrZCt5xNtvFJHuA4RV8Y2iRyU3y0irj3pEyWllumg6mxOvujMD2DEWY2YUmpREpYZTi0Xq3175S7DDUDkJiyjpIPLilvAtSCnchr3Pgh+iAi4hnRw2cpyG9hNHbU4/XEAvmRO5czBg6AWkcn2jIkin4HAR264Yea3cd/N6Dl/trMwS3bPDSPuJnAlI2kg01kyr3KWc74dO+LK8WSnbBrOVekoCAJjkmJDZeDg9tAR15iGE9RzT3Kq0q5WTC5aHMlbiFuU5JSSQnb+9zMAaBc32EThLcQtTCFLSNArwq8CtXHdwqauGmxWjFuYoJeQ/nhwO9Aa1y30ZDI+pOYt64OK0x87J5eO+9vw2W5yzz66pHNr6WJsx3VILu2WurshTo/Rox3F3C8w73f5LtEOqbudEqM3omP0XDnwF+k7o9v4uit+zgCfJUb3RZm083F4DT81uOMovPN7yoUHs8ha2SXtfCazOrQRiE+UNgoeCVezV/yHcmnzR+u1fRTEzoI7UCLdaT+o+HOsPLIVD11xPfFEuXjegS0PugD7gg0XqOmMd4mOArWBZkPPGbcR7anX75orS9fIFv5UEZjJ3jA1LEPj8IlGS9yLh2pXCh7OIkPlXoBSrxuW52iJmXpYIV3BQHtWc0o1Suj3aB/qOgr/VWARkuJ68oXs+JrssrdtpqXtFvv6d/5JqJXDceZQnIeb9YZ9/Ctoc0PaE8iGGZ2384XAJhU5Aadhem24MlJJ8r3kxlMcB/qvyLCuijDGq6Pl3z2BXxL5RvpePm62EoEquEhoQ8LiHWHheo3wZ+1mV4w6N4PTn3rTLfSypd/6yPCA0OPhzscj/afaNSix0h6ZhyujnHRmWb0jw8839Li4nmG2SXiXlQcSQXiFuPKrfSY/PTK9HB4fd174eNvIuzyO+kgZTXNxe5rj/BnzUFkGdz6Iay/c1eTTzNl/6oCbBX3YX9mRunq3jbyyuB7e7KVLuxCOYiYLVY76fRX0oTfWui2TTy2qHbizNPjFIKKwC25m0BrNR+/Btj6TVYQr+uq9ZyFwsejETrhZ7OKzEbLUyLmhKlwxUO7eEsN4AuIfO+FmnXUqlBX1w1hUiSvUFfAu2ODbTe14kZq9mhvKa3YldkxG6VpsqIPk6BkcmLRrTbgyOlrQwZ1rtXmtEndexMNkU/63EzriepE2hoO5oWpc0R2bntaMPVdc/28T7bQqPk2HZ2qdH0JnXK9vpq0J17Dwt6WGMOPGEyNtXbiG9l0tHR1xG6oFIzGD1YUbaVPndEjA1Zr3jqgVV4jTynxhiXBqwfW72mKpXtz4L/xjDmm4aPI9K2rHxRaeli2OoRUXNG/bj+vHbYBoZfY8NVZccHVL+PXjeuD3tEuBvUKt5Pzv4ho6AzRP7jBwwbelxuBkFKHxty04uKD3Pq4dF9r6ciTwefHcwOAwCqta4Fp2mn/ANXpO5RxrABwc4lpx4/PKmMvARVPb1ahGXB+uGVq5fmg5d0Erh2lYG24DGamnQyauF7+A3WFYFy6a0Dbyf8bcm8Jd++OoJtwYbn86M4+P62/Bc+qoFlx83HYxLIHrwYm8eTisAbeB7C7JCMTG7aIjtOpxI3x2NQrL4WYmHTC5VYiL7SKPC2VbRTcNx/qmokLcI7xZD8viwpUZQy5bUMR7iH1RHhftK1ZnU5XhnlF1ERXg9mF3aPsV4uIN4WKZWgEu7g6L4aEiXGW3vu98bf6qFNt4W2JYzfahp0pkHK51wcUjedCqZKepyo8WSoNqcD3/PLZJV7F1U+1Mo9CrChctzZZ6ltK4Ku2uW2Iaz/EZe6b25eOqNseWo6HbFbeP34v2rJyFdBwYOm6FuOphYLuMuVeTRkxdr3XGFW8oBt8v2bh/GY4rK8fVVFV3RcTAjfXD1V1RB656Ihg8nBXILg1FoR9dnxX14A5VFU3n5rKB3XEb4rRm1m+JmnDV4SFtYGfc2CATSQSfdeDqp+9B564vHOfkhujpoqFULVULbnxeP1F6cMttThbiWD/vS5RoNeF6semI8eCpw7XRc8PhmaR1xqUuUrumE9EHN+c3Pme7dv5BeHzZfBBKXSvTtwDGI9zOpaczy15XDF5eMx/7Hor6cQ3vW9LE396cSevBufT9Gzz/5rK5/nLdUT+u+cg5abDPrz/97feTE887OTn59+X1b+xVD3yxHlyD6lLtGp3vC2okupO14AqD6pL4d4+5LWVd5otfSsE2b4l14s5nqLfGfNqDQ+GtFXeR2IjbITp3Y75lm23aiKNjVgO3fy0j9+RbYhqcBl417evAXRT/JDbwo5kYeq8PV0S/EIAPyusny+sYr7n2g5uxeP2480nuxtil01ZneS93ah6LQWGXuDurRJBYBe6y+M81O/GDr+OK1ASV4c5/qpc3jGvwS79XJ374D/pibMaF3y1lAAAAAElFTkSuQmCC",QI=function(e){var n=(0,t.useContext)(GE).auth,r=c(Tu(n),1)[0];return(0,Cu.jsxs)(t.Fragment,{children:[(0,Cu.jsxs)("div",{className:"user-info",children:[(0,Cu.jsx)("div",{className:"user-img",style:{backgroundImage:"url(".concat(r.photoURL?r.photoURL:HI,")")}}),(0,Cu.jsx)("div",{className:"user-name",children:r.displayName}),(0,Cu.jsx)("div",{className:"contacts-img",style:{backgroundImage:"url(".concat(WI,")")},onClick:e.onActiveContactList})]}),(0,Cu.jsxs)("div",{className:"search-dialog",children:[(0,Cu.jsx)("input",{className:"input-search",type:"text",placeholder:"Search or start new chat",value:e.searchDialog,onChange:function(t){return e.setSearchDialog(t.target.value)}}),(0,Cu.jsx)("button",{className:"search-chat",children:(0,Cu.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-search",children:[(0,Cu.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,Cu.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})]})},YI=function(e){var n,r,i,a={year:"numeric",month:"short",day:"numeric"};function o(t){return t.map((function(t){return(0,Cu.jsxs)("div",{className:"list-item",onClick:function(){return e.openUserDialog(t.uid,t.avatar,t.fullname)},children:[(0,Cu.jsx)("div",{className:"user-img",style:{backgroundImage:"url(".concat(t.avatar?t.avatar:HI,")")}}),(0,Cu.jsx)("div",{className:"contact-info",children:(0,Cu.jsx)("div",{className:"contact-name",children:t.fullname})})]},t.uid)}))}return(0,Cu.jsx)(t.Fragment,{children:""===e.searchDialog?(0,Cu.jsx)(t.Fragment,{children:e.activeContactList?o(e.users):(i=e.dialog,i.map((function(t){return""!==t.lastMsg?(0,Cu.jsxs)("div",{className:"list-item",onClick:function(){return e.openUserDialog(t.contactId,t.contactIcon,t.contactName)},children:[(0,Cu.jsx)("div",{className:"contact-img",style:{backgroundImage:"url(".concat(t.contactIcon?t.contactIcon:HI,")")}}),(0,Cu.jsxs)("div",{className:"contact-info",children:[(0,Cu.jsx)("div",{className:"contact-name",children:t.contactName}),(0,Cu.jsx)("div",{className:"contact-last-message",children:t.lastMsg.length>25?t.lastMsg.substr(0,25)+"...":t.lastMsg})]}),(0,Cu.jsxs)("div",{className:"contact-time",children:[(0,Cu.jsx)("div",{className:"contact-time-message",children:null!==t.timeLastMsg?t.timeLastMsg.toDate().toLocaleDateString("en-US",a):""}),(0,Cu.jsx)("div",{className:t.counter>0?"counter-message":"contact-counter-message",children:t.counter})]})]},t.contactId):""})))}):(0,Cu.jsx)(t.Fragment,{children:o((n=e.users,r=e.searchDialog,n.filter((function(e){return e.fullname.toLowerCase().includes(r.toLowerCase())}))))})})};var XI=n.p+"static/media/back.f837749e02d558d486ae2cd9d0e2b2c1.svg",JI=function(e){return(0,Cu.jsxs)(t.Fragment,{children:[(0,Cu.jsx)("div",{className:"back-icon",style:{backgroundImage:"url(".concat(XI,")")},onClick:function(){e.setActiveChatMsgClass(!1)}}),(0,Cu.jsx)("div",{className:"user-icon",children:""!==e.contactPhoto?(0,Cu.jsx)("div",{className:"user-img",style:{backgroundImage:"url(".concat(e.contactPhoto?e.contactPhoto:HI,")")}}):""}),(0,Cu.jsx)("div",{className:"user-name",children:""!==e.contactName?e.contactName:""})]})};var ZI,$I=n.p+"static/media/notepad.85072e797a2ee4440244903794c347d5.svg",e_=function(e){var n=1;(0,t.useEffect)((function(){e.activeScroll&&r()}));var r=function(){var e=document.querySelector(".chat-message__message-dialog"),t=e.scrollHeight-e.clientHeight;e.scrollTop=t>0?t:0};return(0,Cu.jsx)(t.Fragment,{children:e.messages.length>0&&e.messages.findIndex((function(t){return t.partner===e.contactId}))>=0?e.messages.map((function(t){return t.uid===e.contactId||t.partner===e.contactId?(0,Cu.jsxs)("div",{className:e.contactId!==t.uid?"dialog-message-content user-content":"dialog-message-content contact-content",children:[(0,Cu.jsx)("div",{className:e.contactId!==t.uid?"content-icon user-icon":"content-icon contact-icon",children:(0,Cu.jsx)("div",{className:"user-img",style:{backgroundImage:"url(".concat(t.photoURL?t.photoURL:HI,")")}})}),(0,Cu.jsxs)("div",{className:"content-info",children:[(0,Cu.jsx)("div",{className:e.contactId!==t.uid?"content-info-text user-text":"content-info-text contact-text",children:t.text}),(0,Cu.jsx)("div",{className:e.contactId!==t.uid?"content-info-data user-data":"content-info-data contact-data",children:null!==t.createAt?new Intl.DateTimeFormat("en",{timeStyle:"short",dateStyle:"short"}).format(t.createAt.toDate()):""})]})]},n++):""})):(0,Cu.jsx)("div",{className:"dialog-message-absent",children:(0,Cu.jsx)("div",{className:"absent-img",style:{backgroundImage:"url(".concat($I,")")}})})})},t_=E((function e(){var t=this;I(this,e),this._apiBase="https://api.chucknorris.io/jokes/",this.getResource=function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllCharacters=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("".concat(t._apiBase,"random"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))})),n_=t_,r_=function(e){var n=(0,t.useContext)(GE),r=n.auth,i=n.firestore,a=c(Tu(r),1)[0],o=c((0,t.useState)(""),2),u=o[0],s=o[1],l=new n_,f=function(){var t=x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:""!==u&&(i.collection("messages").add({uid:a.uid,displayName:a.displayName,photoURL:a.photoURL?a.photoURL:HI,text:u,partner:e.contactId,createAt:OI()}),e.setCounter(e.counter+1),s(""),d(e.contactId,u),setTimeout(h,1e4),e.setActiveScroll(!0));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){l.getAllCharacters().then((function(t){i.collection("messages").add({uid:e.contactId,displayName:e.contactName,photoURL:e.contactPhoto?e.contactPhoto:HI,text:t.value,createAt:OI()}),d(e.contactId,t.value),function(e,t){v.apply(this,arguments)}(e.contactId,e.counter)})),e.setActiveScroll(!0)};function d(e,t){return p.apply(this,arguments)}function p(){return p=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.collection("dialog").doc(t).update({lastMsg:n,timeLastMsg:OI()});case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function v(){return v=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.collection("dialog").doc(t).update({counter:n});case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return(0,Cu.jsxs)("div",{className:"enter-message-content",children:[(0,Cu.jsx)("textarea",{type:"text",rows:1,className:"text-message",placeholder:"Type your message",value:u,onChange:function(e){return s(e.target.value)},disabled:e.activeInput}),(0,Cu.jsx)("button",{className:"send-message",onClick:f,disabled:e.activeInput,children:(0,Cu.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-send",children:[(0,Cu.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,Cu.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})},i_=function(){var e=(0,t.useContext)(GE).firestore,n=c(zI(e.collection("messages").orderBy("createAt")),2),r=n[0],i=n[1],a=c(zI(e.collection("dialog")),1)[0],o=c(zI(e.collection("users")),1)[0],u=c((0,t.useState)(!0),2),s=u[0],l=u[1],f=c((0,t.useState)(!1),2),h=f[0],d=f[1],p=c((0,t.useState)(!1),2),v=p[0],y=p[1],m=c((0,t.useState)(!1),2),g=m[0],k=m[1],b=c((0,t.useState)(""),2),w=b[0],x=b[1],I=c((0,t.useState)(""),2),_=I[0],E=I[1],S=c((0,t.useState)(""),2),T=S[0],C=S[1],N=c((0,t.useState)(""),2),A=N[0],D=N[1],R=c((0,t.useState)(1),2),P=R[0],O=R[1],L="chat-message",M="chat-dialog";if(g&&(L+=" chat-message-mobile",M+=" chat-dialog-mobile"),i)return(0,Cu.jsx)(GI,{});return(0,Cu.jsx)("div",{className:"container",children:(0,Cu.jsxs)("div",{className:"chat-content",style:{height:window.innerHeight-50},children:[(0,Cu.jsxs)("div",{className:M,children:[(0,Cu.jsx)("div",{className:"chat-dialog__dialog-header",children:(0,Cu.jsx)(QI,{onActiveContactList:function(){d(!h)},searchDialog:w,setSearchDialog:x})}),(0,Cu.jsx)("div",{className:"chat-dialog__dialog-list",children:(0,Cu.jsx)(YI,{openUserDialog:function(t,n,r){D(t),E(n),C(r),x(""),l(!1),d(!1),y(!0),k(!0),O(1),e.collection("dialog").doc(t).update({counter:0})},searchDialog:w,activeContactList:h,contactId:A,dialog:a,users:o})})]}),(0,Cu.jsxs)("div",{className:L,children:[(0,Cu.jsx)("div",{className:"chat-message__message-header",children:(0,Cu.jsx)(JI,{contactPhoto:_,contactName:T,setActiveChatMsgClass:k})}),(0,Cu.jsx)("div",{className:"chat-message__message-dialog",children:(0,Cu.jsx)(e_,{contactId:A,messages:r,activeScroll:v})}),(0,Cu.jsx)("div",{className:"chat-message__enter-message",children:(0,Cu.jsx)(r_,{contactId:A,contactName:T,contactPhoto:_,activeInput:s,counter:P,setCounter:O,setActiveScroll:y})})]})]})})},a_=function(){function e(t,n){var r=this;I(this,e),this._delegate=t,this.firebase=n,Oe(t,new he("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return E(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),He(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ae;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Oe(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Le(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),o_=(C(ZI={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),C(ZI,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ZI),u_=new Q("app-compat","Firebase",o_);var s_=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ke(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(J(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ye,setLogLevel:Je,onLog:Xe,apps:null,SDK_VERSION:ze,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Me(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw u_.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&F(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!J(n,e=e||Ae))throw u_.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(a_);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){F(n,e)},createSubscribe:re,ErrorFactory:Q,deepExtend:F}),n}(),c_=new Ee("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){c_.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var l_=self.firebase.SDK_VERSION;l_&&l_.indexOf("LITE")>=0&&c_.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f_=s_;!function(e){Ye("@firebase/app-compat","0.1.22",e)}();f_.registerVersion("firebase","9.6.11","app-compat");var h_=function(){var e=(0,t.useContext)(GE).auth,n=function(){var t=x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new f_.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(n);case 3:r=t.sent,r.user;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,Cu.jsx)("div",{className:"container",children:(0,Cu.jsx)("div",{className:"login-content",style:{height:window.innerHeight-50},children:(0,Cu.jsx)("div",{className:"login-button",children:(0,Cu.jsx)("button",{onClick:n,children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})})})})},d_=function(e){var n=(0,t.useContext)(GE).auth;return c(Tu(n),1)[0]?(0,Cu.jsx)(t.Fragment,{children:(0,Cu.jsx)(i_,{})}):(0,Cu.jsx)(t.Fragment,{children:(0,Cu.jsx)(h_,{})})},p_=function(){var e=(0,t.useContext)(GE).auth,n=c(Tu(e),2);n[0];return n[1]?(0,Cu.jsx)(GI,{}):(0,Cu.jsxs)(t.Fragment,{children:[(0,Cu.jsx)(Nu,{}),(0,Cu.jsx)("main",{children:(0,Cu.jsx)(d_,{})})]})};function v_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nh("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function y_(){if("undefined"===typeof Uint8Array)throw new nh("unimplemented","Uint8Arrays are not available in this environment.")}function m_(){if("undefined"==typeof atob)throw new nh("unimplemented","Blobs are unavailable in Firestore in this environment.")}var g_=function(){function e(t){I(this,e),this._delegate=t}return E(e,[{key:"toBase64",value:function(){return m_(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return y_(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return m_(),new e(gx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return y_(),new e(gx.fromUint8Array(t))}}]),e}();function k_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var b_=function(){function e(){I(this,e)}return E(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){yx(e=Hw(e,sx));var n=cx(e),r=e._freezeSettings(),i=new gw;return fx(n,i,new yw(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){yx(e=Hw(e,sx));var t=cx(e),n=e._freezeSettings(),r=new gw;return fx(t,r,new mw(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new nh(th.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new rh;return e._queue.enqueueAndForgetEvenWhileRestricted(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_y.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,_y.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(tg(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),w_=function(){function e(t,n,r){var i=this;I(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Fh||(this._appCompat=t)}return E(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Xf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Jw(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return hx(this._delegate)}},{key:"disableNetwork",value:function(){return dx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&zw("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new rh;return e.asyncQueue.enqueueAndForget(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Mb,n.next=3,Mw(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(cx(e=Hw(e,sx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return NI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new nh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new L_(this,tx(this._delegate,e))}catch(t){throw T_(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new S_(this,nx(this._delegate,e))}catch(t){throw T_(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new R_(this,function(e,t){if(e=Hw(e,Xw),qw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nh(th.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new $w(e,null,function(e){return new zd(_h.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw T_(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return PI(this._delegate,(function(n){return e(new I_(t,n))}))}},{key:"batch",value:function(){var e=this;return cx(this._delegate),new __(new wI(this._delegate,(function(t){return AI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return px(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return vx(this._delegate,e).then((function(e){return e?new R_(t,e):null}))}}]),e}(),x_=function(e){v(n,e);var t=k(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return E(n,[{key:"convertBytes",value:function(e){return new g_(new gx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return S_.forKey(t,this.firestore,null)}}]),n}(gI);var I_=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new x_(t)}return E(e,[{key:"get",value:function(e){var t=this,n=M_(e);return this._delegate.get(n).then((function(e){return new A_(t._firestore,new Jx(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=M_(e);return n?(v_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=M_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=M_(e);return this._delegate.delete(t),this}}]),e}(),__=function(){function e(t){I(this,e),this._delegate=t}return E(e,[{key:"set",value:function(e,t,n){var r=M_(e);return n?(v_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=M_(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=M_(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),E_=function(){function e(t,n,r){I(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return E(e,[{key:"fromFirestore",value:function(e,t){var n=new Zx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new D_(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new x_(t),n),i.set(n,a)),a}}]),e}();E_.INSTANCES=new WeakMap;var S_=function(){function e(t,n){I(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new x_(t)}return E(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new L_(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new L_(this.firestore,tx(this._delegate,e))}catch(t){throw T_(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=oe(e))instanceof Zw&&rx(this._delegate,e)}},{key:"set",value:function(e,t){t=v_("DocumentReference.set",t);try{return t?SI(this._delegate,e,t):SI(this._delegate,e)}catch(n){throw T_(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?TI(this._delegate,e):TI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw T_(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return AI(Hw(e.firestore,sx),[new Up(e._key,_p.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=C_(n),a=N_(n,(function(t){return new A_(e.firestore,new Jx(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return CI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?_I(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Hw(e,Zw);var t=Hw(e.firestore,sx);return Uw(cx(t),e._key,{source:"server"}).then((function(n){return DI(t,e,n)}))}(this._delegate):function(e){e=Hw(e,Zw);var t=Hw(e.firestore,sx);return Uw(cx(t),e._key).then((function(n){return DI(t,e,n)}))}(this._delegate),t.then((function(e){return new A_(n.firestore,new Jx(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(E_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new nh("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Zw(n._delegate,r,new Bh(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Zw(n._delegate,r,t))}}]),e}();function T_(e,t,n){return e.message=e.message.replace(t,n),e}function C_(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!k_(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function N_(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=k_(e[0])?e[0]:k_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var A_=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"ref",get:function(){return new S_(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tI(this._delegate,e._delegate)}}]),e}(),D_=function(e){v(n,e);var t=k(n);function n(){return I(this,n),t.apply(this,arguments)}return E(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Zf()}(void 0!==t),t}}]),n}(A_),R_=function(){function e(t,n){I(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new x_(t)}return E(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iI(this._delegate,function(e,t,n){var r=t,i=Yx("where",e);return new aI(i,r,n)}(t,n,r)))}catch(i){throw T_(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Yx("orderBy",e);return new oI(n,t)}(t,n)))}catch(r){throw T_(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iI(this._delegate,function(e){return Qw("limit",e),new uI("limit",e,"F")}(t)))}catch(n){throw T_(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iI(this._delegate,function(e){return Qw("limitToLast",e),new uI("limitToLast",e,"L")}(t)))}catch(n){throw T_(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,iI(this._delegate,cI.apply(void 0,arguments)))}catch(t){throw T_(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iI(this._delegate,lI.apply(void 0,arguments)))}catch(t){throw T_(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iI(this._delegate,hI.apply(void 0,arguments)))}catch(t){throw T_(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iI(this._delegate,dI.apply(void 0,arguments)))}catch(t){throw T_(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return ix(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?EI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Hw(e,$w);var t=Hw(e.firestore,sx),n=cx(t),r=new II(t);return jw(n,e._query,{source:"server"}).then((function(n){return new $x(t,r,e,n)}))}(this._delegate):function(e){e=Hw(e,$w);var t=Hw(e.firestore,sx),n=cx(t),r=new II(t);return nI(e._query),jw(n,e._query).then((function(n){return new $x(t,r,e,n)}))}(this._delegate),t.then((function(e){return new O_(n.firestore,new $x(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=C_(n),a=N_(n,(function(t){return new O_(e.firestore,new $x(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return CI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(E_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),P_=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new D_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),O_=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return E(e,[{key:"query",get:function(){return new R_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new D_(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new P_(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new D_(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tI(this._delegate,e._delegate)}}]),e}(),L_=function(e){v(n,e);var t=k(n);function n(e,r){var i;return I(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return E(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new S_(this.firestore,e):null}},{key:"doc",value:function(e){try{return new S_(this.firestore,void 0===e?nx(this._delegate):nx(this._delegate,e))}catch(t){throw T_(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Hw(e.firestore,sx),r=nx(e),i=kI(e.converter,t);return AI(n,[Cx(Tx(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,_p.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new S_(t.firestore,e)}))}},{key:"isEqual",value:function(e){return rx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(E_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(R_);function M_(e){return Hw(e,Zw)}var F_,V_=function(){function e(){I(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=D(mx,n)}return E(e,[{key:"isEqual",value:function(e){return(e=oe(e))instanceof mx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Sh.keyField().canonicalString())}}]),e}(),U_=function(){function e(t){I(this,e),this._delegate=t}return E(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=OI();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Nx("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=LI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=MI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ox("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),j_={Firestore:w_,GeoPoint:bx,Timestamp:gh,Blob:g_,Transaction:I_,WriteBatch:__,DocumentReference:S_,DocumentSnapshot:A_,Query:R_,QueryDocumentSnapshot:D_,QuerySnapshot:O_,CollectionReference:L_,FieldPath:V_,FieldValue:U_,setLogLevel:function(e){!function(e){Wf.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function B_(){return window}(function(e,t){e.INTERNAL.registerComponent(new he("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},j_)))})(F_=f_,(function(e,t){return new w_(e,t,new b_)})),F_.registerVersion("@firebase/firestore-compat","0.1.17");function q_(e,t,n){return z_.apply(this,arguments)}function z_(){return z_=x(A().mark((function e(t,n,r){var i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=B_(),o=a.BuildInfo,Vt(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Y_(n.sessionId);case 4:return u=e.sent,s={},zn()?s.ibi=o.packageName:jn()?s.apn=o.packageName:Dt(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",lu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function K_(){return K_=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=B_(),r=n.BuildInfo,i={},zn()?i.iosBundleId=r.packageName:jn()?i.androidPackageName=r.packageName:Dt(t,"operation-not-supported-in-this-environment"),e.next=5,jo(t,i);case 5:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e){var t=B_().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function W_(e,t,n){return H_.apply(this,arguments)}function H_(){return H_=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=B_(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Rt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),jn()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),H_.apply(this,arguments)}function Q_(e){var t,n,r,i,a,o,u,s,c,l,f=B_();Mt("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Mt("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Mt("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Mt("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Mt("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Y_(e){return X_.apply(this,arguments)}function X_(){return(X_=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=J_(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J_(e){if(Vt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Z_=function(e){v(n,e);var t=k(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return E(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),h(l(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Fo);function $_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:iE(),postBody:null,tenantId:e.tenantId,error:Rt(e,"no-auth-event")}}function eE(e,t){return aE()._set(oE(e),t)}function tE(e){return nE.apply(this,arguments)}function nE(){return nE=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aE()._get(oE(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,aE()._remove(oE(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}function rE(e,t){var n,r,i=function(e){var t=uE(e),n=t.link?decodeURIComponent(t.link):void 0,r=uE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return uE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=uE(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Rt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function iE(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function aE(){return jt(ra)}function oE(e){return Pn("authEvent",e.config.apiKey,e.name)}function uE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||S(t)||u(t)||s();r[0];return te(r.slice(1).join("?"))}var sE=function(){function e(){I(this,e),this._redirectPersistence=aa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Po}return E(e,[{key:"_initialize",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Z_(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Dt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=x(A().mark((function e(t,n,r,i){var a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q_(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),mo.clear(),e.next=10,this._originValidation(t);case 10:return o=$_(t,r,i),e.next=13,eE(t,o);case 13:return e.next=15,q_(t,o,n);case 15:return u=e.sent,e.next=18,G_(u);case 18:return s=e.sent,e.abrupt("return",W_(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return K_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=B_(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tE(e);case 2:t.onEvent(lE());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=x(A().mark((function n(r){var i,a;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,tE(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=rE(i,r.url)),t.onEvent(a||lE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");B_().handleOpenURL=function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),cE=sE;function lE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}function fE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function hE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return!("file:"!==fE()&&"ionic:"!==fE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function dE(){return G()&&11===(null===document||void 0===document?void 0:document.documentMode)}function pE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/Edge\/\d+/.test(e)}function vE(){try{var e=self.localStorage,t=sa();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return dE()||pE(e)}()||W()}catch(n){return yE()&&W()}return!1}function yE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function mE(){return("http:"===fE()||"https:"===fE()||z()||hE())&&!(K()||q())&&vE()&&!yE()}function gE(){return hE()&&"undefined"!==typeof document}function kE(){return bE.apply(this,arguments)}function bE(){return(bE=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gE()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wE={LOCAL:"local",NONE:"none",SESSION:"session"},xE=Mt,IE="persistence";function _E(e,t){xE(Object.values(wE).includes(t),e,"invalid-persistence-type"),K()?xE(t!==wE.SESSION,e,"unsupported-persistence-type"):q()?xE(t===wE.NONE,e,"unsupported-persistence-type"):yE()?xE(t===wE.NONE||t===wE.LOCAL&&W(),e,"unsupported-persistence-type"):xE(t===wE.NONE||vE(),e,"unsupported-persistence-type")}function EE(e){return SE.apply(this,arguments)}function SE(){return SE=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=TE(),r=Pn(IE,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function TE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var CE=Mt,NE=function(){function e(){I(this,e),this.browserResolver=jt(du),this.cordovaResolver=jt(cE),this.underlyingResolver=null,this._redirectPersistence=aa,this._completeRedirectFn=Po}return E(e,[{key:"_initialize",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=x(A().mark((function e(t,n,r,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=x(A().mark((function e(t,n,r,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return gE()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return CE(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,kE();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function AE(e){return e.unwrap()}function DE(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new ME(e,function(e,t){var n,r=oe(e),i=t;return Mt(t.customData.operationType,r,"argument-error"),Mt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Yi._fromError(r,i)}(e,t));else if(r){var i=RE(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function RE(e){var t=(e instanceof H?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof H)&&"temporaryProof"in t&&"phoneNumber"in t)return to.credentialFromResult(e);var n,r=t.providerId;if(!r||r===mt)return null;switch(r){case yt:n=jr;break;case pt:n=Ur;break;case vt:n=Br;break;case gt:n=Kr;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?qr._create(r,u):Sr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Vr(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof H?n.credentialFromError(e):n.credentialFromResult(e)}function PE(e,t){return t.catch((function(t){throw t instanceof H&&DE(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,RE(t)),additionalUserInfo:Hi(e),user:FE.getOrCreate(r)}}))}function OE(e,t){return LE.apply(this,arguments)}function LE(){return LE=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return PE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),LE.apply(this,arguments)}var ME=function(){function e(t,n){I(this,e),this.resolver=n,this.auth=t.wrapped()}return E(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return PE(AE(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),FE=function(){function e(t){I(this,e),this._delegate=t,this.multiFactor=function(e){var t=oe(e);return $i.has(t)||$i.set(t,Zi._fromUser(t)),$i.get(t)}(t)}return E(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",PE(this.auth,fi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OE(this.auth,Ya(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",PE(this.auth,po(this._delegate,t,NE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EE(Yn(this.auth));case 2:return e.abrupt("return",No(this._delegate,t,NE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",PE(this.auth,di(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return OE(this.auth,function(e,t,n){return Ja.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return PE(this.auth,function(e,t,n){return ho.apply(this,arguments)}(this._delegate,e,NE))}},{key:"reauthenticateWithRedirect",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EE(Yn(this.auth));case 2:return e.abrupt("return",To(this._delegate,t,NE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Oi.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ui(oe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ui(oe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return eo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Vi.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Li.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();FE.USER_MAP=new WeakMap;var VE=Mt,UE=function(){function e(t,n){if(I(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;VE(r,"invalid-api-key",{appName:t.name}),VE(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?NE:void 0;this._delegate=n.initialize({options:{persistence:BE(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(St),this.linkUnderlyingAuth()}return E(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?FE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Jn(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ii.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return _i(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return xi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",PE(this._delegate,Ti(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Pi.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Or.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VE(mE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Do(this._delegate,NE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",PE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Yn(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=jE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=jE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ni.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return wi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_E(this._delegate,t),e.t0=t,e.next=e.t0===wE.SESSION?4:e.t0===wE.LOCAL?6:e.t0===wE.NONE?11:13;break;case 4:return n=aa,e.abrupt("break",14);case 6:return e.next=8,jt(Ca)._isAvailable();case 8:return r=e.sent,n=r?Ca:ra,e.abrupt("break",14);case 11:return n=Rn,e.abrupt("break",14);case 13:return e.abrupt("return",Dt("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return PE(this._delegate,function(e){return Yr.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return PE(this._delegate,ci(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return PE(this._delegate,function(e,t){return mi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return PE(this._delegate,function(e,t,n){return ci(oe(e),Lr.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return PE(this._delegate,function(e,t,n){return Ai.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return OE(this._delegate,function(e,t,n){return Qa.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VE(mE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",PE(this._delegate,lo(this._delegate,t,NE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return VE(mE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,EE(this._delegate);case 3:return e.abrupt("return",Eo(this._delegate,t,NE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Si.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function jE(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&FE.getOrCreate(e))},error:t,complete:n}}function BE(e,t){var n=function(e,t){var n=TE();if(!n)return[];var r=Pn(IE,e,t);switch(n.getItem(r)){case wE.NONE:return[Rn];case wE.LOCAL:return[Ca,aa];case wE.SESSION:return[aa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ca)||n.push(Ca),"undefined"!==typeof window)for(var r=0,i=[ra,aa];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Rn)||n.push(Rn),n}UE.Persistence=wE;var qE=function(){function e(){I(this,e),this.providerId="phone",this._delegate=new to(AE(f_.auth()))}return E(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return to.credential(e,t)}}]),e}();qE.PHONE_SIGN_IN_METHOD=to.PHONE_SIGN_IN_METHOD,qE.PROVIDER_ID=to.PROVIDER_ID;var zE=Mt,KE=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f_.app();I(this,e),zE(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ga(t,n,i.auth()),this.type=this._delegate.type}return E(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new he("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new UE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:kt,PASSWORD_RESET:bt,RECOVER_EMAIL:wt,REVERT_SECOND_FACTOR_ADDITION:xt,VERIFY_AND_CHANGE_EMAIL:It,VERIFY_EMAIL:_t}},EmailAuthProvider:Lr,FacebookAuthProvider:Ur,GithubAuthProvider:Br,GoogleAuthProvider:jr,OAuthProvider:Vr,SAMLAuthProvider:zr,PhoneAuthProvider:qE,PhoneMultiFactorGenerator:yu,RecaptchaVerifier:KE,TwitterAuthProvider:Kr,Auth:UE,AuthCredential:er,Error:H}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.12")}(f_),f_.initializeApp({apiKey:"AIzaSyBxNOsGVz5r0J1nKawf_6oshc1rh88mfUM",authDomain:"messager-ec479.firebaseapp.com",projectId:"messager-ec479",storageBucket:"messager-ec479.appspot.com",messagingSenderId:"137342612507",appId:"1:137342612507:web:fa4457319fe085d789b4be",measurementId:"G-M37K7Q1ZV5"});var GE=(0,t.createContext)(null),WE=f_.auth(),HE=f_.firestore();i.createRoot(document.getElementById("root")).render((0,Cu.jsx)(t.StrictMode,{children:(0,Cu.jsx)(GE.Provider,{value:{firebase:f_,auth:WE,firestore:HE},children:(0,Cu.jsx)(p_,{})})}))}()}();
//# sourceMappingURL=main.4ec3ff4a.js.map